if (self.CavalryLogger) { CavalryLogger.start_js(["yy8mm"]); }

__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){this._input=a,this._ignoreKeys={},this._getValueFn=b}Object.assign(a.prototype,b("ArbiterMixin"),{_timeout:7e3,_currentState:b("TypingStates").INACTIVE,init:function(){this.init=b("emptyFunction"),this.reset(),this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Event").listen(this._input,"keyup",this._update.bind(this)),b("Run").onUnload(this._onunload.bind(this)))},reset:function(){clearTimeout(this._checkTimer),this._checkTimer=null,this._lastKeystrokeAt=null,this._currentState=b("TypingStates").INACTIVE},setIgnoreKeys:function(a){this._ignoreKeys=b("createObjectFrom")(a)},destroy:function(){this._subscriptions.release()},_onunload:function(){this._currentState==b("TypingStates").TYPING&&this._transition(b("TypingStates").QUITTING)},_update:function(a){a=b("Event").getKeyCode(a);var c=this._currentState;if(!this._ignoreKeys[a]){a=this._getValueFn?this._getValueFn():b("Input").getValue(this._input);a.trim().length===0?c==b("TypingStates").TYPING&&this._transition(b("TypingStates").INACTIVE):c==b("TypingStates").TYPING?this._recordKeystroke():c==b("TypingStates").INACTIVE&&(this._transition(b("TypingStates").TYPING),this._recordKeystroke())}},_transition:function(a){this.reset(),this._currentState=a,this.inform("change",a)},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now(),this._checkTimer||(this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout))},_checkTyping:function(){var a=this._lastKeystrokeTime+this._timeout,c=Date.now();c>a?this._transition(b("TypingStates").INACTIVE):(clearTimeout(this._checkTimer),this._checkTimer=setTimeout(this._checkTyping.bind(this),a-c+10))}});e.exports=a}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","FBLogger","Keys","MercuryServerRequestsConfig","MessageRequestUtils","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/ajax/messaging/typ.php";a=function(){__p&&__p();function a(a,c,d,e,f,g,h,i){__p&&__p();var j=this;this._notifyState=function(a,c){if(!j.userID&&!j.threadID||j.thread&&!j.pageID&&!b("MessageRequestUtils").shouldSendTypingIndicators(j.thread)||!b("ChatVisibility").isOnline()||a===j.remoteState||b("ifRequired")("ChannelConnection",function(a){return a.disconnected()},function(){return!0}))return;j._sendRequest(a,j.userID,c)};if(!d)return;this.thread=a;this.userID=c;this.input=d;this.source=e;this.threadID=g;this.pageID=i;!this.threadID&&!this.userID&&b("FBLogger")("messenger_web_product","typing constructor").mustfix("UserId: %s, ThreadId: %s",JSON.stringify(this.userID),JSON.stringify(this.threadID));this.remoteState=b("TypingStates").INACTIVE;this.notifyTimer=null;f=f||{};this.notifyDelay=f.notifyDelay||this.notifyDelay;this._typingDetector=new(b("TypingDetector"))(d,h);this._typingDetector.init(f);this._typingDetector.subscribe("change",this._stateChange.bind(this))}var c=a.prototype;c.setUserAndThread=function(a,b){(this.userID!==a||this.threadID!==b)&&(this.resetState(),this.userID=a,this.threadID=b)};c.setIgnoreEnter=function(a){a=a?[b("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(a)};c.resetState=function(){this._notifyState(b("TypingStates").INACTIVE),this.remoteState=b("TypingStates").INACTIVE,this._typingDetector.reset(),b("clearTimeout")(this.notifyTimer),this.notifyTimer=null};c.destroy=function(){this.resetState(),this._typingDetector.destroy()};c._stateChange=function(a,c){c!=b("TypingStates").QUITTING?(b("clearTimeout")(this.notifyTimer),this.notifyTimer=b("setTimeoutAcrossTransitions")(b("shield")(this._notifyState,this,c),this.notifyDelay)):this._notifyState(c,!0)};c._sendRequest=function(a,c,d){this.remoteState=a;!this.threadID&&!c&&b("FBLogger")("messenger_web_product","typing").mustfix("Empty threadID and userID in params",window.location.toString());a={typ:a,to:c,source:this.source,thread:this.threadID};var e=this.pageID?b("ActorURI").create(g,this.pageID):g,f=this.threadID;a=new(b("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,c)).setErrorHandler(function(a){b("FBLogger")("messenger_web_product","typing").mustfix("UserId: %s, ThreadId: %s",JSON.stringify(c),JSON.stringify(f))}).setData(a).setURI(e).setAllowCrossPageTransition(!0).setOption("asynchronous_DEPRECATED",!d);b("MercuryServerRequestsConfig").msgrRegion&&a.setRequestHeader("X-MSGR-Region",b("MercuryServerRequestsConfig").msgrRegion);a.send()};c._onTypResponse=function(a,c){c=c.getPayload()||{};c.offline&&b("AvailableList").set(a,b("AvailableListConstants").OFFLINE,"typing_response")};return a}();Object.assign(a.prototype,{notifyDelay:1e3});e.exports=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[(e=b("FantaTypeFileUploader")).fileTypes.ANIMATED_IMAGE]="gif_ids",d[e.fileTypes.AUDIO]="audio_ids",d[e.fileTypes.FILE]="file_ids",d[e.fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[e.fileTypes.IMAGE]="image_ids",d[e.fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length>0)return a;else return null}}function g(a){__p&&__p();if(a==null)return;else{a=a.get("uploadedFiles");var b=[],c=[];a.forEach(function(a,d,e){d=a.file;if(d.type.startsWith("image/")){b.push(d);return 0}else{c.push(d);return 0}});return[b,c]}}function h(a,c){if(c.length>0)return b("bs_curry")._1(a,c);else return 0}function c(a,b){__p&&__p();if(a==null||b==null)return 0;else{a=g(a);if(a!==void 0){a=a;h(b,a[0]);a[1].forEach(function(a){return h(b,[a])});return 0}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("getURLRanges",["UnicodeUtils","URI","URLScraper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;function a(a){__p&&__p();var c=[],d=0;while(!0){var e=a.substr(d),f=b("URLScraper").match(e);if(!f)break;var i=f;/^[a-z][a-z0-9\-+.]+:\/\//i.test(f)||(i="http://"+f);if(!(g||(g=b("URI"))).isValidURI(i))break;var j=e.indexOf(f);e=(h||(h=b("UnicodeUtils"))).strlen(e.substr(0,j));d+=e;j=f.length;c.push({offset:d,length:f.length,entity:{url:i}});d+=j}return c}e.exports=a}),null);
__d("P2PActions",["ChatOpenTab","ChatOpenTabEventLogger","FantaTabActions","P2PActionConstants","P2PDispatcher","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={updateCreditCards:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARDS_UPDATED,data:a})},updateCreditCardsError:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARDS_UPDATED_ERROR})},updatePaymentMethods:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_METHODS_UPDATED,data:a})},updatePaymentMethodsError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_METHODS_UPDATED_ERROR,data:a})},ignoreCreditCardChannelEvents:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHANNEL_EVENTS_IGNORED})},allowCreditCardChannelEvents:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHANNEL_EVENTS_ALLOWED})},creditCardSaving:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_SAVING})},addCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED,data:a})},addCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR,data:a})},addCreditCardErrorCleared:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR_CLEARED})},updatePresetCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED,data:a})},updatePresetCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED_ERROR,data:a})},updateCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_UPDATED,data:a})},updateCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_UPDATED_ERROR,data:a})},deleteCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_DELETED,data:a})},deleteCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_DELETED_ERROR,data:a})},verifyCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_VERIFIED,data:a})},verifyCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_VERIFIED_ERROR,data:a})},updateTransfers:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFERS_UPDATED,data:a})},updateTransfersError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFERS_UPDATED_ERROR,data:a})},updateNUXTransfers:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").NUX_TRANSFERS_UPDATED,data:a})},transferAdded:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ADDED,data:a})},transferAddedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ADDED_ERROR,data:a})},transferUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_UPDATED,data:a})},transferUpdatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_UPDATED_ERROR,data:a})},transferAccepted:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ACCEPTED})},transferDeclined:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_DECLINED,data:a})},chatSendViewOpened:function(a){function c(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHAT_SEND_VIEW_OPENED,data:a})}b("ChatOpenTab").canOpenTab()&&!a.fromChatTab?(a.fromChatTab||(b("FantaTabActions").openTab(a.threadID),b("ChatOpenTabEventLogger").logAutoOpen("p2pAction",a.threadID)),c()):(b("ifRequired")("MessengerActions",function(c){b("setImmediate")(function(){c.selectThread(a.threadID)})}),c())},chatSendViewClosed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED,data:a})},binNumberValidated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BIN_NUMBER_VALIDATED,data:a})},binNumberValidatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BIN_NUMBER_VALIDATED_ERROR,data:a})},friendsListUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").FRIENDS_LIST_UPDATED,data:a})},userEligibilityUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").USER_ELIGIBILITY_UDPATED,data:a})},showDialog:function(a,c){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").DIALOG_SHOWN,data:{dialogClass:a,dialogProps:c}})},hideDialog:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").DIALOG_CLOSED})},bannerStatesUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_STATES_UPDATED,data:a})},bannerDismissed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_DISMISSED,data:a})},bannerCompleted:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_COMPLETED,data:a})},addPlatformContext:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_ADDED,data:a})},platformContextBannerDismissed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_BANNER_DISMISSED,data:a})},platformContextProductItemSold:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD,data:a})},platformContextChanged:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_CHANGED,data:a})},extensiveTransferDetailsLoaded:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").EXTENSIVE_TRANSFER_DETAILS_UPDATED,data:a})},paymentRequestInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_INITIATED})},paymentRequestInitiatedComplete:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE})},paymentRequestCreated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CREATED,data:a})},paymentRequestCreatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR,data:a})},paymentRequestUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_UPDATED,data:a})},paymentRequestDeclineInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED})},paymentRequestDeclined:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINED,data:a})},paymentRequestDeclineError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR,data:a})},paymentRequestCancelInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED})},paymentRequestCanceled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCELED,data:a})},paymentRequestCancelError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR,data:a})},paymentRequestsFetched:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUESTS_FETCHED,data:a})}};e.exports=a}),null);
__d("P2PLogger",["BanzaiLogger"],(function(a,b,c,d,e,f){"use strict";var g="P2PPaymentLoggerConfig";a={log:function(a,c){c=babelHelpers["extends"]({event:a},c),b("BanzaiLogger").log(g,c)}};e.exports=a}),null);
__d("isWebGLEnabled",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;function h(){try{var a=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(a){return!1}}function a(){g===null&&(g=h());return g}e.exports=a}),null);
__d("BootloadOnInteraction.react",["BootloadOnRender.react","React"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.$1=function(){c.setState({hadUserInteraction:!0})};c.state={hadUserInteraction:!1};return c}var d=c.prototype;d.render=function(){if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").jsx(b("BootloadOnRender.react"),{placeholder:a,loader:c,component:d})};return c}(b("React").Component);e.exports=a}),null);