if (self.CavalryLogger) { CavalryLogger.start_js(["XhBxo"]); }

__d("UFIAddCommentIsShoppingVideoQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"videoID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={kind:"ScalarField",alias:null,name:"is_shopping_video",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"UFIAddCommentIsShoppingVideoQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:b,concreteType:"Video",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"product_tags",storageKey:null,args:null,concreteType:"ProductItem",plural:!0,selections:[d]}]}]},operation:{kind:"Operation",name:"UFIAddCommentIsShoppingVideoQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:b,concreteType:"Video",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"product_tags",storageKey:null,args:null,concreteType:"ProductItem",plural:!0,selections:[d,e]},e]}]},params:{operationKind:"query",name:"UFIAddCommentIsShoppingVideoQuery",id:"4108603245831697",text:null,metadata:{}}}}();e.exports=a}),null);
__d("BusinessActorUtils.brands",["UnicodeCJK"],(function(a,b,c,d,e,f){"use strict";a={getInitials:function(a,c){a===void 0&&(a="");c===void 0&&(c="");a=a.trim().charAt(0);c=c.trim().charAt(0);a=a+c;return b("UnicodeCJK").hasIdeograph(a)?c:a.toUpperCase()}};e.exports=a}),null);
__d("ConstituentBadgeEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){e.exports=new(b("EventEmitter"))()}),null);
__d("AuthorPinnedCommentsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCommentID=function(a){this.$1.comment_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={comment_id:!0,event:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("AuthorPinnedCommentLogger",["AuthorPinnedCommentsTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.logPinningCommentAttempt=function(a){this.$1(a,"pinning_attempt")};c.logUnpinningCommentAttempt=function(a){this.$1(a,"unpinning_attempt")};c.logReplacingPinnedCommentAttempt=function(a){this.$1(a,"replacing_attempt")};c.logNuxDisplayed=function(a){this.$1(a,"nux_displayed")};c.logNuxDismissed=function(a){this.$1(a,"nux_dismissed")};c.logPinButtonShown=function(a){this.$1(a,"pin_button_shown")};c.logUnpinButtonShown=function(a){this.$1(a,"unpin_button_shown")};c.$1=function(a,c){new(b("AuthorPinnedCommentsTypedLogger"))().setCommentID(a).setEvent(c).log()};return a}();e.exports=new a()}),null);
__d("UFIDispatcher",["ReactDispatcher_DEPRECATED","UFISharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.dispatch=function(c){a.prototype.dispatch.call(this,c),b("UFISharedDispatcher").dispatch(c)};return c}(b("ReactDispatcher_DEPRECATED"));e.exports=a}),null);
__d("UFIAddCommentAction",["requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={logPost:function(a,b){return void 0}};b("requireWeak")("PrivateCommentsLogger",function(a){g=a});a={cancel:function(a){return{type:"add_comment_cancel",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier}},changeContent:function(a,b,c){return{type:"add_comment_change_content",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,text:b,replyFBID:c}},retrySubmit:function(a,b){return{type:"add_comment_retry_submit",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:b}},submitEdit:function(a,b,c,d){return{type:"add_comment_submit_edit",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:b,commentData:c,target:d}},submitNew:function(a,b,c,d){g.logPost(b.privacy_value===1,a.ftentidentifier);return{type:"add_comment_submit_new",instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:b,target:c,replyCommentID:d,timestamp:Date.now()}}};e.exports=a}),null);
__d("UFIBusinessActorIcon.react",["cx","AppUserRoleConstants.brands","BusinessActorUtils.brands","React","getObjectValues","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("BusinessActorUtils.brands").getInitials(this.props.firstName,this.props.lastName),c=this.props.businessRole===b("AppUserRoleConstants.brands").ADMIN;return b("React").jsx("div",{className:b("joinClasses")(this.props.classNames,"_1rpl"),children:b("React").jsx("div",{align:"center",className:b("joinClasses")(this.props.textClassNames,c?"_1rpm":null),children:a})})};return c}(b("React").Component);a.propTypes={firstName:(c=b("prop-types")).string.isRequired,lastName:c.string.isRequired,classNames:c.string,textClassNames:c.string,businessRole:c.oneOf(b("getObjectValues")(b("AppUserRoleConstants.brands")))};e.exports=a}),null);
__d("UFIActorIconContainer.react",["cx","ClickableArea.react","Image.react","JSResource","React","ShortProfiles","UFIBusinessActorIcon.react","XUISpinner.react","joinClasses","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("UFIActorSelector.react").__setRef("UFIActorIconContainer.react")),i=b("React").jsx(b("XUISpinner.react"),{size:"large"});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={actor:null,showActorSelectorDialog:!1},c.$2=function(){c.setState(function(a){return{showActorSelectorDialog:!a.showActorSelectorDialog}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.actorID)};d.componentDidUpdate=function(a){this.props.actorID!==a.actorID&&this.$1(this.props.actorID)};d.$1=function(a){var c=this;b("ShortProfiles").get(a,function(a){return c.setState({actor:a})})};d.render=function(){__p&&__p();var a=this.state.actor;if(!a)return this.props.tinyIcon?b("React").jsx(b("XUISpinner.react"),{size:"small"}):i;var c;this.props.tinyIcon?c=b("joinClasses")("img UFIActorImage _3tm9",this.props.className):this.props.smallIcon?c=b("joinClasses")("img UFIActorImage _3qxe",this.props.className):c=b("joinClasses")("img UFIActorImage _54ru",this.props.className);var d=this.props.actorSelectorConfig!=null&&this.props.isLivingRoom&&this.props.overlayActorSelectorOnUFIPhoto===!0;d&&(c=b("joinClasses")("UFIActorImageWithSelector",c));d=a.isBusinessPersona?b("React").jsx(b("UFIBusinessActorIcon.react"),{classNames:c,firstName:a.firstName,lastName:a.lastName,textClassNames:"UFIBusinessActorIconText"}):b("React").jsx(b("Image.react"),{alt:a.name,className:c,src:a.thumbSrc});if(this.props.actorSelectorConfig!=null&&this.props.isLivingRoom&&this.props.overlayActorSelectorOnUFIPhoto===!0){return(c=b("React")).jsxs("div",{className:"UFIActorImageContainer",children:[c.jsx(b("ClickableArea.react"),{onClick:this.$2,children:c.jsx("div",{className:"UFIActorSelectorOverlay"})}),c.jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(h,babelHelpers["extends"]({},this.props.actorSelectorConfig.props,{dialogShown:this.state.showActorSelectorDialog,useUFIPhotoOverlay:!0,onActorChange:this.props.onActorChange}))}),d]})}return d};return c}(b("React").Component);e.exports=a}),null);
__d("DigitalContentWalletSpendingSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,SHORTCUT_TIPPING:83,STREAMER_BONUS:84})}),null);
__d("FanFundingStarsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:FanFundingStarsEventsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:FanFundingStarsEventsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FanFundingStarsEventsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCommentID=function(a){this.$1.comment_id=a;return this};c.setContentID=function(a){this.$1.content_id=a;return this};c.setCta=function(a){this.$1.cta=a;return this};c.setCurrentBalance=function(a){this.$1.current_balance=a;return this};c.setEntrypointSurface=function(a){this.$1.entrypoint_surface=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExceptionObject=function(a){this.$1.exception_object=a;return this};c.setGameID=function(a){this.$1.game_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setProductID=function(a){this.$1.product_id=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setSpendID=function(a){this.$1.spend_id=a;return this};c.setStarsQuantity=function(a){this.$1.stars_quantity=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTipPaymentID=function(a){this.$1.tip_payment_id=a;return this};c.setUserAmount=function(a){this.$1.user_amount=a;return this};c.setUserCurrency=function(a){this.$1.user_currency=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoTimestamp=function(a){this.$1.video_timestamp=a;return this};c.setVirtualGiftID=function(a){this.$1.virtual_gift_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={comment_id:!0,content_id:!0,cta:!0,current_balance:!0,entrypoint_surface:!0,event:!0,exception_object:!0,game_id:!0,page_id:!0,product_id:!0,source:!0,spend_id:!0,stars_quantity:!0,time:!0,tip_payment_id:!0,user_amount:!0,user_currency:!0,vc:!0,video_timestamp:!0,virtual_gift_id:!0,weight:!0};e.exports=a}),null);
__d("MentionsInputUtils",[],(function(a,b,c,d,e,f){a={generateDataFromTextWithEntities:function(a){var b=a.text,c=[];(a.ranges||[]).forEach(function(a){var d=a.entity;!d.external&&!a.videoTimestamp&&!a.sphericalViewport&&!a.campaign&&!/\D/.test(d.id)&&c.push({uid:d.id,text:b.substr(a.offset,a.length),offset:a.offset,length:a.length,weakreference:!!d.weakreference})});a={value:b,mentions:c,delights:(a.ranges||[]).filter(function(a){return a.campaign})};return a}};e.exports=a}),null);
__d("UFIAttachMediaSection.react",["cx","fbt","Bootloader","Focus","React","UFICommentFileInputAcceptValues","XUIError.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bootloaded:!1,hasUploadFailure:!1},d.$1=null,d.$2=null,d.$3=function(){d.setState({hasUploadFailure:!1})},d.$4=function(){d.setState({hasUploadFailure:!1})},d.$5=function(){d.setState({hasUploadFailure:!0})},d.$6=function(a){d.props.onClick&&d.props.onClick();if(d.state.bootloaded)return;b("Bootloader").loadModules(["UFIUploader"],function(a){d.$1=new a(d.refs.inputContainer,d.refs.inputControl,d.refs.input,d.props.getPhotoUploadData,d.props.getFileUploadData,d.props.prepareForAttachedPhotoPreview,d.props.prepareForAttachedVideoPreview,d.props.prepareForAttachedFilePreview,d.props.onPhotoUploadComplete,d.props.onVideoEncodeUpdate,d.props.onVideoUploadUpdate,d.props.onVideoUploadComplete,d.props.onFileUploadComplete,d.props.setFileInput,d.props.viewerActorID,d.$3,d.$4,d.$5)},"UFIAttachMediaSection.react");d.setState({bootloaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this.refs,c=a.input;a=a.inputControl;c&&a&&(this.$2=b("Focus").relocate(c,a))};d.componentWillUnmount=function(){this.$1&&this.$1.destroy(),this.$2&&(this.$2.remove(),this.$2=null)};d.render=function(){var a=this.props.allowFileAttachments,c=a?h._("Adjuntar un archivo"):this.props.allowVideoAttachments?h._("Adjuntar foto o video"):h._("Adjuntar una foto"),d=a?h._("Se produjo un problema al adjuntar el archivo. Vuelve a intentarlo."):h._("Se produjo un problema al adjuntar el archivo. Vuelve a intentarlo."),e=this.state.hasUploadFailure;a=b("React").jsx("div",{className:"_r1a UFIPhotoAttachLinkWrapper _m"+(this.props.attachment?" _5t1p":""),"data-hover":e?null:"tooltip","data-tooltip-alignh":e?null:"center","data-tooltip-content":e?null:c,onClick:this.$6,ref:"inputContainer",role:"presentation",children:b("React").jsx("span",{className:a?"UFICommentFileIcon":"UFICommentPhotoIcon",ref:"inputControl",children:b("React").jsx("input",{accept:a?b("UFICommentFileInputAcceptValues").files:this.props.allowVideoAttachments?b("UFICommentFileInputAcceptValues").both:b("UFICommentFileInputAcceptValues").photos,"aria-label":c,className:"_n",name:"file",ref:"input",title:c,type:"file"},"0")})});return b("React").jsx(b("XUIError.react"),{xuiError:e?d:null,xuiErrorPosition:"above",xuiErrorAlignh:"center",children:a})};return c}(b("React").Component);a.propTypes={getPhotoUploadData:(c=b("prop-types")).func.isRequired,getFileUploadData:c.func,prepareForAttachedPhotoPreview:c.func.isRequired,prepareForAttachedVideoPreview:c.func,prepareForAttachedFilePreview:c.func,onPhotoUploadComplete:c.func.isRequired,onVideoUploadComplete:c.func,onVideoUploadUpdate:c.func,onVideoEncodeUpdate:c.func,onFileUploadComplete:c.func,onClick:c.func,setFileInput:c.func.isRequired,targetId:c.string,allowVideoAttachments:c.bool,allowFileAttachments:c.bool,attachment:c.object,viewerActorID:c.string.isRequired};e.exports=a}),null);
__d("UFIGifButton.react",["cx","fbt","Arbiter","Bootloader","FocusRelocator.react","LayerTabIsolation","Link.react","MessengerPlatformInterfaceType","React","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=278;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.call(this)||this;c.$5=function(){c.setState({flyoutShown:!1,query:""})};c.$8=function(){c.$3=c.state.flyoutShown};c.$7=function(a){__p&&__p();a.preventDefault();if(c.state.renderFlyout!==null){c.$3||(c.props.onGifFlyoutShow&&c.props.onGifFlyoutShow(),c.setState({flyoutShown:!0}));return}a=b("Bootloader").loadModules(["XUIContextualDialog.react","ChatContentSearchFlyout.react","ContextualLayerAutoFlip"],function(a,d,e){c.setState({flyoutShown:!0,renderFlyout:function(){return b("React").jsx(a,{alignment:"right",behaviors:{flip:e,LayerTabIsolation:b("LayerTabIsolation")},className:"_5trk",contextRef:function(){return c.$1},onBlur:c.$5,onToggle:function(a){!a&&c.state.flyoutShown&&c.$5()},position:"above",shown:c.state.flyoutShown,hasActionableContext:!0,width:i,children:b("React").jsx("div",{children:b("React").jsx(d,{onEscKeyDown:c.$5,onSelect:c.$9,query:c.state.query,shown:c.state.flyoutShown,searchInterface:b("MessengerPlatformInterfaceType").FB_INTERFACE,queryDefault:c.props.defaultGifSelection})})})}}),c.props.onGifFlyoutShow&&c.props.onGifFlyoutShow()},"UFIGifButton.react");c.$4.addSubscriptions(a)};c.$9=function(a){c.props.onGifSelected(a),c.$5()};c.$6=function(a){c.$1=a};c.state={renderFlyout:null,flyoutShown:!1,query:""};return c}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$4=new(b("SubscriptionsHandler"))();this.$2=b("Arbiter").subscribe("page_transition",function(){return a.$5()})};d.componentWillUnmount=function(){this.$2&&this.$2.unsubscribe(),this.$4&&this.$4.release(),delete this.$4};d.render=function(){var a=h._("Publica un GIF"),c=this.state.renderFlyout&&this.state.flyoutShown?this.state.renderFlyout():null;return b("React").jsx(b("FocusRelocator.react"),{from:this.$1,to:this.refs.icon,children:b("React").jsxs(b("Link.react"),{"aria-label":a,className:"_r1a UFICommentGifButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":this.props.showTooltip?a:null,linkRef:this.$6,onClick:this.$7,onMouseDown:this.$8,role:"button",children:[b("React").jsx("div",{ref:"icon",className:"UFICommentGifIcon"+(this.state.flyoutShown?" UFICommentGifIconActive":"")}),this.props.children,c]})})};return c}(b("React").Component);a.defaultProps={children:[],showTooltip:!0,defaultGifSelection:null};e.exports=a}),null);
__d("UFIGroupedInputTabs",["CacheStorage"],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({EMOJI:"EMOJI",STICKER:"STICKER",GIF:"GIF"}),h="last_used_input_on_composer",i=new(b("CacheStorage"))("localstorage");a=function(){return i.get(h,g.STICKER)};c=function(a){i.set(h,a)};e.exports={InputTitleEnum:g,getLastUsedTab:a,setLastUsedTab:c}}),null);
__d("UFIInsightsSharingCommentTag.react",["cx","fbt","invariant","Arbiter","DOMScroll","Middot.react","React","ReactDOM","ShimButton.react","Tooltip.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isSelected:!1},d.$2=function(){var a=d.props.commentId,c=d.$1();c!==void 0&&a!==void 0&&(b("Arbiter").inform("InsightsComments/"+c+"/clickedInsightsCommentTag",{commentId:a}),d.setSelected())},d.$3=function(){var a=d.$1();a!==void 0&&b("Arbiter").inform("InsightsComments/"+a+"/clickedInsightsCommentTag",{commentId:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.onCommentClicked&&b("Arbiter").unsubscribe(this.onCommentClicked)};d.setSelected=function(){var a=this;this.setState({isSelected:!0});window.setTimeout(function(){a.setState({isSelected:!1})},2e3)};d.componentDidMount=function(){var a=this,c=this.props.commentId;c!==void 0&&c!==null&&(this.onCommentClicked=b("Arbiter").subscribe("InsightsComments/clickedInsightComment/"+c,function(){var c=b("ReactDOM").findDOMNode(a.refs.commentTagContainer);c instanceof Element||i(0,4555);b("DOMScroll").ensureVisible(c,null,55,180);a.setSelected()}))};d.$1=function(){var a=this.props,b=a.feedbackTargetID;a=a.feedbackTargetGraphQLId;if(b!==null&&b!==void 0)return b;return a!==null&&a!==void 0?atob(a).split(":")[1]:""};d.render=function(){var a=this.props.showMiddot,c=a&&b("React").jsx(b("Tooltip.react"),{tooltip:h._("Comment posted with relevance to a certain point on the graph"),children:b("React").jsx(b("Middot.react"),{className:"_6y-0"})}),d="_71ku"+(this.state.isSelected?" _71kv":"");return b("React").jsxs("span",{className:d,ref:"commentTagContainer",role:"link",tabIndex:0,onBlur:this.$3,onClick:this.$2,children:[c,b("React").jsx(b("ShimButton.react"),{className:"_39g5 _71kw",form:"link",children:a&&"commented about ["+this.props.formattedValue+"] "})]})};return c}(b("React").Component);e.exports=a}),null);
__d("UFILiveShoppingFeaturedProductsButton.react",["cx","fbt","Bootloader","FocusRelocator.react","Link.react","React","createCancelableFunction","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=null;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={locked:!1,visible:!1},c.$5=function(a){a.preventDefault(),a.stopPropagation(),c.props.onClick&&c.props.onClick(),c.setState(function(a){return{locked:!1,visible:a.locked?!1:!a.visible}})},c.$6=function(a){c.setState(function(a){return{locked:a.visible}})},c.$8=function(a){a||c.setState({visible:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$1=null,this.$2&&this.$2.cancel(),this.$2=null};d.render=function(){var a=this,c=h._("Featured products"),d="UFICommentFeaturedProductsIconActive",e="UFICommentFeaturedProductsIcon";d=this.state.visible?b("joinClasses")(d,e):e;return b("React").jsx(b("FocusRelocator.react"),{from:this.$4,to:this.$3,children:b("React").jsxs(b("Link.react"),{"aria-label":c,className:this.props.buttonClassName,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":c,onClick:this.$5,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,linkRef:function(b){return a.$4=b},role:"button",children:[b("React").jsx("div",{className:d,ref:function(b){return a.$3=b}}),this.$7()]})})};d.$7=function(){var a=this;if(!i){this.state.visible&&(this.$2=b("createCancelableFunction")(function(){a.forceUpdate()}),this.$1=b("Bootloader").loadModules(["UFILiveShoppingFeaturedProductsDialog.react"],function(b){i=b,a.$2&&(a.$2(),a.$2=null)},"UFILiveShoppingFeaturedProductsButton.react"));return null}return!this.state.visible?null:b("React").jsx(i,{context:this.$4,onToggle:this.$8,shown:this.state.visible,position:this.props.position,videoID:this.props.videoID})};return c}(b("React").Component);e.exports=a}),null);
__d("UFIMarkdownButton.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=h._("Dar formato al texto con Markdown");return b("React").jsx(b("Link.react"),{className:"_r1a _45-m","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":a,"aria-label":a,onClick:this.props.onClick,role:"button",children:b("React").jsx("div",{className:"_45-n"+(this.props.active?" _45-o":"")})})};return c}(b("React").Component);e.exports=a}),null);
__d("UFIVideoEncodeStatusMonitor",["AsyncRequest","clearInterval","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.subscribe=function(a,c){var d=this;this.$3();this.$2=b("setInterval")(function(){new(b("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:d.$1}).setHandler(function(b){b=b.getPayload();b.is_ready?(d.$3(),a&&a()):b.error&&(d.$3(),c&&c())}).send()},1e3);return{unsubscribe:function(){d.$3()}}};c.$3=function(){b("clearInterval")(this.$2)};return a}();e.exports=a}),null);
__d("XConstituentBadgeV2OptInDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/constituent_badge/v2_opt_in_dialog/",{ft_id:{type:"String"},should_refresh:{type:"Bool",defaultValue:!1},__asyncDialog:{type:"Int"}})}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/nux/seen/save/",{link_id:{type:"String"},key:{type:"String",required:!0},seen:{type:"Bool",defaultValue:!1},env:{type:"Enum",enumType:0}})}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("XUFICommentMarkdownPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/markdown_preview/",{comment_body:{type:"String"}})}),null);
__d("UFIAddComment.react",["cx","fbt","requireCond","AccessibilityConfig","ActorURI","Arbiter","AsyncRequest","Badge.react","BootloadedComponent.react","Bootloader","ClipboardPhotoUploader","ConstituentBadgeEventEmitter","CurrentUser","DigitalContentWalletSpendingSubtype","DOMScroll","EmojiInputButton.react","Event","ExclamationStarsActions.react","ExclamationStarsDispatcher.react","ExclamationStarsStore.react","FanFundingStarsEventsTypedLogger","FluxContainer","cr:682211","IdentityBadgeUtils","JSResource","Keys","Link.react","LitestandStoryInsertionStatus","LivingRoomTypeValues","MentionsInputUtils","MercuryIDs","PrivateCommentsConfig","React","ReactDOM","RelayFBEnvironment","RelayModern","Run","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","TextWithEntities.react","TrackingNodes","UFIActorIconContainer.react","UFIAddCommentAction","UFIAttachMediaSection.react","UFIBotsButton","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComposerIsTypingStore","UFIConfig","cr:719006","UFIGifButton.react","UFIGroupedInputTabs","UFIImageBlock.react","UFIInsightsSharingCommentTag.react","UFILiveShoppingFeaturedProductsButton.react","UFIMarkdownButton.react","UFINavigationCheck","UFIODSLogger","UFISharedDispatcher","UFIStickerButton.react","UFIThreadedFacecastCommentsStore","UFIVideoEncodeStatusMonitor","WebFunnelLogger","cr:1167833","XBasicFBNuxDismissController","XBasicFBNuxGenShouldShowController","XBasicFBNuxViewController","XConstituentBadgeV2OptInDialogController","XFeedNUXSaveSeenStateController","XUFICommentGIFPreprocessController","XUFICommentMarkdownPreviewController","XUISpinner.react","XUIText.react","getActiveElement","gkx","ifRequired","immutable","joinClasses","keyMirror","lazyLoadComponent","promiseDone","prop-types","requireWeak","textProbablyWritingMarkdown","throttle","uuid","UFIAddCommentIsShoppingVideoQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("LivingRoomTypeValues").AddVideoTabValue,k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var l=b("UFIBotsButton").module,m=b("UFIGroupedInputTabs").InputTitleEnum,n=b("UFIGroupedInputTabs").setLastUsedTab,o=b("keyMirror")(b("DigitalContentWalletSpendingSubtype")),p={startFunnel:function(a){return void 0},logViewerInteracted:function(a){return void 0},logToggle:function(a,b){return void 0}};b("requireWeak")("PrivateCommentsLogger",function(a){p=a});var q=a.URL||a.webkitURL||{},r=h._("Escribe un comentario..."),s=h._("Escribe una respuesta..."),t="fcg fss UFICommentTip",u=h._("Escribe algo..."),v=19,w="/ajax/ufi/upload/",x="/ajax/ufi/sticker_preview/",y=1e3,z="comment_content_change",A=Object.freeze({UPLOAD:"uploading",ENCODE:"encoding"}),B=5572,C=/@\[([0-9;]+):((?:[^\\\]]|\\.)*)\]/g,D=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotBlock.react").__setRef("UFIAddComment.react")),E=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotFailedDialog.react").__setRef("UFIAddComment.react")),F=!1,G=!1,H=!1;c=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);d.renderEditCommentBox=function(a,c,e){__p&&__p();a=babelHelpers["extends"]({},a);delete a.addcommentautoflip;delete a.collapseaddcomment;delete a.hideActorPhoto;delete a.issnowlift;delete a.loggedOutLinkConfig;delete a.monitorHeight;delete a.sht;delete a.viewoptionstypeobjects;delete a.viewoptionstypeobjectsorder;return b("React").jsx(d,{viewerActorID:e.actorforpost,targetID:e.ownerid,groupID:e.grouporeventid,mentionsDataSource:e.mentionsdatasource,contextArgs:a,isEditing:!0,editingComment:c,allowVideoAttachments:e.allowvideoattachments,allowPhotoAttachments:e.allowphotoattachments,allowFileAttachments:e.allowfileattachments,allowStickerAttachments:e.allowstickerattachments,allowGifAttachments:e.allowgifattachments,allowBotMentions:e.allowbotmentions,allowTogglePrivateComments:!1,privateCommentTarget:e.actorname,allowCommentMarkdown:e.iscommentmarkdowneligible,showconstituentbadgev2optin:e.showconstituentbadgev2optin,constituentBanner:e.constituentbanneruri},"editing_comment"+c.id)};function d(d){__p&&__p();var e;e=c.call(this,d)||this;e.$4=!1;e.$17=function(a){e.props.isEditing&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&e.context.dispatch(b("UFIAddCommentAction").cancel(e.props.contextArgs));e.$1&&!e.$5&&(b("Run").onBeforeUnload(e.$18),e.$5=!0);var c=b("getActiveElement")();c&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&c.blur()};e.$19=function(a){e.$2&&!e.$4&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(e.$2).setAction("first_input").log(),e.$4=!0),b("UFISharedDispatcher").dispatch(b("UFIAddCommentAction").changeContent(e.props.contextArgs,a,e.$20())),b("Arbiter").inform(z,{fbid:e.$20(),text:a,instanceid:e.props.contextArgs.instanceid,ftentidentifier:e.props.contextArgs.ftentidentifier}),e.props.allowCommentMarkdown&&e.state.commentMarkdownEnabled&&e.$21(a),e.props.allowCommentFixSuggestions&&(e.$22(a),e.state.commentSuggestionsShowing&&!e.state.hasStaleSuggestions&&e.setState({hasStaleSuggestions:!0})),e.props.contextArgs.messengerCommentPivotsParams&&e.props.contextArgs.messengerCommentPivotsParams.enabled&&e.$23(a),e.state.groupedInputNUXShown&&e.$24()};e.$21=function(a){a=b("XUFICommentMarkdownPreviewController").getURIBuilder().setString("comment_body",a).getURI();new(b("AsyncRequest"))(a).setHandler(e.$28).send()};e.$28=function(a){if(!a)return;e.setState({commentMarkdownPreviewContent:a.payload?a.payload.markup:null})};e.$18=function(){if(a.PageTransitions&&!b("UFINavigationCheck").isLeaving(a.PageTransitions))return;if(e.refs&&e.refs.mentionsinput&&e.refs.mentionsinput.hasEnteredText())return h._("Todav\u00eda no finalizaste tu comentario. \u00bfQuieres salir sin terminarlo?")};e.$30=function(){e.setState({markdownNUXVisible:!1,gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,privateCommentNUXVisible:!1});window.setTimeout(function(){e.$1&&e.setState({isFocused:!1})},100);if(e.refs.mentionsinput&&e.refs.mentionsinput.hasEnteredText())return;e.setState({isCommenting:!1})};e.$31=function(a){var c=new(b("ClipboardPhotoUploader"))(w,e.$32());e.$33();e.$6=[c.subscribe("upload_start",e.$34),c.subscribe("upload_error",e.$35),c.subscribe("upload_success",function(a,b){e.$36(b)})];c.handlePaste(a)};e.$40=function(a,b){var c=e.props.isEditing||e.state.hasAttachment,d=a.encodedValue&&a.encodedValue.trim(),f=e.state.isLoadingPhoto||e.$41()||e.state.isLoadingFile;if(f||!c&&!d)return!1;else if(!c&&e.state.showMessengerPivot&&e.state.shouldSendAsMessage){f=a.encodedValue=a.encodedValue?a.encodedValue.trim():"";return e.$42(f)}else return e.$43(a,b)};e.$47=function(){e.$37()};e.focus=function(){__p&&__p();e.$37();var a={isCommenting:!0,isFocused:!0},c=e.props.contextArgs.loggedOutLinkConfig;c&&c.showAddComment&&b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(c.addCommentAjaxifyURI,null,"dialog")},"UFIAddComment.react");e.refs.groupedInputButton&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(a,b){a.hasUserSeenMessage(b.MERGE_INPUT_COMPOSER_NUX)||(e.setState({groupedInputNUXShown:!0}),a.markMessageSeenByUser(b.MERGE_INPUT_COMPOSER_NUX))},"UFIAddComment.react");if(e.props.allowGifAttachments&&b("UFIConfig").shouldShowGIFsInCommentsNux&&!F){F=!0;var d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.gifsInCommentsNUXVisible=!0}if(e.props.allowCommentMarkdown&&b("UFIConfig").shouldShowMarkdownCommentNUX&&!b("UFIConfig").shouldShowGIFsInCommentsNux&&!G){G=!0;d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","markdown_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.markdownNUXVisible=!0}if(e.props.allowTogglePrivateComments&&!(e.state.gifsInCommentsNUXVisible||a.gifsInCommentsNUXVisible)&&!(e.state.markdownNUXVisible||a.markdownNUXVisible)&&!H){H=!0;d=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",B).getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();if(a&&a.should_show_nux){a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",B).getURI();new(b("AsyncRequest"))().setURI(a).send();e.setState({privateCommentNUXVisible:!0})}}).send()}if(e.state.showConstituentBadgeV2OptIn){d=b("XConstituentBadgeV2OptInDialogController").getURIBuilder().setString("ft_id",e.props.commentsTargetID).getURI();new(b("AsyncRequest"))().setURI(d).send()}e.setState(a);e.markViewerHasInteracted();e.props.onFocus&&e.props.onFocus();b("Arbiter").inform("UFIAddComment/focus",{instanceid:e.props.contextArgs.instanceid,ftentidentifier:e.props.contextArgs.ftentidentifier,isTopLevelComposer:e.props.isTopLevelComposer})};e.$57=function(a,b){e.setState({fileInput:a,fileUploader:b})};e.handleMessengerPivotClick=function(){e.setState(function(a){e.$26(a.shouldSendAsMessage?"pivot disabled":"pivot enabled");return{shouldSendAsMessage:!a.shouldSendAsMessage}}),e.refs.mentionsinput.focus()};e.$58=function(a){n(m.EMOJI),e.refs.mentionsinput.insertEmoji(a)};e.$61=function(a,b){n(m.STICKER),e.onStickerSelected(a,b),e.$62(!1)};e.$59=function(a){n(m.GIF),e.onGifSelected(a),e.$62(!1)};e.$62=function(a){a!==e.state.flyoutShown&&e.setState({flyoutShown:a})};e.$60=function(){e.state.flyoutShown||e.markViewerHasInteracted(),e.state.groupedInputNUXShown&&e.$24()};e.$32=function(){var a=e.props.viewerActorID,c={profile_id:a,target_id:e.props.targetID,source:v};c[b("ActorURI").PARAMETER_ACTOR]=a;return c};e.$36=function(a){if(!e.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?e.setState({attachedPhoto:a,isLoadingPhoto:!1}):e.$35(null)};e.$63=function(){var a=e.props.viewerActorID,c={profile_id:a,target_id:e.props.targetID};c[b("ActorURI").PARAMETER_ACTOR]=a;return c};e.$66=function(a){if(!e.state.isLoadingFile)return;a=a.getPayload();a&&a.fbid?e.setState({attachedFile:a,isLoadingFile:!1}):e.$35(null)};e.$68=function(a,b){if(!e.state.attachedVideo||e.state.videoStatus!==A.ENCODE)return;if(b.obj.progress<e.state.videoProgress)return;b.obj.fbid=b.obj.videoID;if(e.state.attachedVideo.fbid&&e.state.attachedVideo.fbid!==b.obj.fbid)return;e.setState({attachedVideo:b.obj,videoProgress:b.obj.progress,videoStatus:A.ENCODE});e.$81(b.obj.stage)&&e.$82()};e.$69=function(a){e.setState({videoProgress:a})};e.$67=function(a){if(e.state.videoStatus!==A.UPLOAD)return;a&&a.video_id&&(e.setState({videoProgress:0,attachedVideo:a,videoStatus:A.ENCODE}),b("gkx")("835509")&&e.$7.addSubscriptions(new(b("UFIVideoEncodeStatusMonitor"))(a.video_id).subscribe(function(){e.setState({videoProgress:100})})))};e.$35=function(a){b("Arbiter").inform("video_upload_cancel",{}),e.state.fileInput&&e.state.fileInput.clear(),e.setState({attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1})};e.$34=function(){e.setState({attachedPhoto:null,isLoadingPhoto:!0})};e.$65=function(){e.setState({attachedFile:null,isLoadingFile:!0})};e.$64=function(){var a,b=e.state.fileInput?e.state.fileInput.input:null;b=b?b.files[0]:null;b&&q.createObjectURL&&(a=q.createObjectURL(b));e.setState({attachedVideo:null,videoStatus:A.UPLOAD,videoFileURL:a,videoProgress:0,isVideoFileTranscodedGIF:Boolean(b&&b.type==="image/gif")})};e.$83=function(a){if(!e.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?e.$80({attachedSticker:a,isLoadingPhoto:!1}):(b("Bootloader").loadModules(["Dialog"],function(a){var b=h._("Error de sticker"),c=h._("Hubo un problema al adjuntar el sticker.");new a().setTitle(b).setBody(c).setButtons(a.OK).show()},"UFIAddComment.react"),e.$71(null))};e.$71=function(a){e.setState({attachedSticker:null,isLoadingPhoto:!1,hasAttachment:!1})};e.$70=function(a){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.appendAction("FLEXIBLE_STARS_WWW_FUNNEL","dismissed_star_attachment"),a.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")},"UFIAddComment.react"),b("ExclamationStarsActions.react").flyoutStarsUnselected(),e.$35(a)};e.onStickerSelected=function(a,b){if(e.props.isEditing||e.refs.mentionsinput.hasEnteredText()){e.$79(a);return}e.sendSticker(a,b)};e.onStarsSelected=function(a,c){b("ExclamationStarsActions.react").flyoutStarsSelected(),e.setState({attachedStars:{gift:c,previewImageSrc:null,metadata:a,userTippedQuantity:a,matchingQuantity:0,promotionEvent:null,type:"SEND_STARS"}})};e.$52=function(){e.setState({markdownNUXVisible:!1})};e.$24=function(){e.setState({groupedInputNUXShown:!1})};e.$56=function(){var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",B).getURI();new(b("AsyncRequest"))().setURI(a).send();e.setState({privateCommentNUXVisible:!1})};e.$49=function(){e.setState({colorfulCommentsNUXShown:!1})};e.onGifSelected=function(a){if(e.props.isEditing||e.refs.mentionsinput.hasEnteredText()){e.$80({attachedGIF:a});e.preprocessGIF(a);return}e.sendGIF(a)};e.$72=function(a,b){e.setState(function(c){c[a]=b;return{mentionsData:c}},function(){e.props.contextArgs.messengerCommentPivotsParams&&e.props.contextArgs.messengerCommentPivotsParams.enabled&&e.$25()})};e.$1=!1;var f=e.props.editingComment,g=f.attachment,i=g?g.type:null,j=i==="photo"?g:null;e.state={attachedPhoto:f.photo_comment||j,attachedVideo:f.video_comment||null,attachedFile:f.file_comment||null,attachedSticker:i=="sticker"?g:null,attachedGIF:i=="gif"?g:null,attachedStars:i=="SEND_STARS"?g:null,colorfulCommentsNUXShown:!1,commentMarkdownPreviewContent:f.body?f.body.markup||null:null,commentMarkdownEnabled:f.body?f.body.markdown_enabled||!1:!1,currentThreadedFacecastCommentID:b("UFIThreadedFacecastCommentsStore").getCommentID(d.contextArgs.instanceid),addCommentNUXShown:e.props.contextArgs.permalinkAddCommentNuxShown||!1,commentPrivacy:f.privacy_value||e.props.replyCommentPrivacy||0,showConstituentBadgeV2OptIn:Boolean(e.props.showConstituentBadgeV2OptIn),constituentBannerState:String(e.props.constituentBanner),commentSuggestionsShowing:!1,exclamationStarsData:null,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:!1,fileInput:null,fileUploader:null,flyoutShown:!1,isCommenting:!1,isLoadingPhoto:!1,isLoadingFile:!1,isFocused:Boolean(e.props.isEditing),gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,markdownNUXVisible:!1,privateCommentNUXVisible:!1,hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0,inCommercialBreak:!1,showFailedMessageDialog:!1,showMessengerPivot:!1,shouldLoadFlexibleStars:!1,shouldSendAsMessage:!1,isSendingMessage:!1,hasAttachment:!1,mentionsData:{},currentMentionIds:[],currentMentionOffsets:[],selectedInsightPoint:null};j=e.state.attachedPhoto||e.state.attachedVideo||e.state.attachedFile||e.state.attachedGIF||e.state.attachedSticker||e.state.attachedStars;e.state.hasAttachment=!!j;b("Run").onLoad(function(){b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(){},"UFIAddComment.react")});return e}var f=d.prototype;f.$23=function(a){var b=this;this.setState(function(){var c=b.parseTextForMentions(a).map(function(a){return a.uid}),d=b.parseTextForMentions(a).map(function(a){return a.offset});return{currentMentionIds:c,currentMentionOffsets:d}},function(){b.$25()})};f.$25=function(){__p&&__p();var a=this;if(this.props.contextArgs.shareLinkConfig&&!this.$20()&&!this.props.isEditing){var b=this.state.currentMentionIds.length>=1,c=this.state.currentMentionOffsets.findIndex(function(a){return a===0})!==-1;if((!b||!c)&&this.state.showMessengerPivot)this.$26("pivot hidden"),this.setState({showMessengerPivot:!1});else if(b&&c){var d=!0;b=!1;c=this.state.currentMentionIds.length;for(var e=0;e<c;e++){var f=this.state.currentMentionIds[e];if(!this.state.mentionsData[f]){b=!0;break}else if(this.state.mentionsData[f]!=="user"){d=!1;break}}b||this.setState(function(b){if(d!==b.showMessengerPivot){a.$27();a.$26(b.showMessengerPivot?"pivot hidden":"pivot shown");return{showMessengerPivot:!b.showMessengerPivot}}return{}})}}};f.$29=function(a){__p&&__p();if(!this.$15||this.$15.length===a.length)return!1;var b,c;this.$15.length>a.length?(b=this.$15,c=a):(b=a,c=this.$15);a=null;var d=0;while(a===null&&d<c.length)c[d]!==b[d]&&(a=b[d]),d++;if(a===null)a=b[b.length-1];else{c=b[d];if(!/[a-zA-Z\-\']/.test(c))return!1}return!/[a-zA-Z\-\']/.test(a)};f.$22=function(a){__p&&__p();if(!this.$29(a)){this.$15=a;return}this.$15=a;var c=a.match(/[a-zA-z\-\']+/g);if(!c)return;var d=b("AccessibilityConfig").svTypicalDyslexiaMisspellings,e=!1;a=a.toUpperCase()===a;for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;if(a||h.toUpperCase()!==h){h=h.toLowerCase();d.includes(h)&&(e=!0)}}if(this.state.hasPotentialSuggestions===e)return;this.setState({hasPotentialSuggestions:e});e&&new(b("cr:1167833"))().setAction("badge_shown").setValue("true").log()};f.$37=function(){this.$2||(this.$2=this.props.viewerActorID+"_"+Date.now(),new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("focus").setFunnelTags(["depth_"+(this.$20()?"1":"0")]).markStart().log())};f.$38=function(){this.$2&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("commit").markEnd().log(),delete this.$2,this.$4=!1)};f.$27=function(){this.$3||(this.$3=""+Date.now(),new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Start").markStart().log())};f.$39=function(){this.$3&&(new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Commit").markEnd().log(),this.$3=null)};f.$26=function(a){this.$3&&new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction(a).log()};f.$43=function(a,c){__p&&__p();var d;this.setState({showMessengerPivot:!1});this.$26("comment posted");this.$39();a.encodedValue=a.encodedValue?a.encodedValue.trim():"";this.state.commentMarkdownEnabled?(a.isMarkdown=!0,this.setState({commentMarkdownEnabled:!1,commentMarkdownPreviewContent:null})):this.props.allowCommentMarkdown&&!a.isMarkdown&&(a.isMarkdown=b("textProbablyWritingMarkdown")(a.encodedValue));this.state.commentPrivacy&&(a.privacy_value=this.state.commentPrivacy);this.state.selectedInsightPoint&&(a.selectedInsightPoint=this.state.selectedInsightPoint);this.state.hasAttachment?(a.attachedPhoto=this.state.attachedPhoto,a.attachedVideo=this.state.attachedVideo,a.attachedFile=this.state.attachedFile,a.attachedSticker=this.state.attachedSticker,a.attachedStars=this.state.attachedStars,this.state.attachedGIF&&(this.state.attachedGIF.source?a.attachedShareURL=this.state.attachedGIF.source.url:this.state.attachedGIF.originalImageUrl&&(a.attachedShareURL=this.state.attachedGIF.originalImageUrl)),this.setState({isLoadingPhoto:!1,isLoadingFile:!1,attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedSticker:null,attachedGIF:null,attachedStars:null,hasAttachment:!1})):(a.attachedPhoto=null,a.attachedVideo=null,a.attachedFile=null,a.attachedSticker=null,a.attachedGIF=null,a.attachedShareURL=null,a.attachedStars=null);if(this.props.isEditing)this.context.dispatch(b("UFIAddCommentAction").submitEdit(this.props.contextArgs,this.props.editingComment,a,c.target));else if(this.state.attachedStars||!((d=this.state.exclamationStarsData)==null?void 0:d.isLoading)&&((d=this.state.exclamationStarsData)==null?void 0:d.isDetected)&&((d=this.state.exclamationStarsData)==null?void 0:d.errorMessage)==null)this.$44(a);else{var e;d=b("UFICommonInteractionLogger").makeTrackingID();b("UFICommonInteractionLogger").startInteraction((e=b("UFICommonInteractionEvents")).UFI_OPTIMISTIC_COMMENT,d+e.UFI_OPTIMISTIC_COMMENT);b("UFICommonInteractionLogger").startInteraction(e.UFI_PERSISTED_COMMENT,d+e.UFI_PERSISTED_COMMENT);a.trackingID=d;this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$20()))}this.$38();this.$45();return!0};f.$44=function(a){__p&&__p();var c=this,d,e=(d=this.state.attachedStars)==null?void 0:d.userTippedQuantity,f=o.NONE;if(((d=this.state.exclamationStarsData)==null?void 0:d.isDetected)&&!((d=this.state.exclamationStarsData)==null?void 0:d.isFlyoutStarsSelected)){f=o.SHORTCUT_TIPPING;e=(d=this.state.exclamationStarsData)==null?void 0:d.spendingUnits}var g=this.props.targetID,h=(d=this.state.attachedStars)==null?void 0:d.matchingQuantity,i=(d=this.state.attachedStars)==null?void 0:(d=d.promotionEvent)==null?void 0:d.id,j=(d=this.state.attachedStars)==null?void 0:(d=d.gift)==null?void 0:d.id;b("ExclamationStarsActions.react").exclamationStarsUndetected();b("ExclamationStarsActions.react").flyoutStarsUnselected();e&&g&&b("Bootloader").loadModules(["VideoStarsSpendMutationWebGraphQLMutation","WebGraphQL","FunnelLogger"],function(d,k,l){b("promiseDone")(k.exec(new d({input:{actor_id:b("CurrentUser").getAccountID(),client_mutation_id:b("uuid")(),comment:a.encodedValue,payee_id:g,platform:"FB",spending_units:e,matching_units:h,video_id:c.props.commentsTargetID,virtual_gift_id:j,wallet_promotion_id:i,wallet_type:"FB_STARS",spending_subtype:f}}),{actorID:c.props.viewerActorID,batchName:null}),function(a){b("ExclamationStarsActions.react").completeFetchBalance((a=a)!=null?(a=a.digital_content_wallet_spend)!=null?a.digital_content_wallet_balance:a:a);e!=null&&e>0&&new(b("FanFundingStarsEventsTypedLogger"))().setEvent("stars_send_successful").setContentID(c.props.commentsTargetID).setPageID(g).setStarsQuantity(e).setVirtualGiftID(j).log()},function(a){e!=null&&e>0&&new(b("FanFundingStarsEventsTypedLogger"))().setEvent("stars_send_unsuccessful").setContentID(c.props.commentsTargetID).setPageID(g).setStarsQuantity(e).setVirtualGiftID(j).log(),c.setState({isSendingMessage:!1,showFailedMessageDialog:!0})}),l.appendActionWithTag("FLEXIBLE_STARS_WWW_FUNNEL","sent_stars",e),l.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")},"UFIAddComment.react")};f.$42=function(a){__p&&__p();var c=this;this.$38();this.$26("begin message send");this.setState({isSendingMessage:!0});var d=b("Bootloader").loadModules(["FantaTabActions","MercurySourceType","XMessengerPivotsController","UFICommentPivotFailedDialog.react"],function(e,f,g,d){__p&&__p();f=g.getURIBuilder().setString("comment_body",a).setFBID("ft_ent_identifier",c.props.contextArgs.ftentidentifier).getURI();new(b("AsyncRequest"))(f).setHandler(function(d){var f=[{startIndex:0,changeCount:a.length,changeValue:""}];c.refs.mentionsinput.replaceText("",f);c.setState({showMessengerPivot:!1,isSendingMessage:!1});f=d.payload;f.id&&(f.isGroup?e.openTab(b("MercuryIDs").getThreadIDFromThreadFBID(f.id.toString())):e.openTab(b("MercuryIDs").getThreadIDFromUserID(f.id.toString())));c.$26("send succeeded");c.$39()}).setErrorHandler(function(a){c.setState({isSendingMessage:!1,showFailedMessageDialog:!0}),c.$26("send failed")}).send()},"UFIAddComment.react");this.$7.addSubscriptions(d);this.refs.mentionsinput.focus();return!1};f.$41=function(){return this.state.videoStatus===A.UPLOAD||this.state.videoStatus===A.ENCODE&&this.state.videoProgress!==100};f.$33=function(){this.$6&&this.$6.forEach(function(a){a.unsubscribe()})};f.UNSAFE_componentWillMount=function(){__p&&__p();var a=this;this.$5=!1;this.$9=b("LitestandStoryInsertionStatus").registerBlocker(function(){return a.state.isCommenting});this.$7&&this.$7.release();this.$7=new(b("SubscriptionsHandler"))();this.$7.addSubscriptions(b("UFICommercialBreakStore").addListener(function(){a.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a.props.contextArgs.instanceid)})}),b("ConstituentBadgeEventEmitter").addListener("ConstituentBadgeV2OptInModal",function(b){if(!b){a.setState({showConstituentBadgeV2OptIn:!1});return}a.setState({constituentBannerState:b.turn_off?null:a.props.constituentBanner,showConstituentBadgeV2OptIn:!1})}));this.props.allowLiveVideoCommentReplyMode&&(this.props.contextArgs.islivestreaming||this.props.contextArgs.isLiveVOD||this.props.contextArgs.isLivingRoomWithReplies)&&this.$7.addSubscriptions(b("UFIThreadedFacecastCommentsStore").addListener(function(){var c=a.state.currentThreadedFacecastCommentID,d=b("UFIThreadedFacecastCommentsStore").getCommentID(a.props.contextArgs.instanceid);a.setState({currentThreadedFacecastCommentID:d});d!==c&&a.focus()}));this.$8=null;b("UFIConfig").canPublishLive&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var c=b("UFIComposerIsTypingStore").getValueFor(a.props.contextArgs.ftentidentifier);if(c===null)return;b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(b){a.$8||(a.$8=new b(a.props.contextArgs.ftentidentifier,a.$20(),a.props.viewerActorID)),c?a.$8.attemptPublishStartEvent():a.$8.attemptPublishStopEvent()},"UFIAddComment.react")}));this.props.allowTogglePrivateComments&&(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var c=a.props.contextArgs.ftentidentifier;b("UFIComposerIsTypingStore").getValueFor(c)&&p.logViewerInteracted(c)}))};f.$46=function(){this.$8&&this.$8.destroy(),this.$8=null};f.UNSAFE_componentWillReceiveProps=function(a){var b=this.props.contextArgs.ftentidentifier,c=a.contextArgs.ftentidentifier;(c!==b||this.props.replyCommentID!==a.replyCommentID||this.props.viewerActorID!==a.viewerActorID)&&this.$46()};f.componentWillUnmount=function(){__p&&__p();var a=this;b("Bootloader").loadModules(["TextDelightInComposerLogger"],function(b){b.endFunnel(a.$20()||a.props.contextArgs.ftentidentifier)},"UFIAddComment.react");this.$1=!1;this.$33();this.$11&&b("Arbiter").unsubscribe(this.$11);this.$10&&b("Arbiter").unsubscribe(this.$10);this.$12&&b("Arbiter").unsubscribe(this.$12);this.$13&&b("Arbiter").unsubscribe(this.$13);this.$14&&b("Arbiter").unsubscribe(this.$14);this.$9&&this.$9.unsubscribe();this.$9=null;this.$7&&this.$7.release();this.$46()};f.$48=function(){var a=this;if(!this.state.colorfulCommentsNUXShown)b("IdentityBadgeUtils").isEligibleForColorComments(this.props.feedback,this.props.contextArgs)&&b("gkx")("900398")&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(b,c){b.hasUserSeenMessage(c.GAMES_COLORFUL_COMMENTS)||(a.setState({colorfulCommentsNUXShown:!0}),b.markMessageSeenByUser(c.GAMES_COLORFUL_COMMENTS))},"UFIAddComment.react");else return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),contextRef:function(){return a.refs.mentionsinput},shown:this.state.colorfulCommentsNUXShown,position:"above",width:"auto",alignment:"center",onCloseButtonClick:this.$49,children:h._("Los comentarios de las personas que tengan insignias de fan destacado, colaborador y cara conocida se resaltar\u00e1n durante unos segundos.")});return null};f.$50=function(){var a=this;return this.state.gifsInCommentsNUXVisible&&this.refs.gif_button?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),contextRef:function(){return a.refs.gif_button},shown:this.state.gifsInCommentsNUXVisible,position:"above",width:"auto",alignment:"right",children:h._("Ahora puedes agregar GIF a los comentarios")}):null};f.$51=function(){var a=this;return this.state.markdownNUXVisible?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),contextRef:function(){return a.refs.markdownButton},shown:this.state.markdownNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$52,children:h._("[FB-Only] Markdown in Comments! Click to enable.")}):null};f.$53=function(){var a=this;return this.state.groupedInputNUXShown?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),contextRef:function(){return a.refs.groupedInputButton},shown:this.state.groupedInputNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$24,children:h._("Publica stickers, emojis y GIF")}):null};f.$54=function(){var a=this;return this.state.addCommentNUXShown?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FBAmbientPulseNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),contextRef:function(){return a.refs.mentionsinput},dialogShown:!1,position:"left",shown:this.state.addCommentNUXShown}):null};f.$55=function(){var a=this;if(this.state.privateCommentNUXVisible){var c;return(c=b("React")).jsxs(b("BootloadedComponent.react"),{alignment:"right",bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:c.jsx("div",{}),contextRef:function(){return a.refs.privacy_icon},onCloseButtonClick:this.$56,position:"above",shown:this.state.privateCommentNUXVisible,width:"auto",children:[c.jsx(b("XUIText.react"),{display:"block",weight:"bold",children:h._("Comentar en privado")}),c.jsx(b("XUIText.react"),{display:"block",children:h._("Agrega un comentario que solo ver\u00e1 {user}",[h._param("user",this.props.privateCommentTarget)])})]})}return null};f.render=function(){__p&&__p();var a=this,c=this.props.contextArgs.loggedOutLinkConfig,d=!0;c&&c.showAddComment&&(d=!1);c=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&d&&!this.props.contextArgs.hideActorPhoto;var f=null;if(this.props.subtitle)f=b("React").jsx("span",{className:t,children:this.props.subtitle});else if(!this.state.isFocused&&this.props.isEditing)f=b("React").jsx("span",{className:t,children:h._("{cancel}",[h._param("cancel",b("React").jsx(b("Link.react"),{onClick:function(){return a.context.dispatch(b("UFIAddCommentAction").cancel(a.props.contextArgs))},children:h._("Cancelar")}))])});else if(this.props.isEditing)f=b("React").jsx("span",{className:t,children:h._("Presiona Esc para {cancel}.",[h._param("cancel",b("React").jsx(b("Link.react"),{onMouseDown:function(){return a.context.dispatch(b("UFIAddCommentAction").cancel(a.props.contextArgs))},children:h._("cancelar")}))])});else if(this.props.peopleOutsideCommunityInCommentNotice&&this.state.isFocused){var g;f=(g=b("React")).jsxs("div",{className:"fcg fsm _2pid",children:[g.jsx(b("Badge.react"),{type:"work_non_coworker"},"noncoworker"),g.jsx("span",{className:"_2pir _4zk5",children:g.jsx(b("TextWithEntities.react"),{ranges:this.props.peopleOutsideCommunityInCommentNotice.ranges,text:this.props.peopleOutsideCommunityInCommentNotice.text})})]})}else this.props.showSendOnEnterTip&&!this.props.contextArgs.isTahoeUFI&&!this.props.contextArgs.isActiveLivingRoom&&(f=b("React").jsx("span",{className:t,children:h._("Presiona \"Enter\" para publicar.")}));g=null;var m=null,n=null,o=null,p=null,q=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedFile||this.state.attachedGIF||this.state.attachedStars,v=null,w=null,x=null,y=null,z=null,B=b("cr:682211")?b("React").jsx(b("cr:682211"),{ref:"groupedInputButton",allowGifAttachments:!!this.props.allowGifAttachments,allowStickerAttachments:!!this.props.allowStickerAttachments,customStickerOwnerID:this.props.targetID,flyoutShown:this.state.flyoutShown,onEmojiSelect:this.$58,onGifSelect:this.$59,onLinkClick:this.$60,onStickerSelect:this.$61,toggleFlyout:this.$62}):null,C=b("React").jsx(k,{environment:b("RelayFBEnvironment"),query:i!==void 0?i:i=b("UFIAddCommentIsShoppingVideoQuery.graphql"),variables:{videoID:this.props.contextArgs.ftentidentifier},render:function(c){var d;c=c.props;return(c==null?void 0:(d=c.video)==null?void 0:d.is_shopping_video)&&(c==null?void 0:(d=c.video)==null?void 0:(c=d.product_tags)==null?void 0:c.length)>0?b("React").jsx(b("UFILiveShoppingFeaturedProductsButton.react"),{buttonClassName:"_r1a",onClick:function(){return a.markViewerHasInteracted()},onSelect:function(){},videoID:a.props.contextArgs.ftentidentifier}):null}}),E=b("cr:682211")?null:b("React").jsx(b("EmojiInputButton.react"),{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){return a.markViewerHasInteracted()},onSelect:function(b){a.refs.mentionsinput.insertEmoji(b)}});this.props.allowCommentMarkdown&&(o=b("React").jsx(b("UFIMarkdownButton.react"),{active:this.state.commentMarkdownEnabled,ref:"markdownButton",onClick:function(){var b=!a.state.commentMarkdownEnabled;a.setState({commentMarkdownEnabled:b});a.refs.mentionsinput&&b&&a.$21(a.refs.mentionsinput.getText())}}));!b("cr:682211")&&this.props.allowStickerAttachments&&!q&&(m=b("React").jsx(b("UFIStickerButton.react"),{ref:"sticker_button",customStickerOwnerID:this.props.targetID,onStickerSelected:this.onStickerSelected,onStickerFlyoutShow:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),a.markViewerHasInteracted()}}));!b("cr:682211")&&this.props.allowGifAttachments&&!q&&(n=b("React").jsx(b("UFIGifButton.react"),{ref:"gif_button",onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){return a.markViewerHasInteracted()},defaultGifSelection:this.props.contextArgs.defaultGifQuery}));if(this.props.allowNativeTipJar&&this.props.tipJarModule&&!this.props.allowFlexibleTipping){var F=this.props.tipJarModule;x=b("React").jsx(F,{showNux:!0,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID})}if(this.props.allowFlexibleTipping&&this.props.flexibleStarsModule&&(!q||this.state.attachedStars)){F=this.props.flexibleStarsModule;y=b("React").jsx(F,{actorID:this.props.viewerActorID,canShowNux:!0,feedbackID:(F=this.props.feedback)==null?void 0:F.entidentifier,mentionsinputRef:this.refs.mentionsinput,onStarsSelected:this.onStarsSelected,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID});this.setState({shouldLoadFlexibleStars:!0})}this.props.allowCommentFixSuggestions&&(z=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsButton.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("span",{}),active:this.state.commentSuggestionsShowing,badged:this.state.hasPotentialSuggestions,ref:"fixSuggestionsButton",onClick:function(){var c=!a.state.commentSuggestionsShowing;a.setState({commentSuggestionsShowing:c});c&&(a.$16=a.refs.mentionsinput.getText(),a.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0}));new(b("cr:1167833"))().setAction("icon_clicked").setValue(c?"show":"hide").log()}}));(this.props.allowPhotoAttachments||this.props.allowVideoAttachments||this.props.allowFileAttachments)&&(v=this.$31,g=b("React").jsx(b("UFIAttachMediaSection.react"),{ref:"media_section",getPhotoUploadData:this.$32,getFileUploadData:this.$63,prepareForAttachedPhotoPreview:this.$34,prepareForAttachedVideoPreview:this.$64,prepareForAttachedFilePreview:this.$65,allowVideoAttachments:this.props.allowVideoAttachments,allowFileAttachments:this.props.allowFileAttachments,onPhotoUploadComplete:this.$36,onFileUploadComplete:this.$66,onVideoUploadComplete:this.$67,onVideoEncodeUpdate:this.$68,onVideoUploadUpdate:this.$69,setFileInput:this.$57,targetId:this.props.targetID,onClick:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),a.markViewerHasInteracted()},attachment:q,viewerActorID:this.props.viewerActorID}));F=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.ADD_COMMENT_BOX);q="addComment_"+this.props.contextArgs.ftentidentifier;var G;this.$20()?G=this.props.contextArgs.replyPlaceholderText||s:this.props.contextArgs.placeholderText?G=this.props.contextArgs.placeholderText:this.props.contextArgs.isActiveLivingRoom?G=u:G=r;var H=this.props.contextArgs.viewoptionstypeobjects,I=this.props.contextArgs.viewoptionstypeobjectsorder;this.props.attachedPhoto&&!this.props.subtitle&&(f=null);var J;(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===A.UPLOAD||this.state.attachedFile||this.state.isLoadingFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars)&&(J=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAttachedMediaPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("span",{}),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedFile:this.state.attachedFile,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,attachedStars:this.state.attachedStars,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this.$35,onRemoveAttachedStarsPreview:this.$70,onRemoveAttachedStickerPreview:this.$71,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,isLoadingFile:this.state.isLoadingFile,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF}));var K=this.props.contextArgs.mentionsinput,L=null,M=null,N=null;K&&(L=K.inputComponent,M=K.viewComponent,N=K.viewProps);K=this.props.editingComment.body;K=K?b("MentionsInputUtils").generateDataFromTextWithEntities(K):null;var O=null;this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled&&(O=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMarkdownPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("span",{}),markup:this.state.commentMarkdownPreviewContent}));var P=null;this.props.allowCommentFixSuggestions&&this.state.commentSuggestionsShowing&&(P=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsDetails.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx(b("XUISpinner.react"),{}),hasStaleSuggestions:this.state.hasStaleSuggestions,isInitialCheck:this.state.isInitialSuggestionCheck,onAccept:function(c,d){if(c){var e=a.refs.mentionsinput;e.replaceText(c,d)}a.setState({commentSuggestionsShowing:!1});new(b("cr:1167833"))().setAction("action_clicked").setValue("accept").log()},onCancel:function(){a.setState({commentSuggestionsShowing:!1}),new(b("cr:1167833"))().setAction("action_clicked").setValue("ignore").log()},onRefresh:function(){a.$16=a.refs.mentionsinput.getText(),a.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!1}),new(b("cr:1167833"))().setAction("action_clicked").setValue("refresh").log()},userText:this.$16}));L=L?b("React").jsx(L,{disableInitTextarea:!d,replyCommentID:this.$20(),initialData:K,placeholder:G,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:M,viewProps:N,viewOptionsTypeObjects:H,viewOptionsTypeObjectsOrder:I,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this.$40,onDummyFocus:this.$47,onFocus:this.focus,onBlur:this.$30,onContentChange:this.$19,onPaste:v,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI,isTahoeUFI:this.props.contextArgs.isTahoeUFI,isLivingRoom:this.props.contextArgs.isActiveLivingRoom,isStreamerHub:this.props.contextArgs.isStreamerHub,showMessengerPivot:this.state.showMessengerPivot&&!this.state.hasAttachment,updateMentionsData:this.$72}):null;d=this.state.showMessengerPivot&&!this.state.hasAttachment?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{className:"_6fr-"}),children:b("React").jsx(D,{contextArgs:this.props.contextArgs,isActive:this.state.shouldSendAsMessage,isSending:this.state.isSendingMessage,onClick:this.handleMessengerPivotClick})}):null;K=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_composer_rounded_borders;G=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_glyphs;M=l&&this.props.allowBotMentions&&this.props.groupID?b("React").jsx(l,{groupID:this.props.groupID,onSelect:function(b){return a.insertMention(b)}}):null;N=this.state.selectedInsightPoint&&b("React").jsx(b("UFIInsightsSharingCommentTag.react"),{showMiddot:!1,formattedValue:this.state.selectedInsightPoint.formattedValue});H=b("React").jsxs("div",{className:"UFICommentContainer",children:[b("React").jsxs("div",{className:"_fmi"+(K?" _613v":"")+" UFIInputContainer"+(b("PrivateCommentsConfig").dark_composer_theme_enabled&&this.state.commentPrivacy===1?" UFIPrivateCommentDarkTheme":""),children:[N,d,L,b("React").jsxs("div",{className:"_fmk"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fry":"")+" UFICommentAttachmentButtons _5op2"+(G?" _15i7":"")+(G?" _2kwm":""),children:[G?this.$73():null,z,C,M,p,E,o,g,n,m,B,w,x,y]})]}),O,P,J,f]});var Q={};if(c){var R=this.props.contextArgs.livingRoomID;this.props.contextArgs.isLivingRoom==!0&&R!=null&&b("Bootloader").loadModules(["LivingRoomActions","LivingRoomLoggerAction","LivingRoomStoreInitializer","LivingRoomTypedLogger","UFICentralUpdates"],function(a,c,d,e,f){f.subscribe("actor-changed",function(c,e){a.setAddVideoDialogTab(R,j.SEARCH),a.updatePresentUsers(R,b("immutable").List()),b("gkx")("1208662")||a.updatePresentUserCount(R,0),a.close(R),d.initialize(R,e.actorID,"UFI_VOICE_ACTOR_CHANGE","UFIAddComment")}),Q.onActorChange=function(a,b){new e().setLivingRoomID(R).setLivingRoomAction(c.VOICE_SELECTOR_ACTOR_CHANGE).updateExtraData({oldActorID:a,newActorID:b}).log()}},"UFIAddComment.react");H=b("React").jsxs(b("UFIImageBlock.react"),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?" UFIStickersEnabledInput":"")+(this.props.allowCommentMarkdown?" UFIMarkdownEnabledInput":"")+(this.props.allowGifAttachments?" UFIGifEnabledInput":"")+(this.props.allowNativeTipJar?" UFITipJarEnabledInput":"")+(this.props.allowFlexibleTipping?" UFIFlexibleStarsEnabledInput":""),children:[b("React").jsx("div",{className:"UFIReplyActorPhotoWrapper"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fr_":""),onClick:this.focus,role:"presentation",children:b("React").jsx(b("UFIActorIconContainer.react"),babelHelpers["extends"]({},Q,{actorID:this.props.viewerActorID,actorSelectorConfig:this.props.contextArgs.actorSelectorConfig,isLivingRoom:this.props.contextArgs.isLivingRoom,overlayActorSelectorOnUFIPhoto:this.props.contextArgs.overlayActorSelectorOnUFIPhoto}))}),H]})}I=b("React").jsxs("div",{ref:function(b){return a.rootNode=b},id:q,className:b("joinClasses")("UFIRow _4oep UFIAddComment"+(this.props.allowPhotoAttachments?" UFIAddCommentWithPhotoAttacher":"")+(this.props.withoutSeparator?" UFIAddCommentWithoutSeparator":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.state.inCommercialBreak?" hidden_elem":""),this.props.className),onKeyDown:this.$17,"data-ft":F,children:[this.$74(),this.$75(),this.$76(),H,this.$50(),this.$51(),this.$53(),this.$54(),this.$48(),this.$77()]});v=b("ifRequired")("LiveVideoQuickComments.react",function(a){return a});K=this.props.contextArgs.liveVideoQuickCommentsConfig!=null&&(!this.props.contextArgs.shouldSyncQuickCommentVisibilityWithPinnedComment||this.props.isLivePinnedCommentVisible===!0)&&v!=null?b("React").jsx(v,{contextArgs:this.props.contextArgs,videoID:this.props.contextArgs.liveVideoQuickCommentsConfig.videoID,modes:this.props.contextArgs.liveVideoQuickCommentsConfig.modes}):null;return K?b("React").jsxs("div",{children:[K,I]}):I};f.componentDidUpdate=function(a,b){if(!b.attachedPhoto&&this.state.attachedPhoto||!b.attachedSticker&&this.state.attachedSticker||!b.attachedVideo&&this.state.attachedVideo||!b.attachedFile&&this.state.attachedFile||!b.attachedGIF&&this.state.attachedGIF||!b.attachedStars&&this.state.attachedStars||!b.isCommenting&&this.state.isCommenting){var c=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars;this.setState({hasAttachment:!!c});this.refs.mentionsinput.focus()}a.viewerActorID!==this.props.viewerActorID&&(this.state.fileInput&&this.state.fileInput.clear(),this.state.fileUploader&&this.state.fileUploader.setData(this.$32()),this.$35());!b.shouldLoadFlexibleStars&&this.state.shouldLoadFlexibleStars&&this.$78()};f.componentDidMount=function(){__p&&__p();var a=this;this.$1=!0;if(this.props.contextArgs.source===1){var c=this.props.replyCommentID!=null;c?b("UFIODSLogger").bump("composer.newsfeed.replies.componentDidMount","legacy"):b("UFIODSLogger").bump("composer.newsfeed.toplevel.componentDidMount","legacy")}this.$21=b("throttle")(this.$21,y,this);this.$12=b("Arbiter").subscribe("UFIComment/insertComposerPayload/"+this.props.contextArgs.ftentidentifier,function(b,c){if(!c||c.instanceid!==void 0&&c.instanceid!==a.props.contextArgs.instanceid||!a.props.isTopLevelComposer)return;a.focus();c.mention!==void 0&&a.insertMention(c.mention);c.emojitext!==void 0&&a.insertEmojiText(c.emojitext);c.stickerid!==void 0&&a.$79(c.stickerid)});this.$13=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/selectGif",function(b,c){if(!c||a.$20())return;a.focus();a.$80({attachedGIF:c.gif});a.preprocessGIF(c.gif)});this.$14=b("Arbiter").subscribe("InsightsComments/"+this.props.contextArgs.ftentidentifier+"/selectedInsightsPoint/",function(c,d){if(!d)return;a.setState({selectedInsightPoint:d.selectedInsightPoint});c=b("ReactDOM").findDOMNode(a.refs.mentionsinput);c!==null&&d.selectedInsightPoint&&c instanceof Element&&b("DOMScroll").ensureVisible(c,null,null,null,function(){window.setTimeout(function(){return a.refs.mentionsinput.focus()})})});b("ExclamationStarsDispatcher.react").explicitlyRegisterStores([b("ExclamationStarsStore.react")]);this.state.shouldLoadFlexibleStars&&this.$78();if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments&&!this.props.allowFileAttachments)return;this.$20()===null&&(this.$10=b("Arbiter").subscribe("focusCommentField"+this.props.contextArgs.ftentidentifier,function(b){a.refs.mentionsinput.focus()}),this.props.contextArgs.issnowlift&&(this.$11=b("Arbiter").subscribe("newRemixedImage"+this.props.contextArgs.ftentidentifier,function(b,c){b={clipboardData:{items:[c]}};a.$31(b)})))};f.$75=function(){return this.state.constituentBannerState&&!this.$20()?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentingAsConstituentHeader.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").jsx("div",{}),uri:this.props.constituentBanner}):null};f.$74=function(){var a=this.props,c=a.contextArgs;a=a.isTopLevelComposer;var d=c.conversationGuideParams;d=d?d.trackingID:null;return a&&b("cr:719006")?b("React").jsx(b("cr:719006"),{position:"above",trackingID:d,contextArgs:c,ufiContextDispatch:this.context.dispatch,isComposerFocused:this.state.isFocused}):null};f.$73=function(){var a=this,c=this.props.isEditing&&this.props.editingComment.privacy_value===1,d=this.$20()&&this.props.replyCommentPrivacy===1,e=!c&&!d&&this.props.allowTogglePrivateComments;if(!c&&!d&&!this.props.allowTogglePrivateComments||!(e?b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled:b("PrivateCommentsConfig").reply_composer_lock_enabled))return null;e?(b("Bootloader").loadModules(["PrivateCommentsLogger"],function(b){return b.startFunnel(a.props.contextArgs.ftentidentifier)},"UFIAddComment.react"),c=h._("Activar o desactivar privacidad")):d?c=h._("Only you and {user} will be able to see your reply",[h._param("user",this.props.privateCommentTarget)]):c=h._("Solo t\u00fa y {user} pueden ver esto",[h._param("user",this.props.privateCommentTarget)]);return b("React").jsxs(b("Link.react"),{"aria-label":c,className:"_r1a UFICommentPrivacyButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":c,onClick:function(){a.markViewerHasInteracted(),e&&(p.logToggle(a.state.commentPrivacy===0,a.props.contextArgs.ftentidentifier),a.setState(function(a){return{commentPrivacy:a.commentPrivacy===1?0:1}}))},role:"button",children:[b("React").jsx("div",{ref:"privacy_icon",className:"UFICommentPrivacyIcon"+(b("PrivateCommentsConfig").composer_unlocked_lock_enabled?" UFICommentPrivacyIconVariant":"")+(!e||this.state.commentPrivacy===1?" UFICommentPrivacyIconActive":"")}),e?this.$55():null]})};f.$76=function(){return this.props.isEditing||this.state.commentPrivacy!==1||!b("PrivateCommentsConfig").privacy_text_above_composer_enabled?null:this.$20()?b("React").jsx("div",{className:"_2tpi",children:h._("Replying privately to {=[user]}",[h._param("=[user]",b("React").jsx("strong",{children:h._("{user}",[h._param("user",this.props.privateCommentTarget)])}))])}):b("React").jsx("div",{className:"_2tpi",children:h._("Solo t\u00fa y {=[user]} pueden ver esto",[h._param("=[user]",b("React").jsx("strong",{children:h._("{user}",[h._param("user",this.props.privateCommentTarget)])}))])})};f.$77=function(){var a=this;if(this.state.showFailedMessageDialog){var c;return(c=b("React")).jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(E,{contextArgs:this.props.contextArgs,onHide:function(){a.setState({showFailedMessageDialog:!1}),a.refs.mentionsinput.focus()},showFailedDialog:this.state.showFailedMessageDialog})})}return null};f.insertMention=function(a){var b=this;this.refs.mentionsinput&&this.refs.mentionsinput.insertMention&&(this.refs.mentionsinput.insertMention(a),window.setTimeout(function(){return b.refs.mentionsinput.focus()}))};f.insertEmojiText=function(a){this.refs.mentionsinput.getText().trim()===""?this.refs.mentionsinput.insertEmoticon(a.trim()+" "):this.refs.mentionsinput.insertEmoticon(a)};f.$81=function(a){return a==="finish"};f.$82=function(){this.state.fileInput&&this.state.fileInput.clear()};f.$80=function(a){if(!b("CurrentUser").isWorkUser())this.setState(a);else{var c={attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedSticker:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1};this.setState(babelHelpers["extends"]({},c,a))}};f.$79=function(a){this.setState({attachedSticker:null,isLoadingPhoto:!0}),new(b("AsyncRequest"))(x).setData({sticker_id:a}).setErrorHandler(this.$71).setHandler(this.$83).send()};f.sendSticker=function(a,c){a={encodedValue:"",visibleValue:"",attachedPhoto:null,attachedSticker:{fbid:a},privacy_value:this.state.commentPrivacy};this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$20()))};f.isPromotionMatchingEnabled=function(a){return a!=null&&a.isEnabled&&a.type==="SPEND_MATCH"};f.$45=function(){this.setState({addCommentNUXShown:!1})};f.preprocessGIF=function(a){var c=b("XUFICommentGIFPreprocessController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setData({gif_url:a.source.url}).send()};f.sendGIF=function(a){a={encodedValue:"",visibleValue:"",attachedShareURL:a.source.url,privacy_value:this.state.commentPrivacy};this.rootNode&&this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,this.rootNode,this.$20()))};f.parseTextForMentions=function(a){var b=[],c;while(c=C.exec(a)){c={uid:c[1],text:c[2],offset:c.index,length:c[2].length,weakreference:!1,entity:{uid:c[1],weakreference:!1}};b.push(c);C.lastIndex=c.offset+c.length}return b};f.markViewerHasInteracted=function(){this.props.markViewerHasInteracted&&this.props.markViewerHasInteracted()};f.$20=function(){return this.props.replyCommentID||this.state.currentThreadedFacecastCommentID};d.getStores=function(){return[b("ExclamationStarsStore.react")]};d.calculateState=function(a){var c;a=babelHelpers["extends"]({},a);a.exclamationStarsData={isDetected:(c=b("ExclamationStarsStore.react")).isExclamationStarsDetected(),isLoading:c.isLoading(),spendingUnits:c.getSpendingUnits(),errorMessage:c.getErrorMessage(),isFlyoutStarsSelected:c.isFlyoutStarsSelected()};return a};f.$84=function(){var a=this;b("ExclamationStarsActions.react").startFetchBalance();b("Bootloader").loadModules(["VideoStarsWalletQueryWebGraphQLQuery","WebGraphQL"],function(c,d){b("promiseDone")(d.exec(new c({})),function(a){b("ExclamationStarsActions.react").completeFetchBalance((a=a)!=null?(a=a.viewer)!=null?(a=a.digital_content_wallet)!=null?a.digital_content_wallet_balance:a:a:a)},function(c){b("ExclamationStarsActions.react").handleTransactionError(a.props.targetID)})},"UFIAddComment.react")};f.$78=function(){__p&&__p();var a=this,c=this.props.targetID;c&&this.props.allowShortcutTipping&&(b("ExclamationStarsActions.react").enableExclamationStars(),b("Bootloader").loadModules(["GameTippingCustomTipMetaDataQueryWebGraphQLQuery","WebGraphQL","nullthrows"],function(d,e,f){b("promiseDone")(e.exec(new d({input:{page_id:c}})),function(a){a=(a=a)!=null?a.game_tipping_custom_tip_meta_data:a;if(a){a=a.map(function(a){var b;return{min:f((b=a)!=null?b.min:b),max:f((b=a)!=null?b.max:b),color:f((b=a)!=null?b.main_color:b)}});b("ExclamationStarsActions.react").completeFetchExclamationStarsMetadata(a,a[0].min)}},function(c){b("ExclamationStarsActions.react").handleTransactionError(a.props.targetID)}),a.$84()},"UFIAddComment.react"))};return d}(b("React").Component);c.contextTypes={dispatch:b("prop-types").func};e.exports=b("FluxContainer").create(c)}),null);
__d("UFIAddReactionButton.react",["ix","cx","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsxs("div",{className:"_6fy0",children:[b("React").jsx("span",{className:"_6fva",children:"+"}),b("React").jsx(b("Image.react"),{src:g("601195")})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("XUICircleDotsButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.className,d=a.label;a=a.tooltip;var e=this.props.title;!this.props.title&&!a&&(e=d);return b("React").jsx(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{label:d,title:e,"data-hover":a&&"tooltip","data-tooltip-alignh":a&&"center","data-tooltip-content":a,className:b("joinClasses")(c,"_6eib")}))};return c}(b("React").Component);a.defaultProps={label:h._("Administrar")};e.exports=a}),null);
__d("XUIEditButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.label,c=this.props.title;!this.props.title&&!this.props.tooltip&&(c=a);return b("React").jsx(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{label:a,title:c,"data-hover":this.props.tooltip&&"tooltip","data-tooltip-alignh":this.props.tooltip&&"center","data-tooltip-content":this.props.tooltip,className:b("joinClasses")(this.props.className,"_5upq _5upr")}))};return c}(b("React").Component);a.defaultProps={label:h._("Editar")};e.exports=a}),null);
__d("UFICommentMenu.react",["ix","cx","AuthorPinnedCommentLogger","Bootloader","Image.react","React","XUICircleDotsButton.react","XUICloseButton.react","XUIDotsButton.react","XUIEditButton.react","fbglyph","joinClasses","keyMirror","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m,n=b("keyMirror")({EDIT:!0,CLOSE:!0,CHEVRON:!0,DOTS:!0,TOOLTIP:!0});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bootloading:!1,bootloaded:!1,needsExpand:!1},d.onClickGuard=function(a){if(d.state.bootloading)return;else!d.state.bootloaded&&d.props.menuData&&(d.setState({bootloading:!0}),b("Bootloader").loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu","XUIMenuSeparator.react"],function(a,b,c,d){i=a,j=b,k=c,l=c.Item,m=d,this.setState({bootloading:!1,bootloaded:!0,needsExpand:!0})}.bind(babelHelpers.assertThisInitialized(d)),"UFICommentMenu.react"));d.props.onClick&&d.props.onClick(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a,b){return this.state.needsExpand&&!b.needsExpand?!1:!0};d.componentDidUpdate=function(){this.state.needsExpand&&(this.refs.menu.showPopover(),this.props.onMenuShown&&this.props.onMenuShown(),this.setState({needsExpand:!1}))};d.$1=function(){switch(this.props.menuType){case n.EDIT:return b("XUIEditButton.react");case n.CLOSE:return b("XUICloseButton.react");case n.DOTS:return this.props.showRedesign?b("XUICircleDotsButton.react"):b("XUIDotsButton.react");case n.TOOLTIP:return o;case n.CHEVRON:default:return p}};d.$2=function(a){var c=this;return a.map(function(a){var d=c.$3(a.value),e=c.props.commentID||"";a.testid==="ufi_comment_menu_pin_by_author"?b("AuthorPinnedCommentLogger").logPinButtonShown(e.toString()):a.testid==="ufi_comment_menu_unpin_by_author"&&b("AuthorPinnedCommentLogger").logUnpinButtonShown(e.toString());return b("React").jsxs(l,{className:"_6mdw","data-testid":a.testid,value:a.value,children:[d,a.label]},a.value)})};d.$3=function(a){__p&&__p();switch(a){case"edit":return b("React").jsx("div",{className:"_6mdx _6mdy"});case"hide":return b("React").jsx("div",{className:"_6mdx _6mdz"});case"remove":return b("React").jsx("div",{className:"_6mdx _6md_"});case"delete_and_block":return b("React").jsx("div",{className:"_6mdx _6me0"});case"delete_comment_with_feedback":return b("React").jsx("div",{className:"_6mdx _7dg3"});case"delete_comment_and_remove_commenter":return b("React").jsx("div",{className:"_6mdx _6me1"});case"mute_member":return b("React").jsx("div",{className:"_6mdx _6me2"});case"hide_text_delights":return b("React").jsx("div",{className:"_6mdx _6me3"});case"pin_by_author":return b("React").jsx("div",{className:"_6mdx _6me4"});case"unpin_by_author":return b("React").jsx("div",{className:"_6mdx _6mea"});case"live_video_pin":return b("React").jsx("div",{className:"_6mdx _6meb"});case"live_video_unpin":return b("React").jsx("div",{className:"_6mdx _6mec"});case"view_edit_history":return b("React").jsx("div",{className:"_6mdx _6med"});case"report_to_moderator":return b("React").jsx("div",{className:"_6mdx _8og8"});case"community_moderated_delete":return b("React").jsx("div",{className:"_6mdx _8p6n"});case"mute":return b("React").jsx("div",{className:"_6mdx _8p6o"});case"stream_ban":return b("React").jsx("div",{className:"_6mdx _8p6p"});case"page_ban":return b("React").jsx("div",{className:"_6mdx _8p6q"});default:return null}};d.render=function(){var a=this.$1();if(this.state.bootloaded){var c=[];this.props.menuData&&c.push.apply(c,this.$2(this.props.menuData));this.props.menuUserSection&&(c&&c.push(b("React").jsx(m,{},"xui_separator")),c.push.apply(c,this.$2(this.props.menuUserSection)));c=b("React").jsx(k,{onItemClick:this.props.onAction,children:c});return b("React").jsx(j,babelHelpers["extends"]({},this.props,{alignh:"right",position:this.props.popoverMenuPosition,layerBehaviors:[i],menu:c,ref:"menu",onShow:this.props.onPopoverMenuShow,onHide:this.props.onPopoverMenuHide,children:b("React").jsx(a,babelHelpers["extends"]({},this.props,{href:"#",onClick:this.onClickGuard}))}))}else return b("React").jsx(a,babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_1-be"+(this.props.showPinnedCommentNux?" UFICommentCloseButtonNux":"")),href:"#",onClick:this.onClickGuard}))};return c}(b("React").Component);a.MenuType=n;a.propTypes={menuData:(c=b("prop-types")).array,menuUserSection:c.array,menuType:c.oneOf(Object.keys(n)).isRequired,onAction:c.func,onClick:c.func,onMenuShown:c.func,commentID:c.string,position:c.oneOf(["above","below","left","right"])};var o=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return b("React").jsx("a",babelHelpers["extends"]({},this.props,{children:b("React").jsx(b("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:g("126426"),"data-tooltip-alignh":"center"})}))};return a}(b("React").Component),p=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return b("React").jsx("a",babelHelpers["extends"]({},this.props,{children:b("React").jsx(b("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:g("125792")})}))};return a}(b("React").Component);e.exports=a}),null);
__d("UFIContainer.react",["cx","PrivateCommentsConfig","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("div",{className:(this.props.isReplyList?"":"UFIList")+(b("PrivateCommentsConfig").dark_comment_theme_enabled&&this.props.isPrivateComment?" UFIPrivateCommentDarkTheme":"")+(this.props.isReplyList?" UFIReplyList":"")+(this.props.inReviewView?" UFIWhiteReplyList":"")+(this.props.isParentLiveDeleted?" UFITranslucentReplyList":"")+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.shouldHide?" hidden_elem":""),children:this.props.children})};return c}(b("React").Component);e.exports=a}),null);
__d("UFIDispatcherContext.react",["React","prop-types"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getChildContext=function(){return{dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}};c.render=function(){return this.props.children};return b}(b("React").Component);a.childContextTypes={dispatch:b("prop-types").func,stores:b("prop-types").object};e.exports=a}),null);
__d("UFIMentionsInputProxy.react",["cx","Promise","JSResource","JSResourceReference","React","UFICommonInteractionEvents","UFICommonInteractionLogger","createReactClass_DEPRECATED","promiseDone","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("createReactClass_DEPRECATED")({displayName:"UFIMentionsInputProxy",_cmdBuffer:[],_interactionTrackingID:null,getInitialState:function(){return{component:null,viewComponent:null}},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[],this.props.initialData&&this._bootload()},componentDidUpdate:function(a,c){this._interactionTrackingID&&this.state.component&&!c.component&&(b("UFICommonInteractionLogger").endInteraction(this._interactionTrackingID),this._interactionTrackingID=null),this.state.component&&this._drainFnBuffer()},hasEnteredText:function(){return this._fillCmdBuffer({fn:"hasEnteredText",args:[]})},getText:function(){return this._fillCmdBuffer({fn:"getText",args:[]})},focus:function(){this._bootload(),this._fillCmdBuffer({fn:"focus",args:[]}),this.state.component||(this._interactionTrackingID=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_COMPOSER_INPUT_FOCUS))},onDummyFocus:function(){this.props.onDummyFocus&&this.props.onDummyFocus(),this.focus()},submitComment:function(a,b){this._fillCmdBuffer({fn:"submitComment",args:[a,b]})},insertMention:function(a){this._fillCmdBuffer({fn:"insertMention",args:[a]})},insertEmoticon:function(a){this._fillCmdBuffer({fn:"insertEmoticon",args:[a]})},insertEmoji:function(a){this._fillCmdBuffer({fn:"insertEmoji",args:[a]})},replaceText:function(a,b){this._fillCmdBuffer({fn:"replaceText",args:[a,b]})},_bootload:function(){var a=this;b("promiseDone")(b("Promise").all([b("JSResource")("UFIMentionsInput.react").__setRef("UFIMentionsInputProxy.react").load(),new(b("Promise"))(function(c){a.props.viewComponent instanceof b("JSResourceReference")?a.props.viewComponent.load().done(c):c(a.props.viewComponent)})]),function(b){var c=b[0];b=b[1];a.isMounted()&&a.setState({component:c,viewComponent:b})})},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0},_fillCmdBuffer:function(a){if(this.refs.mentionsinputchild)return this._execCmd(a);else this._cmdBuffer=this._cmdBuffer.concat([a])},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var a=this._cmdBuffer[0];this._execCmd(a);this._cmdBuffer=this._cmdBuffer.slice(1);b("setImmediate")(this._drainFnBuffer)}},_execCmd:function(a){var b=this.refs.mentionsinputchild;return b[a.fn].apply(b,a.args)},_renderProxyInput:function(){var a="_1osa mentionsHidden";return b("React").jsx("input",{className:a,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus})},_renderDummy:function(){var a="UFIAddCommentInput _1osb _1osc _2xww";return b("React").jsx("div",{onClick:this.onDummyFocus,className:"_2xwx",onFocus:this.onDummyFocus,onMouseOver:this._bootload,role:"presentation",children:b("React").jsxs("div",{className:a,children:[this._renderProxyInput(),this.props.placeholder]})})},render:function(){var a=this.state.component;return!a?this._renderDummy():b("React").jsx(a,babelHelpers["extends"]({ref:"mentionsinputchild"},this.props,{viewComponent:this.state.viewComponent,children:this.props.children}),"mentionsinputchild")}});e.exports=a}),null);
__d("UFIShareLink.react",["cx","fbt","CurrentUser","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){if(c.props.href&&c.props.href!=="#"&&!c.props.onClick)return;a.preventDefault();c.props.onClick&&c.props.onClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Enviar esto a tus amigos o publicarlo en tu biograf\u00eda");b("CurrentUser").isWorkUser()&&(a=h._("Env\u00eda esto a tus compa\u00f1eros de trabajo o publ\u00edcalo en tu biograf\u00eda."));var c='{ "tn": "'+b("TrackingNodes").encodeTN(b("TrackingNodes").types.SHARE_LINK)+'", "type": 25 }',d=this.props,e=d.openOnInit;d=babelHelpers.objectWithoutPropertiesLoose(d,["openOnInit"]);return b("React").jsx("span",{className:"_27de _4noj",children:b("React").jsx("a",babelHelpers["extends"]({},d,{className:b("joinClasses")(this.props.className,"share_action_link _5f9b"),onClick:this.$1,ref:function(a){a&&e&&a.click()},role:"button",tabIndex:0,"data-ft":c,title:a,children:h._("Compartir")}))})};return c}(b("React").Component);e.exports=a}),null);
__d("UFIShareNowMenuBootloader.react",["BootloadedComponent.react","JSResource","React","UFIShareLink.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ufi_share_link_placeholder",h="ufi_share_link_loaded";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={openOnInit:!1,focusOnInit:!1,interacted:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.state,d=c.openOnInit,e=c.focusOnInit;c=c.interacted;var f=this.props,i=f.endpoint,j=f.endpointData,k=f.onShow,l=f.onHide,m=f.openOnInitOverride;f=f.onMouseUp;var n=b("React").jsx(b("UFIShareLink.react"),{href:"#","data-testid":g,onMouseUp:f,onClick:function(){return a.setState({interacted:!0,openOnInit:!0})},onFocus:function(){return a.setState({interacted:!0,focusOnInit:!0})},onMouseOver:function(){return a.setState({openOnInit:!1,focusOnInit:!1,interacted:!0})}});return c||m?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIShareNowMenu.react").__setRef("UFIShareNowMenuBootloader.react"),bootloadPlaceholder:n,endpoint:i,endpointData:j,onShow:k,onHide:l,openOnInit:d||m,focusOnInit:e,children:b("React").jsx(b("UFIShareLink.react"),{onMouseUp:f,href:"#","data-testid":h})}):n};return c}(b("React").Component);e.exports=a}),null);
__d("WritingAssistanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WritingAssistanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WritingAssistanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WritingAssistanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setInterface=function(a){this.$1["interface"]=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setValue=function(a){this.$1.value=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action:!0,"interface":!0,time:!0,value:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("UFIReactionsLinkImpl.react",["csx","cx","fbt","Promise","BanzaiLogger","BootloadedComponent.react","Bootloader","Event","JSResource","Parent","React","ReactDOM","Run","ShimButton.react","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","UFIAddReactionButton.react","UFICommentAction","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIConfig","UFIReactionIconImpl.react","UFIReactionTypes","UFIStoryAction","addFocusEvents","curry","promiseDone","prop-types","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").Component;var j=b("UFIConfig").reactionsFunnelLogger,k=b("UFIConfig").reactionsHasCommentFunnelLogger,l=b("UFIConfig").reactionsHasFunnelLogger,m=!1,n=!1,o=!1,p=!1,q=null,r=null,s=b("React").jsx("div",{}),t=150,u=b("UFIReactionTypes").reactions,v=Object.keys(u),w=20,x=525,y=750,z=700,A=850,B=500,C="ontouchstart"in window,D=i._("Mostrar m\u00e1s reacciones"),E=[],F=function(a){if(!q){a=function(a){q=a,E&&(E.forEach(function(a){return a()}),E=null)};b("UFIConfig").reactionsHasAnimatedIcons?b("Bootloader").loadModules(["UFIReactionsMenuWithAnimatedIcons.react"],a,"UFIReactionsLinkImpl.react"):b("Bootloader").loadModules(["UFIReactionsMenuImpl.react"],a,"UFIReactionsLinkImpl.react")}};function G(){__p&&__p();if(b("UFIConfig").reactionsHasAnimatedLikeActionIcon&&!m){m=!0;var a=new(b("Promise"))(function(a,c){var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["UFIReactionsAnimatedLikeActionIcon.react"],function(b){a(b),d.release()},"UFIReactionsLinkImpl.react")}),b("Run").onLeave(function(){d.release(),c()}))}),c=I().then(function(a){return a.loadLikeActionIcon()});b("promiseDone")(b("Promise").all([a,c]),function(a){var b=a[0];a[1];r=b})}}var H=null;function I(){__p&&__p();if(!H){var a=null;H=new(b("Promise"))(function(c){a=b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["UFIReactionsAnimationPreloader"],function(a){return c(new a())},"UFIReactionsLinkImpl.react")})});b("promiseDone")(H,function(){a&&a.remove()});var c=b("Run").onLeave(function(){H=null,c&&c.remove()})}return H}var J=b("addFocusEvents")("a");c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this,c,d)||this;e.$2=function(){e.state.dialogShown&&e.forceUpdate()};e.hideDialog=function(){e.setState({dialogShown:!1,isScrubbing:!1})};e.showDialog=function(){e.dialogShownTime===0&&(e.dialogShownTime=Date.now()),e.state.dialogShown||e.state.logToFunnel&&j.menuShow(e.state.logAsComment),o=!0,e.setState({dialogShown:!0,NUXShown:!1})};e.onClick=function(a){__p&&__p();var c=b("UFICommonInteractionLogger").startInteraction(e.props.comment?b("UFICommonInteractionEvents").UFI_COMMENT_REACTION:b("UFICommonInteractionEvents").UFI_STORY_REACTION);a.preventDefault();var d=e.props,f=d.reaction;d=d.suggestedReaction;if(!f||f===b("UFIReactionTypes").LIKE||!u[f]){d=d&&e.hasSuggestedReaction?d:b("UFIReactionTypes").LIKE;f=f?b("UFIReactionTypes").NONE:d;d=b("curry")(e.onReactionChange,f);e.$3(f,!0);c&&(e.$1={trackingID:c,reaction:f});d(a)}else c&&(e.$1={trackingID:c,reaction:0}),e.onReactionChange(0,a);e.setState({dialogShown:!1,isScrubbing:!1})};e.onClickCapture=function(a){a.stopPropagation(),e.setState({isLongPressing:!1})};e.onContextMenu=function(a){e.state.isTouchDown&&a.preventDefault()};e.onMouseDown=function(a){clearTimeout(e.hoverTimeout)};e.onMouseEnter=function(a){clearTimeout(e.hoverTimeout);a=e.props.comment?z:x;e.state.dialogShown||(e.hoverTimeout=setTimeout(function(){e.showDialog()},a));F(e.props.supportedReactions);!e.state.dialogShown&&e.state.logToFunnel&&(e.logFunnelTimeout=setTimeout(function(){return j.likeButtonEnter(e.props.reaction,e.state.logAsComment)},t))};e.onMouseLeave=function(a){clearTimeout(e.hoverTimeout);clearTimeout(e.logFunnelTimeout);a=e.props.comment?A:y;e.state.dialogShown&&(e.hoverTimeout=setTimeout(e.hideDialog,a))};e.onReactionMenuMouseEnter=function(a){clearTimeout(e.hoverTimeout)};e.onTouchStart=function(a){e.state.dialogShown||(e.mouseDownTime=Date.now(),e.mouseUpTime=0,e.longPressTimeout=setTimeout(function(){e.dialogShownTime===0&&(e.dialogShownTime=Date.now()),e.setState({dialogShown:!0,NUXShown:!1,isLongPressing:!0})},B),F(e.props.supportedReactions)),e.setState({isTouchDown:!0,isLongPressing:!1})};e.onTouchEnd=function(a){e.state.isLongPressing&&(e.mouseUpTime=Date.now()),e.dragStartX=null,e.dragStartY=null,clearTimeout(e.longPressTimeout),e.setState({isTouchDown:!1})};e.onTouchMove=function(a){__p&&__p();if(e.state.isScrubbing)return;a=a.touches[0];var b=a.clientX;a=a.clientY;if(e.dragStartX===null&&e.dragStartY===null){e.dragStartX=b;e.dragStartY=a;return}typeof e.dragStartX==="number"&&typeof e.dragStartY==="number"&&(e.dragStartX>b+w||e.dragStartX<b-w||e.dragStartY>a+w||e.dragStartY<a-w)&&e.setState({isScrubbing:!0})};e.onReactionChange=function(a,c,d,f){__p&&__p();d===void 0&&(d=null);f===void 0&&(f=null);e.$3(a);var g=b("ReactDOM").findDOMNode(e.refs.trigger);e.state.logToFunnel&&(c.target===g?j.likeButtonClick(a,e.state.logAsComment):j.reactionSelection(a,e.state.logAsComment));e.props.comment?c=b("UFICommentAction").changeReaction(e.props.contextArgs,e.props.comment,a,g):c=b("UFIStoryAction").changeReaction(e.props.contextArgs,a,g,d,f);e.context.dispatch(c);a=function(){e.setState({dialogShown:!1,isScrubbing:!1})};a()};e.onReactionMouseEnter=function(a,b){e.reactionsHoverStartTimeMap[a]===0&&(e.reactionsHoverStartTimeMap[a]=Date.now())};e.onReactionMouseLeave=function(a,b){e.reactionsHoverStartTimeMap[a]&&(e.reactionsHoverTotalTimeMap[a]+=Date.now()-e.reactionsHoverStartTimeMap[a],e.reactionsHoverStartTimeMap[a]=0)};e.onKeyboardFocus=function(){e.allowKeyboardFocus=!0,e.showDialog()};e.onScreenReaderTrigger=function(){p=!0,e.allowKeyboardFocus=!0,e.showDialog()};e.dragStartX=null;e.dragStartY=null;e.hasSuggestedReaction=b("UFIConfig").reactionsHasSuggestedReaction;e.subscriptionsHandler=new(b("SubscriptionsHandler"))();E&&E.push(e.$2);d=!1;j&&(l&&e.props.comment===void 0||k&&e.props.comment!==void 0)&&(d=!0);e.state={dialogShown:!1,isLongPressing:!1,isScrubbing:!1,isTouchDown:!1,logToFunnel:d,logAsComment:!!c.comment&&k,NUXShown:!1,prevReaction:c.reaction,shouldBounce:!1,hasAllowedBounce:!1};return e}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};c.getDerivedStateFromProps=function(a,b){var c=!!a.reaction&&a.reaction!==b.prevReaction;return{prevReaction:a.reaction,shouldBounce:c,hasAllowedBounce:b.hasAllowedBounce||c}};d.componentDidUpdate=function(a,c){__p&&__p();var d=this;this.$1&&this.$1.reaction===this.props.reaction&&(b("UFICommonInteractionLogger").endInteraction(this.$1.trackingID),this.$1=null);if(!c.dialogShown&&this.state.dialogShown){this.setCommentReactionsMenuShown(!0);if(C){var e;this.subscriptionsHandler.addSubscriptions(b("Event").listen(document.documentElement,"touchstart",function(a){e=a.touches[0]}),b("Event").listen(document.documentElement,"touchmove",function(a){e=a.touches[0]}),b("Event").listen(document.documentElement,"touchend",function(a){e&&!d.refs.root.contains(document.elementFromPoint(e.clientX,e.clientY))&&d.setState({dialogShown:!1,isScrubbing:!1})}))}}else c.dialogShown&&!this.state.dialogShown&&(this.setCommentReactionsMenuShown(!1),this.$3(a.reaction),this.subscriptionsHandler.release(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))())};d.componentDidMount=function(){var a=this;this.$4();G();if(b("UFIConfig").reactionsHasAnimatedIcons&&!n){var c=b("Parent").bySelector(this.refs.root,"._zw3");if(c)var d=b("Event").listen(c,"mousemove",function(){a.$5(),d&&d.remove()})}};d.componentWillUnmount=function(){this.subscriptionsHandler.release();if(E){var a=E.indexOf(this.$2);a!==-1&&E.splice(a,1)}clearTimeout(this.hoverTimeout);clearTimeout(this.longPressTimeout)};d.maybeShowNUX=function(){this.props.nuxConfig&&this.props.nuxConfig.nuxType,o||(o=!0,this.setState({NUXShown:!0,dialogShown:!1}))};d.setCommentReactionsMenuShown=function(a){this.props.showAlternateButtonForLiveStreamingRedesign&&this.context.dispatch(b("UFIStoryAction").setCommentReactionsMenuShown(this.props.contextArgs,a))};d.onDragStart=function(a){a.preventDefault()};d.renderMenu=function(){this.state.dialogShown&&F(this.props.supportedReactions);if(!q)return null;var a=this.allowKeyboardFocus;this.allowKeyboardFocus=!1;return b("React").jsx(q,{initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:p,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shouldFocusOnShow:function(){return a},shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions})};d.renderTrigger=function(){__p&&__p();var a=this.props.reaction,c=this.props,d=c.showAlternateButtonForLiveStreamingRedesign;c=c.suggestedReaction;a&&!u[a]&&(a=null);var e=a?"fb-ufi-unlikelink":"fb-ufi-likelink",f,g,h;if(this.props.comment){e=this.props.comment.parentcommentid?"ufi_reply_like_link":"ufi_comment_like_link";var i=!1;!a?f=u[b("UFIReactionTypes").LIKE].display_name:(f=u[a].display_name,h=u[a].color,i=!0);i="UFILikeLink UFIReactionLink"+(i?" UFILinkBright":"")}else{!a?f=c&&this.hasSuggestedReaction?u[c].display_name:u[b("UFIReactionTypes").LIKE].display_name:f=u[a].display_name;(a&&a!=b("UFIReactionTypes").LIKE||!a&&c&&this.hasSuggestedReaction&&c!=b("UFIReactionTypes").LIKE)&&(g=b("React").jsx(b("UFIReactionIconImpl.react"),{className:"_1ktw _2hoq",grayscale:!a&&!!c,reaction:a||c,size:"18"}));c=this.props.contextArgs.source;c=!!(r&&b("UFIConfig").reactionsHasAnimatedLikeActionIcon&&!c===41&&!c===38&&this.state.hasAllowedBounce&&a===b("UFIReactionTypes").LIKE);c&&r!=null&&(g=b("React").jsx(r,{className:"_1ktw _2hoq _2odi"}));i="UFILikeLink _4x9- _4x9_"+(g?"":" _48-k")+(a?" UFILinkBright":"")+(!c&&this.state.shouldBounce?" _614v":"");h=a?u[a].color:null}return b("React").jsx(J,{"aria-pressed":!!a,className:i,"data-testid":e,href:"#",onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:q?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:C?this.onTouchEnd:null,onTouchMove:C?this.onTouchMove:null,onTouchStart:C?this.onTouchStart:null,ref:"trigger",role:"button",style:{color:h},tabIndex:0,children:d?b("React").jsx(b("UFIAddReactionButton.react"),{}):b("React").jsxs(b("React").Fragment,{children:[g,f]})})};d.renderNUX=function(){var a=this.refs.root,c=this.props.comment!==void 0,d=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,e=this.props.nuxConfig&&this.props.nuxConfig.textOverride;return!this.state.NUXShown||!a?null:b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:s,bootloadLoader:b("JSResource")("UFIReactionsNUX.react").__setRef("UFIReactionsLinkImpl.react"),context:a,titleOverride:d,textOverride:e,isCommentReactionNux:c,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey})};d.renderScreenReaderTrigger=function(){return q?null:b("React").jsx(b("ShimButton.react"),{className:"accessible_elem","data-accessibilityid":"virtual_cursor_trigger",inline:!0,tabIndex:-1,onClick:this.onScreenReaderTrigger,children:D})};d.render=function(){var a=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi;return b("React").jsxs("div",{className:"_khz"+(a?" _4sz1":"")+" _4rw5"+(this.state.isScrubbing?" _4bdq":"")+" _3wv2",ref:"root",children:[this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX()]})};d.$4=function(){var a=this;this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};v.forEach(function(b){a.reactionsHoverStartTimeMap[b]=0,a.reactionsHoverTotalTimeMap[b]=0})};d.$5=function(){var a=this;n||(b("promiseDone")(I(),function(b){b.load(a.props.supportedReactions)}),n=!0)};d.$3=function(a,c){if(this.dialogShownTime!==0){a={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:a,initial_reaction:this.props.reaction,"interface":"www",long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:c,time_spent:Date.now()-this.dialogShownTime};for(var d in this.reactionsHoverTotalTimeMap){c="time_spent_"+u[d].name.toLowerCase();a[c]=this.reactionsHoverTotalTimeMap[d]}b("BanzaiLogger").log("UserReactionsLoggerConfig",a);this.$4()}};return c}(a);c.contextTypes={dispatch:b("prop-types").func};e.exports=c}),null);
__d("UFIReactionsSocialSentence.react",["cx","ActorURI","BanzaiLogger","Bootloader","React","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","XUFIReactionTooltipController"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onSentenceClick=function(a){if(d.props.reactionsLink)return;var c=d.props.feedback,e=b("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:c.actorforpost,feedbackTargetID:c.entidentifier}).toString();b("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:c.entidentifier,"interface":"www",action:"click",target_type:"social_sentence"});var f=a.currentTarget;b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(e,f,"dialog")},"UFIReactionsSocialSentence.react");a.preventDefault()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){var c=a.actorforpost;a=a.entidentifier;return{"data-hover":"tooltip","data-tooltip-uri":b("ActorURI").create(b("XUFIReactionTooltipController").getURIBuilder().setString("ft_ent_identifier",a).getURI(),c)}};d.render=function(){__p&&__p();var a=this.props.feedback,c=this.props.contextArgs,d=a.likesentences,e=a.reactioncountreduced,f=a.reactionsentences,g=a.viewerreaction,h=a.reactioncount||0;g=g?h>3:h>2;var i=null;g&&(i=this.$1(a));g=null;f&&f.current?g=f.current.text:d&&d.current?g=d.current.text:e!=="0"&&(g=e);f=null;g&&(f=b("React").jsx("span",{className:"_4arz",children:b("React").jsx("span",babelHelpers["extends"]({},i,{children:g}))}));d=null;h&&(d=b("React").jsx("span",{"aria-hidden":!!f,className:"_1g5v",children:b("React").jsx("span",babelHelpers["extends"]({},i,{children:e}))}));g=b("UFIReactionsProfileBrowserUtils").getPageURI({actorID:a.actorforpost,feedbackTargetID:a.entidentifier});this.props.reactionsLink&&(g=this.props.reactionsLink);h=c&&c.source===41;return b("React").jsx("div",{className:"_1vaq",children:b("React").jsx("div",{className:"_ipp",children:b("React").jsx(b("UFIReactionsBlingTokens.react"),{className:"_4ar- _ipn",contextArgs:c,feedback:a,max:3,children:b("React").jsxs("a",{className:"_2x4v",href:g,onClick:this.onSentenceClick,rel:"ignore",role:"button",children:[d,h?null:f]})})})})};return c}(b("React").Component);e.exports=a}),null);