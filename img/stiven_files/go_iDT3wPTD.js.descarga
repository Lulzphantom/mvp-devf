if (self.CavalryLogger) { CavalryLogger.start_js(["ZogVu"]); }

__d("XProfilePicCropViewerAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/crop_viewer/",{photo_id:{type:"String",required:!0},photo_sizes:{type:"IntVector",defaultValue:[960,2048,4096]},profile_id:{type:"Int",required:!0},set_id:{type:"String",required:!0},sticker_id:{type:"Int"},will_load_more_photos:{type:"Bool",defaultValue:!1},source:{type:"String"}})}),null);
__d("ProfilePhotoZoomCrop.react",["ix","cx","Arbiter","AsyncRequest","AsyncResponse","AsyncUploadRequest","CircularProfilePicGating","Image.react","PhotoZoomCropDimensions","PhotoZoomCropImage.react","PhotoZoomCropMixin","ProfilePicCropViewerStrings","React","XProfilePicCropViewerAsyncController","XProfilePicUploadAsyncController","XStickerPhotoEditorController","XUIButton.react","createReactClass_DEPRECATED","cxMargin","fbglyph","joinClasses","prop-types","tidyEvent"],(function(a,b,c,d,e,f,g,h){__p&&__p();c=b("createReactClass_DEPRECATED")({displayName:"ProfilePhotoZoomCrop",_photoEditorRequest:null,mixins:[b("PhotoZoomCropMixin")],propTypes:{isPreviousProfilePic:(a=b("prop-types")).bool,messageText:a.string,onMove:a.func,onPhotoChange:a.func,overlay:a.element,photoDims:a.instanceOf(b("PhotoZoomCropDimensions")).isRequired,photoID:a.string,setid:a.string,source:a.string,src:a.oneOfType([a.string,a.object]),warningText:a.string},render:function(){var a=null;!this.props.isPreviousProfilePic&&this.props.source!=="family_member"&&this.props.source!=="room_profile"&&(a=b("React").jsx(b("XUIButton.react"),{className:"_3-8-",image:b("React").jsx(b("Image.react"),{src:g("142450")}),label:b("ProfilePicCropViewerStrings").BUTTON_EDIT,onClick:this._openEditDialog}));return b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_5z0p"+(this.props.source!=="family_member"?" _37ml":"")),children:[b("React").jsx(b("PhotoZoomCropImage.react"),{circular:b("CircularProfilePicGating").displayCircularProfilePic,className:"_5z0r",dimensions:this.props.photoDims,enableDrag:this.props.photoDims.isCurrentlyDragable(),onMove:this.props.onMove,overlay:this.props.overlay,src:this.props.src}),this._getMessage(),a]})},__getZoom:function(){return this.props.photoDims.getZoom()},_openEditDialog:function(){var a=this;if(this._photoEditorRequest||!this.props.photoID)return;b("Arbiter").subscribe("ProfilePicPhotoEditor/newImage"+this.props.photoID,this._photoEditDone);var c=b("XStickerPhotoEditorController").getURIBuilder().setEnum("target_type","profile_pic").setInt("latest_fbid",this.props.photoID).setInt("photo_fbid",this.props.photoID).getURI();this._photoEditorRequest=new(b("AsyncRequest"))(c).setFinallyHandler(function(){a._photoEditorRequest=null});this._photoEditorRequest.send()},_photoEditDone:function(a,c){__p&&__p();var d=this;a=this.props.onPhotoChange;a&&a();var e=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",this.props.profileID).getURI();e=new(b("AsyncUploadRequest"))().setFiles({photo:c.blob}).setAllowCrossOrigin(!0).setURI(e);b("tidyEvent")([e.subscribe("success",function(a,c){a=c.getResponse().getPayload();c=b("XProfilePicCropViewerAsyncController").getURIBuilder().setString("photo_id",a.fbid).setInt("profile_id",d.props.profileID).setString("set_id",d.props.setid).setBool("will_load_more_photos",!0).getURI();new(b("AsyncRequest"))(c).setErrorHandler(function(a){b("AsyncResponse").defaultErrorHandler(a)}).send()})]);e.send();a&&a(c)}});e.exports=c}),null);
__d("ProfilePicEditThumbnailStrings",["fbt","ProfilePicCropViewerStrings"],(function(a,b,c,d,e,f,g){a=Object.assign({REPOSITION_CURRENT_TITLE:g._("Editar imagen en miniatura"),SAVED_BODY:g._("La imagen en miniatura se modific\u00f3 correctamente. Se actualizar\u00e1 la p\u00e1gina."),SAVED_TITLE:g._("Cambios guardados"),THUMBNAIL_LOADING_LABEL:g._("Cargando..."),THUMBNAIL_SAVING_LABEL:g._("Guardando..."),THUMBNAIL_SAVING_TITLE:g._("Guardando\u2026")},b("ProfilePicCropViewerStrings"));e.exports=a}),null);
__d("XProfilePicSaveThumbnailAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/save_thumbnail/",{end_x:{type:"Float",required:!0},end_y:{type:"Float",required:!0},profile_id:{type:"Int",required:!0},start_x:{type:"Float",required:!0},start_y:{type:"Float",required:!0}})}),null);
__d("ProfilePicThumbnailSaver",["ArbiterMixin","AsyncRequest","XProfilePicSaveThumbnailAsyncController","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$ProfilePicThumbnailSaver2=function(a){c.inform("error",a)};c.$ProfilePicThumbnailSaver3=function(a){c.inform("success",a)};c.$ProfilePicThumbnailSaver1=b;return c}var d=c.prototype;d.saveThumbnail=function(a){a=b("XProfilePicSaveThumbnailAsyncController").getURIBuilder().setFloat("start_x",100*a.startX).setFloat("start_y",100*a.startY).setFloat("end_x",100*a.endX).setFloat("end_y",100*a.endY).setInt("profile_id",this.$ProfilePicThumbnailSaver1);new(b("AsyncRequest"))(a.getURI()).setErrorHandler(this.$ProfilePicThumbnailSaver2).setHandler(this.$ProfilePicThumbnailSaver3).send()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ZoomProfilePicCropViewerFooter.react",["BootloadedComponent.react","JSResource","PhotoZoomCropDimensions","ProfilePicViewerFooterText.react","React","XUIDialogFooter.react","prop-types"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.children,c=null,d=null;b("React").Children.count(a)===1?c=a:Array.isArray(a)&&(c=a[0],d=a[1]);return b("React").jsxs(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ProfilePicViewerUMGFooter.react").__setRef("ZoomProfilePicCropViewerFooter.react"),bootloadPlaceholder:b("React").jsx(b("XUIDialogFooter.react"),{fullBleedBorder:!0,children:b("React").jsx(b("ProfilePicViewerFooterText.react"),{children:"\xa0"})}),hideSlider:this.props.hideZoomSlider,onZoom:this.props.onZoom,photoDims:this.props.photoDims,zoomSliderPosition:this.props.zoomSliderPosition,children:[c,d]})};return c}(b("React").Component);a.propTypes={children:function(a,c){if(b("React").Children.count(a[c])>2)return new Error("ZoomProfilePicCropViewerFooter must have 2 or fewer children")},hideZoomSlider:(c=b("prop-types")).bool,onZoom:c.func,photoDims:c.instanceOf(b("PhotoZoomCropDimensions")),zoomSliderPosition:c.number};e.exports=a}),null);
__d("ProfilePicMenuDialogThumbnail.react",["cx","ArbiterMixin","AsyncResponse","PhotoZoomCropDimensions","ProfileEditFlowModalManager","ProfileMediaAlwaysPublicIcon.react","ProfilePhotoZoomCrop.react","ProfilePicCoordinatesUtil","ProfilePicCropViewerLoading.react","ProfilePicCropViewerStrings","ProfilePicEditThumbnailStrings","ProfilePicThumbnailSaver","ProfilePicViewerFooterText.react","ProfileWizardModalManager","ProfileWizardProfilePictureManager","React","TimelineURI","XUIButton.react","XUIDialog.react","XUIDialogTitle.react","XUIGrayText.react","ZoomProfilePicCropViewerFooter.react","createReactClass_DEPRECATED","prop-types","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h=775;a=b("createReactClass_DEPRECATED")({displayName:"ProfilePicMenuDialogThumbnail",mixins:[b("ArbiterMixin")],propTypes:{profileID:b("prop-types").string.isRequired,previewSize:b("prop-types").number},getDefaultProps:function(){return{previewSize:32}},getInitialState:function(){return{photoData:null,photoDims:null,savingMode:!1,zoomSliderPosition:null}},componentDidMount:function(){var a=this;this.subscribe("photoChange",function(c,d){d.previousprofilepic=!0;c=b("PhotoZoomCropDimensions").fromProfilePhotoData(d);a.setState({photoData:d,photoDims:c,zoomSliderPosition:c.getZoom()})})},render:function(){__p&&__p();var a=this,c=this.state,d=c.photoData,e=c.photoDims;d?c=b("ProfilePicEditThumbnailStrings").REPOSITION_CURRENT_TITLE:!this.state.savingMode&&!d?c=b("ProfilePicEditThumbnailStrings").LOADING:!this.state.savingMode?c=b("ProfilePicEditThumbnailStrings").BUTTON_SAVE:c=b("ProfilePicEditThumbnailStrings").THUMBNAIL_SAVING_TITLE;var f;(this.state.savingMode||!d)&&(f=b("React").jsx(b("ProfilePicCropViewerLoading.react"),{}));var g;d&&(g=b("React").jsx(b("ProfilePhotoZoomCrop.react"),{className:"_hn8",isPreviousProfilePic:!0,onMove:function(b,c){return a.setState({photoDims:e.cloneAndMove(b,c)})},photoDims:e,src:d.original.uri}));var i;if(this.state.savingMode)i=b("React").jsx(b("ProfilePicViewerFooterText.react"),{weight:"bold",children:b("ProfilePicEditThumbnailStrings").THUMBNAIL_SAVING_LABEL});else if(d){d=d.isWorkUser?null:b("React").jsx(b("ProfileMediaAlwaysPublicIcon.react"),{});i=b("React").jsxs("div",{children:[d,b("React").jsx(b("XUIButton.react"),{label:b("ProfilePicEditThumbnailStrings").BUTTON_CANCEL,onClick:this._handleCancel}),b("React").jsx(b("XUIButton.react"),{label:b("ProfilePicCropViewerStrings").BUTTON_SAVE,onClick:this._handleSave,use:"confirm"})]})}else i=b("React").jsx(b("ProfilePicViewerFooterText.react"),{weight:"bold",children:b("ProfilePicEditThumbnailStrings").THUMBNAIL_LOADING_LABEL});return b("React").jsxs(b("XUIDialog.react"),{layerHideOnBlur:!1,modal:!0,shown:!0,width:h,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:b("React").jsx(b("XUIGrayText.react"),{display:"block",shade:"medium",size:"header4",weight:"bold",children:c})}),b("React").jsxs("div",{className:"_1t9l",children:[g,f]}),b("React").jsxs(b("ZoomProfilePicCropViewerFooter.react"),{isSaving:this.state.savingMode,onZoom:this._onZoom,photoDims:e,zoomSliderPosition:this.state.zoomSliderPosition,children:[b("React").jsx(b("ProfilePicViewerFooterText.react"),{children:b("ProfilePicEditThumbnailStrings").HIDDEN_FROM_NEWS_FEED}),i]})]})},componentWillUnmount:function(){this.props.unmountCallback&&this.props.unmountCallback()},_onZoom:function(a,b){a=this.state.photoDims.cloneAndZoom(a[0]);this.setState({photoDims:a,zoomSliderPosition:b||a.getZoom()})},getCropArea:function(){return this.state.photoDims.getArea()},getPhotoSize:function(){return this.state.photoData.original},_handleCancel:function(){this.inform("close")},_handleSave:function(){this.setState({savingMode:!0});var a=b("ProfilePicCoordinatesUtil").getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()),c=new(b("ProfilePicThumbnailSaver"))(this.props.profileID);b("tidyEvent")([c.subscribeOnce("success",this._savingSuccess),c.subscribeOnce("error",this._savingError)]);c.saveThumbnail(a)},_savingSuccess:function(a,c){__p&&__p();if(b("ProfileWizardModalManager").isOpen()){b("ProfileWizardModalManager").informProfilePictureUploaded({response:c});this.inform("close");return}if(b("ProfileEditFlowModalManager").isOpen()){b("ProfileEditFlowModalManager").informProfilePictureUploaded({response:c});this.inform("close");return}if(b("ProfileWizardProfilePictureManager").isOpen()){b("ProfileWizardProfilePictureManager").informProfilePictureUploaded({response:c});this.inform("close");return}b("TimelineURI").goToProfileID(this.props.profileID)},_savingError:function(a,c){this.setState({savingMode:!1}),b("AsyncResponse").defaultErrorHandler(c)}});e.exports=a}),null);
__d("ProfilePicMenuDialogThumbnailContainer",["ProfilePicMenuDialogThumbnail.react","React","SpotlightViewerInit","nullthrows"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";function a(a){if(g)return g;g=b("SpotlightViewerInit").render(b("React").jsx(b("ProfilePicMenuDialogThumbnail.react"),{profileID:a}),function(){g=null})}a.updatePhoto=function(c,d){g||new a(d),b("nullthrows")(g).inform("photoChange",c)};return a}();e.exports=a}),null);