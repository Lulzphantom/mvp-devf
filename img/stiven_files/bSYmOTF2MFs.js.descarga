if (self.CavalryLogger) { CavalryLogger.start_js(["ixji3"]); }

__d("RTWebCallWindowOpener",["requireCond","cr:1099565"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1099565")}),null);
__d("ZenonCallInviteModel",["BaseEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){__p&&__p();var c;c=a.call(this)||this;c.$ZenonCallInviteModel3=function(a){if(c.__currentRequest&&c.__currentRequest.model&&c.__currentRequest.model.ringID===a.ringID)switch(a.reason){case"hangup":c.__currentRequest.model=babelHelpers["extends"]({},c.__currentRequest.model,{type:"missed"});c.emit("callInvite",c.__currentRequest.model);break;default:c.dismiss();break}};c.$ZenonCallInviteModel2=function(a){var b;if(((b=c.__currentRequest)==null?void 0:(b=b.model)==null?void 0:b.type)==="ringing"){((b=c.__currentRequest)==null?void 0:(b=b.model)==null?void 0:b.ringID)!==a.ringID&&a.onDecline("InAnotherCall")}else c.__currentRequest={model:{controllerParams:a.controllerParams,inviterID:a.inviterID,participants:a.otherParticipants,requestingVideo:a.requestingVideo,ringID:a.ringID,thread:a.thread,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a},c.emit("callInvite",c.__currentRequest.model),a.isClientPermissableRing||a.onDecline("VersionUnsupported")};c.__eventSource=b;c.__currentRequest=null;return c}var c=b.prototype;c.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};c.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a?this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel1):(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel2),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel3))};c.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};c.dismiss=function(){this.__currentRequest=null,this.emit("callInvite",Object.freeze(null))};c.accept=function(a,b){if(this.__currentRequest){var c;((c=this.__currentRequest.model)==null?void 0:c.type)==="ringing"&&this.__currentRequest.ringPayload.onAccept(a,b);this.dismiss()}};c.decline=function(a,b){a===void 0&&(a="IgnoreCall");if(this.__currentRequest){this.__currentRequest.ringPayload.onDecline(a,b);this.dismiss();return}};c.$ZenonCallInviteModel1=function(a){a.onDecline("IgnoreCall","CallsBlocked")};return b}(b("BaseEventEmitter"));e.exports=a}),null);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}e.exports=a}),null);
__d("ZenonCallWindowErrors",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error)),h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));e.exports={CannotAcceptInviteError:f,ConferenceNameMutationFailedError:b,IncompleteControllerParamsError:c,InviteNotFoundError:g,OpeningAnotherCallError:a,UninitializedError:h,UnsupportedThreadTypeError:d}}),null);
__d("ZenonCallWindowController",["Promise","ZenonCallWindowErrors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonCallWindowErrors").OpeningAnotherCallError;a=function(){__p&&__p();function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var c=a.prototype;c.initCall=function(a){__p&&__p();var c=this;if(this.$3)throw new g();var d=this.$6.openWindow(a);this.$2&&(this.$2.closed||this.$2.close(),this.$2=null);this.$2=d;this.$3=!0;return[d,b("Promise").all([this.$7.load(),this.$4.load()]).then(function(b){var d=b[0];b=b[1];c.$5===null&&(c.$5=new b(c.$1,new d(c.$1)));return c.$5.initCall(c.$2,a)})["finally"](function(){c.$3=!1})]};return a}();e.exports=a}),null);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").jsx(b("FBPaymentsDialogContainer.react"),{}),a)}};e.exports=a}),null);
__d("ZenonCallLogger",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){var c=this;this.$1=[];b.forEach(function(b){return c.$1.push(new b(a))})}var b=a.prototype;b.log=function(a){this.$1.forEach(function(b){b.processEvent(a)})};return a}();e.exports=a}),null);
__d("ZenonDeviceInfoUtils",["UserAgentData"],(function(a,b,c,d,e,f){"use strict";e.exports={getDeviceSoftwareInfo:function(){var a=b("UserAgentData").platformName,c=b("UserAgentData").browserName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile",c==="Chrome"&&(c="Mobile "+c));window.external&&window.external.pinPage&&(c==="Chrome"&&(c+=" Edge"));return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:c,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}}}}),null);
__d("ZenonLoggingEventTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip",MWS:"mws"});b=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});e.exports={CallType:a,ZenonUploadLogLevel:b}}),null);
__d("ZenonCallSummary",["FBRTCLocalUploadLogLevel","SiteData","ZenonCallSummaryStore","ZenonDeviceInfoUtils","ZenonLoggingEventTypes","gkx","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance;var h=b("ZenonLoggingEventTypes").CallType,i=b("ZenonLoggingEventTypes").ZenonUploadLogLevel,j={PRESSED_ANSWER:"p_a"};function k(){var a=b("gkx")("1154135");return a?"ZenonScotch":"Old Codebase"}var l=19,m=24,n={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},o={DEVICE_INFO:"device_info",INITIATED_BY_PAGE_ID:"initiated_by_page_id",INITIATED_BY_APP_ID:"initiated_by_app_id",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5"};a=function(){__p&&__p();function a(a){__p&&__p();var c=a.peerID,d=a.callID,e=a.callTrigger,f=a.isCaller,i=a.uploadLogLevel,j=a.protocol;a=a.isVideo;this.$20=0;this.$21=0;this.$26={};this.$27={};this.$28={};this.$29={};this.$30={};this.$31={};this.$32={};this.$33={};this.$40={};this.$1=c;this.$2=d;this.$4=f;this.$3=m;this.$7=k();this.$5=(c=i)!=null?c:b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel();this.$6=e;this.$23=new Date().valueOf();this.$8=j;this.$8==="p2p"?this.setCallType(a?h.DIRECT_VIDEO:h.VOIP):this.setCallType(h.MWS);this.$25=(g||(g=b("performanceNow")))();this.$24=0;this.$22=this.$25;this.$39=0;this.$40[o.DEVICE_INFO]=b("ZenonDeviceInfoUtils").getDeviceSoftwareInfo();this.$41()}a.fromJsonString=function(b){__p&&__p();try{b=JSON.parse(b)}catch(a){return null}if(b.version<l)return null;if(!Object.prototype.hasOwnProperty.call(b,"peerID")||!Object.prototype.hasOwnProperty.call(b,"callID")||!Object.prototype.hasOwnProperty.call(b,"isCaller")||!Object.prototype.hasOwnProperty.call(b,"startTime")||!Object.prototype.hasOwnProperty.call(b,"trigger")||!Object.prototype.hasOwnProperty.call(b,"signalingTime")||!Object.prototype.hasOwnProperty.call(b,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(b,"lastSerializedTime"))return null;var c=new a({peerID:b.peerID,callID:b.callID,isCaller:b.isCaller,protocol:b.activeConn,isVideo:b.callType===h.DIRECT_VIDEO});c.$3=b.version;c.$5=b.uploadLogLevel;c.$23=b.startTime;c.$6=b.trigger;c.$7=b.clientVersion;c.$26=b.signalingTime;c.$14=b.endCallReason;c.$15=b.endCallSubreason;c.$16=b.isRemoteEnded;c.$20=b.lastUpdatedTime;c.$21=b.lastSerializedTime;c.$10=b.joinWithSID;b.conferenceName&&(c.$9=b.conferenceName);b.escP2PCallID&&(c.$11=b.escP2PCallID);b.activeConn&&(c.$8=b.activeConn);b.serverInfoData&&(c.$13=b.serverInfoData);b.localVideoDuration&&(c.$34=b.localVideoDuration);b.remoteVideoDuration&&(c.$35=b.remoteVideoDuration);b.unsetOnRetrieve&&(c.$19=b.unsetOnRetrieve);b.openCount&&(c.$39=b.openCount);b.extraInfo&&(c.$40=b.extraInfo);b.gen0IceSentCount&&(c.$30=b.gen0IceSentCount);b.gen0IceReceivedCount&&(c.$31=b.gen0IceReceivedCount);b.iceSentCount&&(c.$32=b.iceSentCount);b.iceReceivedCount&&(c.$33=b.iceReceivedCount);b.accumulatedCallTime&&(c.$24=b.accumulatedCallTime);b.escStateTimes&&(c.$27=b.escStateTimes);b.applicationEventTime&&(c.$28=b.applicationEventTime);b.videoEscTimes&&(c.$29=b.videoEscTimes);b.connectionType&&(c.$17=b.connectionType);b.videoReceivedCodec!==null&&(c.$36=b.videoReceivedCodec);b.videoSentCodec!==null&&(c.$37=b.videoSentCodec);b.audioSentCodec!==null&&(c.$38=b.audioSentCodec);b.relayIP!==null&&b.relayIP!==void 0&&(c.$18=b.relayIP);return c};var c=a.prototype;c.toJsonString=function(){this.$21=new Date().valueOf();return JSON.stringify({version:this.$3,peerID:this.$1,callID:this.$2,isCaller:this.$4,uploadLogLevel:this.$5,callType:this.$12,conferenceName:this.$9,joinWithSID:this.$10,activeConn:this.$8,escP2PCallID:this.$11,serverInfoData:this.$13,localVideoDuration:this.$34,remoteVideoDuration:this.$35,startTime:this.$23,trigger:this.$6,signalingTime:this.$26,escStateTimes:this.$27,applicationEventTime:this.$28,videoEscTimes:this.$29,endCallReason:this.$14,endCallSubreason:this.$15,isRemoteEnded:this.$16,lastUpdatedTime:this.$20,lastSerializedTime:this.$21,unsetOnRetrieve:this.$19,extraInfo:this.$40,gen0IceSentCount:this.$30,gen0IceReceivedCount:this.$31,iceSentCount:this.$32,iceReceivedCount:this.$33,connectionType:this.$17,accumulatedCallTime:this.$42(),videoReceivedCodec:this.$36,videoSentCodec:this.$37,audioSentCodec:this.$38,relayIP:this.$18,clientVersion:this.$7})};c.unsetEndCallFields=function(){this.$14=null,this.$15=null,this.$16=null,delete this.$26[n.CALL_ENDED],this.$25=0,this.$19=null};c.isNull=function(){return this.$1==="0"&&this.$2==="0"&&!this.$4&&this.$6==="NULL_SUMMARY"};c.getLastUpdatedTime=function(){return this.$20};c.save=function(a){a.storeCallSummary(this.$1,this.$2,this),this.$22=(g||(g=b("performanceNow")))()};c.onCallAccepted=function(a){this.$28[j.PRESSED_ANSWER]=this.$42(),this.$6=a,this.$41()};c.onCallEnded=function(a,b,c,d){this.$19=c,this.$14=a,this.$15=d,this.$16=b,this.$43(n.CALL_ENDED),this.$41()};c.onInviteResponded=function(){var a=this.$8==="p2p"?n.SENT_OFFER_ACK:n.SENT_RING_RESPONSE;this.$43(a);this.$41()};c.onInviteReceived=function(){var a=this.$8==="p2p"?n.RECV_OFFER:n.RECV_RING_REQUEST;this.$43(a);this.$41()};c.onInviteSent=function(){this.$43(n.SENT_JOIN_REQUEST),this.$41()};c.onMediaConnected=function(){this.$43(n.NETWORK_READY),this.$41()};c.setIsPeerMobile=function(a){this.$40[o.PEER_IS_MOBILE]=a?"1":"0",this.$41()};c.setCallType=function(a){this.$12=a,this.$41()};c.setInitByPageID=function(a){this.$40[o.INITIATED_BY_PAGE_ID]=a,this.$41()};c.setInitByAppID=function(a){a!=null&&(this.$40[o.INITIATED_BY_APP_ID]=a,this.$41())};c.$43=function(a){if(this.$26[a]!=null)return;this.$26[a]=this.$42()};c.$42=function(){var a=(g||(g=b("performanceNow")))()-this.$25;return Math.floor(this.$24+a)};c.$41=function(){this.$20=new Date().valueOf()};c.toString=function(){var a={core_metrics:this.$44(),time_series:null};return JSON.stringify(a)};c.$44=function(){return{ver:this.$3,log_level:this.$45(this.$5),caller:this.$4,call_type:this.$12,active_conn:this.$8,app_event_times:this.$28,conf_name:this.$9,join_with_sid:this.$10,esc_p2p_call_id:this.$11,esc_state_times:this.$27,vid_esc_times:this.$29,serv_info:this.$13,peer_id:this.$1,open_count:this.$39,signaling:this.$46(),push_phase:b("SiteData").push_phase,client_version:this.$7}};c.$45=function(a){switch(a){case i.LL_BASIC:return"basic";case i.LL_DEBUG:return"debug";case i.LL_WARNING:return"warning";case i.LL_INFO:return"info";case i.LL_VERBOSE:return"verbose";default:return""}};c.$46=function(){var a={start_time:this.$23,time_from_start:this.$26};this.$6!=null&&(a.trigger=this.$6);var b=this.$47();b>0&&(a.duration=b);return a};c.$47=function(a){var b=this.$26[n.CALL_CONNECTED]||this.$26[n.NETWORK_READY];if(!b)return 0;a=this.$26[n.CALL_ENDED]||!(a==null?void 0:a.assumeOngoing)&&this.$24||this.$42();return Math.max(0,a-b)};return a}();e.exports=a}),null);
__d("ZenonCallSummaryStore",["CacheStorage","FBLogger","ZenonCallSummary","areEqual","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3;a=function(){__p&&__p();function a(){this.$1=new(b("CacheStorage"))(h,i)}var c=a.prototype;c.getCallSummaries=function(){return this.$1.get(j)||{}};c.retrieveCallSummary=function(a,c){var d=this.getCallSummaries();d=d[a]?d[a][c]:null;if(d)return b("ZenonCallSummary").fromJsonString(d.__d);else return null};c.removeCallSummaries=function(a){this.$2(function(b){a.forEach(function(a){var c=a.peerID;a=a.callID;b[c]&&(b[c][a]&&(delete b[c][a],Object.entries(b[c]).length===0&&delete b[c]))});return b})};c.storeCallSummary=function(a,c,d){if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid ZenonCallSummary!");return}this.$2(function(b){b[a]||(b[a]={});b[a][c]={__d:d.toJsonString(),__t:Date.now(),__z:!0};return b})};c.$2=function(a,c,d){var e=this;c===void 0&&(c=l);d===void 0&&(d=!1);var f=this.getCallSummaries(),h=this.getCallSummaries();f=a(f);var i=this.getCallSummaries();(g||(g=b("areEqual")))(h,i)?this.$1.set(j,f):c>0&&(d?b("setTimeout")(function(){e.$2(a,c-1,!0)},k):this.$2(a,c-1,!0))};return a}();c=new a();e.exports={ZenonCallSummaryStoreInstance:c}}),null);
__d("ZenonMediaError",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ICE_FAILURE:"ICE failed",ICE_DISCONNECTED:"Connection Dropped"});e.exports={ZenonMediaError:a}}),null);
__d("ZenonDismissReason",["ZenonMediaError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;f=b("ZenonMediaError").ZenonMediaError;b=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,JOIN_APPROVAL_DENIED:24,REJECTED_BY_CALLEE:25,CALL_ENDED_BY_PRODUCT:26,CALL_ENDED:27,ANSWERED_ON_ANOTHER_DEVICE:28,REJECTED_ON_ANOTHER_DEVICE:29,CALL_COLLISION:30,MAX_ALLOWED_PARTICIPANTS_REACHED:31});function a(a){return h[a]}function c(a){return i[a]}function d(a){return j[a]}var h=Object.freeze({HangupCall:b.HANGUP_CALL,IgnoreCall:b.IGNORE_CALL,InAnotherCall:b.IN_ANOTHER_CALL,CallEndAcceptAfterHangUp:b.ACCEPT_AFTER_HANGUP,NoAnswerTimeout:b.NO_ANSWER_TIMEOUT,IncomingTimeout:b.INCOMING_TIMEOUT,OtherInstanceHandled:b.OTHER_INSTANCE_HANDLED,SignalingMessageFailed:b.SIGNALING_MESSAGE_FAILED,ConnectionDropped:b.CONNECTION_DROPPED,ClientInterrupted:b.CLIENT_INTERRUPTED,WebRTCError:b.WEBRTC_ERROR,ClientError:b.CLIENT_ERROR,NoPermission:b.NO_PERMISSION,OtherNotCapable:b.OTHER_NOT_CAPABLE,NoUIShown:b.NO_UI_ERROR,VersionUnsupported:b.UNSUPPORTED_VERSION,CallerNotVisible:b.CALLER_NOT_VISIBLE,CarrierBlocked:b.CARRIER_BLOCKED,OtherCarrierBlocked:b.OTHER_CARRIER_BLOCKED,ClientEncryptionError:b.CLIENT_ENCRYPTION_ERROR,InactiveTimeout:b.CALL_ENDED,Unknown:b.CALL_ENDED}),i=Object.freeze((g={},g[b.HANGUP_CALL]="HangupCall",g[b.IGNORE_CALL]="IgnoreCall",g[b.IN_ANOTHER_CALL]="InAnotherCall",g[b.ACCEPT_AFTER_HANGUP]="CallEndAcceptAfterHangUp",g[b.NO_ANSWER_TIMEOUT]="NoAnswerTimeout",g[b.INCOMING_TIMEOUT]="IncomingTimout",g[b.OTHER_INSTANCE_HANDLED]="OtherInstanceHandled",g[b.SIGNALING_MESSAGE_FAILED]="SignalingMessageFailed",g[b.CONNECTION_DROPPED]="ConnectinDropped",g[b.CLIENT_INTERRUPTED]="ClientInterrupted",g[b.WEBRTC_ERROR]="WebRTCError",g[b.CLIENT_ERROR]="ClientError",g[b.NO_PERMISSION]="NoPermission",g[b.OTHER_NOT_CAPABLE]="OtherNotCapable",g[b.NO_UI_ERROR]="NoUIShown",g[b.UNSUPPORTED_VERSION]="VersionUnsupported",g[b.CALLER_NOT_VISIBLE]="CallerNotVisible",g[b.CARRIER_BLOCKED]="CarrierBlocked",g[b.OTHER_CARRIER_BLOCKED]="OtherCarrierBlocked",g[b.CLIENT_ENCRYPTION_ERROR]="ClientEncryptionError",g)),j=Object.freeze((g={},g[f.ICE_FAILURE]=b.WEBRTC_ERROR,g[f.ICE_DISCONNECTED]=b.CONNECTION_DROPPED,g));e.exports={endCallToDismissReason:a,dismissToEndCallReason:c,mediaErrorToDismissReason:d,ZenonDismissReason:b}}),null);
__d("ZenonParentCallSummaryLogProcessor",["CurrentUser","FBRTCCallSummaryStore","ZenonCallSummary","ZenonDismissReason","gkx","pageID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonDismissReason").ZenonDismissReason;a=function(){__p&&__p();function a(a){this.$2=b("FBRTCCallSummaryStore").getInstance(),this.$3=a.protocol,this.$3==="mw"&&(a.peerID="MW_PEER_ID"),this.$1=new(b("ZenonCallSummary"))(a)}var c=a.prototype;c.$4=function(a){if(a!=null){a=a.deviceID;a=a==="mobile";this.$1.setIsPeerMobile(a)}};c.processEvent=function(a){__p&&__p();switch(a.name){case"inviteResponded":this.$1.onInviteResponded();break;case"inviteReceived":this.$1.onInviteReceived();this.$4(a.remoteDeviceInfo);break;case"callEnded":this.$5(a);break;case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(this.$2);break;case"popupOpened":this.$6(a);this.$1.save(this.$2);break}};c.$6=function(a){this.$1.setInitByPageID(b("pageID")),this.$1.setInitByAppID(b("CurrentUser").getAppID()),this.$1.onCallEnded(g.CLIENT_ERROR,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(this.$2)};c.$5=function(a){if(this.$3==="mw"&&a.isRemoteEnded)return;var c=a.endCallReason,d=a.isRemoteEnded;a=a.endCallSubreason;var e=b("gkx")("1148995");if(!e&&c===g.OTHER_INSTANCE_HANDLED&&d)return;this.$1.onCallEnded(c,d,!1,a);this.$1.save(this.$2)};return a}();e.exports=a}),null);
__d("ZenonCollisionContext",[],(function(a,b,c,d,e,f){function a(a){var b=null;a.groupThreadID!=null?b={id:a.groupThreadID,type:2}:a.peerID!=null&&(b={id:a.peerID,type:1});return b}e.exports={getThreadIDAndTypeFromCollisionContext:a}}),null);
__d("ZenonParticipantState",[],(function(a,b,c,d,e,f){"use strict";b=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,NEGOTIATING:8,CONNECTING:9,CONNECTED:10,PARTICIPANT_LIMIT_REACHED:11,IN_ANOTHER_CALL:12,RING_TYPE_UNSUPPORTED:13});function a(a){return a==null?"disconnected":g[a]}var g=Object.freeze((c={},c[b.UNKNOWN]="disconnected",c[b.DISCONNECTED]="disconnected",c[b.NO_ANSWER]="disconnected",c[b.REJECTED]="disconnected",c[b.UNREACHABLE]="disconnected",c[b.CONNECTION_DROPPED]="disconnected",c[b.CONTACTING]="contacting",c[b.RINGING]="ringing",c[b.NEGOTIATING]="connecting",c[b.CONNECTING]="connecting",c[b.CONNECTED]="connected",c[b.PARTICIPANT_LIMIT_REACHED]="disconnected",c[b.IN_ANOTHER_CALL]="disconnected",c[b.RING_TYPE_UNSUPPORTED]="disconnected",c));e.exports={ZenonParticipantState:b,toCallParticipantState:a}}),null);
__d("LazyLoadInstance",["promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={NOT_READY:0,LOADING:1,READY:2};a=function(){__p&&__p();function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:g.NOT_READY}}var c=a.prototype;c.get=function(a){switch(this.$1.stage){case g.NOT_READY:b("promiseDone")(this.$2(this.$1),a);break;case g.LOADING:b("promiseDone")(this.$1.instancePromise,a);break;case g.READY:a(this.$1.instance);break}};c.getNow=function(){return this.$1.stage===g.READY?this.$1.instance:null};c.preload=function(){this.$1.stage===g.NOT_READY&&this.$2(this.$1)};c.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:g.READY};return a});this.$1={instancePromise:a,stage:g.LOADING};return a};return a}();e.exports=a}),null);
__d("ZenonOfferStorage",["CacheStorage"],(function(a,b,c,d,e,f){var g="localstorage",h="RTC_",i="offer",j="offer_msg",k={writePeerOfferToStorage:function(a,b){a=k.getStorage(a,j);k._storeData(a,i,b)},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=k}),null);
__d("CallEndReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_CALL:"IgnoreCall",HANGUP_CALL:"HangupCall",IN_ANOTHER_CALL:"InAnotherCall",ACCEPT_AFTER_HANGUP:"CallEndAcceptAfterHangUp",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",INCOMING_TIMEOUT:"IncomingTimeout",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",CONNECTION_DROPPED:"ConnectionDropped",CLIENT_INTERRUPTED:"ClientInterrupted",WEBRTC_ERROR:"WebRTCError",CLIENT_ERROR:"ClientError",NO_PERMISSION:"NoPermission",OTHER_NOT_CAPABLE:"OtherNotCapable",NO_UI_ERROR:"NoUIShown",UNSUPPORTED_VERSION:"VersionUnsupported",CALLER_NOT_VISIBLE:"CallerNotVisible",CARRIER_BLOCKED:"CarrierBlocked",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError"})}),null);
__d("WebrtcMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",HANG_UP:"hang_up",OTHER_DISMISS:"other_dismiss",MESSAGE_ACK:"msg_ack",PRANSWER:"pranswer",PING:"ping",PING_ACK:"ping_ack",ICE_RESTART_OFFER:"icerestart_offer",ICE_RESTART_ANSWER:"icerestart_answer",OFFER_ACK:"offer_ack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",ACK:"ack",INVALID:"invalid",OFFER_NACK:"offer_nack",NACK:"nack",VIDEO_REQUEST:"video_request",SDP_UPDATE:"sdp_update",SWITCH_TO_MULTIWAY:"switch_to_multiway",ON_HOLD:"on_hold",NEGOTIATE:"negotiate",RING:"ring",PR_OFFER_ACK:"pr_offer_ack",NOTIFY_MEDIA_STATE:"notify_media_state",CLIENT_REPORTED_EVENT:"client_reported_event"})}),null);
__d("ZenonP2PMessageTypes",["WebrtcMessageType","CallEndReason"],(function(a,b,c,d,e,f){e.exports={ZenonP2PSignalingPayloadType:b("WebrtcMessageType"),ZenonP2PCallEndReason:b("CallEndReason")}}),null);
__d("ZenonSignalingTypes",[],(function(a,b,c,d,e,f){a={OK:0,REJECTED_FROM_VERSION_DOES_NOT_MATCH:1};e.exports={ZenonRemoteSdpResponseStatus:a}}),null);
__d("ZenonStateMachineLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a=function(){__p&&__p();a.getInstance=function(){g||(g=new a());return g};function a(){this.$1=b("LogHistory").getInstance("webrtc")}var c=a.prototype;c.log=function(a,c,d,e){var f=b("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});a=e==null?a:a+": "+e;e=f+" ["+a+"] [Current State: "+c+"] Processing event: "+d;this.$1.log("Console",e)};return a}();e.exports=a}),null);
__d("ZenonParentSignalingClient",["ZenonSignalingTypes","ZenonStateMachineLogger","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus;a=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,c,d){b("ZenonStateMachineLogger").getInstance().log("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1);switch(a.eventName){case"inviteRequest":f.$11(a,c,d);break;case"remoteSdpRequest":f.$12(a,c);break;case"terminateRequest":f.$13(a,c,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=c;c.setReceiver(this.$9)}var c=a.prototype;c.setSignalingEventHandlers=function(a){if(this.$6!=null){b("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$6=a};c.setLoggingEventHandler=function(a){this.$8=a};c.getSignalingId=function(){return this.$1};c.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",reason:a,shouldInformPeer:!0};this.$10(a)};c.receiveMessage=function(a){this.$2.receiveMessage(a)};c.isTerminated=function(){return this.$4=="terminated"};c.sendAnswerIntent=function(){if(this.$4=="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};this.$10(a)}else throw b("unrecoverableViolation")("sendAnswerIntent called in unexpected state "+this.$4,"rtc_www")};c.respondToInvite=function(a){if(this.$4=="inviteReceived"){if(this.$7==null)throw b("unrecoverableViolation")("respondToInvite called without inviteMessageId being populated first","rtc_www");this.$4="inviteAcknowledged";a={eventName:"inviteResponse",ackMessageId:this.$7,status:a};this.$10(a)}else throw b("unrecoverableViolation")("respondToInvite called in unexpected state "+this.$4,"rtc_www")};c.sendInvite=function(a,c){throw b("unrecoverableViolation")("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendSdp=function(a,c){throw b("unrecoverableViolation")("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendIceCandidate=function(a){throw b("unrecoverableViolation")("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendMediaUpdate=function(a){throw b("unrecoverableViolation")("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendAddParticipantsMessage=function(a){throw b("unrecoverableViolation")("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendClientInfo=function(a){throw b("unrecoverableViolation")("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.$10=function(a){b("ZenonStateMachineLogger").getInstance().log("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1),this.$3.sendEvent(a)};c.$11=function(a,c,d){if(this.$4=="init")this.$4="inviteReceived",this.$7=c,this.$5(a,d,this);else throw b("unrecoverableViolation")("_handleReceivedInviteRequest called in unexpected state "+this.$4,"rtc_www")};c.$13=function(a,b,c){if(this.$4!="terminated"){this.$4="terminated";c={eventName:"dismissResponse",ackMessageId:b};this.$3.sendEvent(c);this.$6&&this.$6.onDismissReceived&&this.$6.onDismissReceived(this.$1,a.reason)}};c.$12=function(a,b){b={eventName:"remoteSdpResponse",ackMessageId:b,type:a.sdp.type,acknowledgedVersion:a.sdp.version,negotiateType:a.negotiateType,status:g.OK};this.$3.sendEvent(b)};return a}();e.exports=a}),null);
__d("ZenonParentCallsManager",["BaseEventEmitter","JSResource","LazyLoadInstance","ZenonCallLogger","ZenonCollisionContext","ZenonDismissReason","ZenonOfferStorage","ZenonP2PMessageTypes","ZenonParentCallSummaryLogProcessor","ZenonParentSignalingClient","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext,h=b("ZenonDismissReason").ZenonDismissReason,i=b("ZenonDismissReason").endCallToDismissReason,j=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.$ZenonParentCallsManager4=new Map();d.$ZenonParentCallsManager5=new Set();d.$ZenonParentCallsManager6=new Map();d.$ZenonParentCallsManager7=new Map();d.getRawMessages=function(a){return(a=d.$ZenonParentCallsManager6.get(a))!=null?a:null};d.onInviteReceived=function(a,b,c){__p&&__p();var e=c.getSignalingId();c.setSignalingEventHandlers({onDismissReceived:d.onDismissReceived});var f=a.inviterID,h=a.otherParticipants,i=a.requestingVideo;a=a.roomInfo;var j="zenon_incoming_call_dialog",k=d.$ZenonParentCallsManager8({protocol:b,peerID:f,isCaller:!1,callTrigger:j,callID:e,isVideo:i});k.log({name:"inviteReceived"});j=d.$ZenonParentCallsManager3.isSupportedClientForProtocol(b);var l=j?"OK":"NOT_SUPPORTED";c.respondToInvite(l);k.log({name:"inviteResponded"});l={id:"0",type:2};if(a.context){var m;l=(m=g(a.context))!=null?m:l}l={ringID:e,inviterID:f,otherParticipants:h,requestingVideo:i,thread:l,isClientPermissableRing:j,onAccept:function(a,g){var h=g.isPopupBlocked;g=g.trigger;k.log({name:"callAccepted",trigger:g});d.$ZenonParentCallsManager10(f);c.sendAnswerIntent();d.$ZenonParentCallsManager9(a,{isVideo:i,protocol:b,isPopupBlocked:h,callTrigger:g,callID:e,peerID:f})},onDecline:function(a,b){b===void 0&&(b=null),d.onDecline(e,k,a,b)},controllerParams:{callContext:a.name,callID:e,serverInfoData:(h=(m=a.context)==null?void 0:m.serverInfoData)!=null?h:null,configuration:b}};d.emit("incomingRing",l)};d.onDismissReceived=function(a,b){var c=b===h.OTHER_INSTANCE_HANDLED?"other_dismiss":"hangup";c={ringID:a,reason:c};d.emit("ringCancel",c);c=d.$ZenonParentCallsManager4.get(a);c!=null&&c.log({name:"callEnded",endCallReason:b,isRemoteEnded:!0})};d.$ZenonParentCallsManager3=c;d.$ZenonParentCallsManager2=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingParentTransport").__setRef("ZenonParentCallsManager"),function(a){a=new a();a.init(d.getRawMessages);return a});d.$ZenonParentCallsManager1=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(b("ZenonParentSignalingClient"),d.onInviteReceived)});return d}var d=c.prototype;d.startOutgoingCallIntent=function(a,b){var c=b.peerID,d=b.callID,e=b.callTrigger,f=b.protocol,g=b.isVideo;this.$ZenonParentCallsManager8({peerID:c,callID:d,callTrigger:e,protocol:f,isCaller:!0,isVideo:g});this.$ZenonParentCallsManager9(a,b)};d.$ZenonParentCallsManager8=function(a){var c=a.callID,d=a.callTrigger,e=a.isCaller,f=a.peerID,g=a.protocol;a=a.isVideo;var h=this.$ZenonParentCallsManager4.get(c);!h?(h=new(b("ZenonCallLogger"))({callID:c,peerID:f,callTrigger:d,isCaller:e,protocol:g,isVideo:a},[b("ZenonParentCallSummaryLogProcessor")]),this.$ZenonParentCallsManager4.set(c,h)):b("recoverableViolation")("Call logger key collision in parentCallsManager for callID: "+c,"rtc_www");return h};d.$ZenonParentCallsManager9=function(a,b){var c=b.callID;b.isVideo;b=b.isPopupBlocked;this.$ZenonParentCallsManager2.get(function(b){b.verificationNonce=a});this.$ZenonParentCallsManager5.add(c);c=this.$ZenonParentCallsManager4.get(c);c!=null&&c.log({name:"popupOpened",isPopupBlocked:b})};d.initListeners=function(a){__p&&__p();var b=this;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.subscribe(function(a){return b.onMessageReceived(a)},function(a){return b.onRawMessageReceived(a)})}};d.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager5.has(b))return;this.$ZenonParentCallsManager1.get(function(b){b.receiveMessage(a)})};d.onRawMessageReceived=function(a){var b=String(a.from);if(a.msg_type!==j.OFFER){var c=this.$ZenonParentCallsManager6.get(b);c||(c=[],this.$ZenonParentCallsManager6.set(b,c));c.push(a)}else this.$ZenonParentCallsManager7.set(b,a)};d.onDecline=function(a,c,d,e){e===void 0&&(e=null),this.$ZenonParentCallsManager1.get(function(f){f=f.getSignalingClient(a);if(f){var g=i(d);d!=="NoAnswerTimeout"&&d!=="VersionUnsupported"&&e!=="CallsBlocked"&&f.sendDismiss(g);c.log({name:"callEnded",endCallReason:g,isRemoteEnded:!1,endCallSubreason:e})}else b("recoverableViolation")("signaling client should be defined","rtc_www")})};d.removeListeners=function(a){__p&&__p();for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}};d.$ZenonParentCallsManager10=function(a){var c=this.$ZenonParentCallsManager7.get(a);c&&b("ZenonOfferStorage").writePeerOfferToStorage(a,c)};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("ZenonSignalingMessage",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getHeader=function(){return this.$1};b.getEvents=function(){return this.$2};b.setSignalingID=function(a){this.$1.signalingID=a};return a}();e.exports=a}),null);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7})}),null);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10})}),null);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9})}),null);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6})}),null);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NotPaused:0,Paused:1})}),null);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,P2P_PROTOCOL:19,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,SUBSCRIBE:24,UNSUBSCRIBE:25})}),null);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12})}),null);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6})}),null);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503})}),null);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_CONNECT_REQUEST:2109,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_CONNECT_REQUEST:2117,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,SHOULD_USE_NEW_SIGNALING_PATH:3007,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,OK:9e3})}),null);
__d("ZenonMWMessageTypes",["multiway_Capability","multiway_DeviceStatus","multiway_DismissReason","multiway_HangupReason","multiway_MediaPauseStatus","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_MessageType"],(function(a,b,c,d,e,f){"use strict";e.exports={ZenonMWCapability:b("multiway_Capability"),ZenonMWDeviceStatus:b("multiway_DeviceStatus"),ZenonMWDismissReason:b("multiway_DismissReason"),ZenonMWHangupReason:b("multiway_HangupReason"),ZenonMWMediaPauseStatus:b("multiway_MediaPauseStatus"),ZenonMWParticipantCallState:b("multiway_ParticipantCallState"),ZenonMWRingType:b("multiway_RingType"),ZenonMWResponseStatusCode:b("multiway_RtcResponseStatusCode"),ZenonMWResponseSubCode:b("multiway_RtcResponseSubCode"),ZenonMWSignalingPayloadType:b("multiway_MessageType")}}),null);
__d("ZenonMWTranslatorUtils",["ChannelClientID","CurrentUser","FacebookAppIDs","ZenonDismissReason","ZenonMWMessageTypes","ZenonParticipantState","ZenonSignalingTypes","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonDismissReason").ZenonDismissReason,h=(a=b("ZenonMWMessageTypes")).ZenonMWDeviceStatus;c=a.ZenonMWDismissReason;var i=a.ZenonMWHangupReason,j=a.ZenonMWParticipantCallState,k=a.ZenonMWResponseStatusCode,l=a.ZenonMWResponseSubCode;d=b("ZenonParticipantState").ZenonParticipantState;f=b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus;var m={mwMessageHeaderToSignalingMessageHeader:function(a){var b=a.conferenceName,c=a.transactionId,d=a.clientSessionId;a=a.serverInfoData;d=d;var e={userID:"2"};c={messageID:c,roomInfo:{name:b},signalingID:d,protocol:"mw",userInfo:{userID:"1"},remoteInfo:e};a!=null&&(c.remoteSignalingID=a);return c},signalingMessageHeaderToMWHeader:function(a,b){var c=a.messageID,d=a.roomInfo,e=a.signalingID;a=a.remoteSignalingID;d={conferenceName:d.name,transactionId:c,retryCount:0,type:b};e!=null&&(d.clientSessionId=e);a!=null&&(d.serverInfoData=a);return d},signalingMessageHeaderToMWResponseHeader:function(a,b,c){a=m.signalingMessageHeaderToMWHeader(a,b);a.responseStatusCode=(b=c)!=null?b:k.OK;return a},createMWMessage:function(a,c){var d={appId:m.getMWAppID(),deviceId:b("ChannelClientID").getID(),userId:b("CurrentUser").getID()};return{endpoint:d,jsonPayload:{body:c,header:a}}},getMWAppID:function(){return b("FacebookAppIDs").MQTT_WEB.toString()},getCollisionContextFromAppMessages:function(a){__p&&__p();var b=null,c=null,d=null;a!=null&&a.forEach(function(a){__p&&__p();a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var e;a=JSON.parse(a);b=(e=a.group_thread_id)!=null?e:null;c=(e=a.peer_id)!=null?e:null;d=(e=a.server_info_data)!=null?e:null}}});return{groupThreadID:b,peerID:c,serverInfoData:d}},fromMWDismissReason:function(a){a=o[a];return(a=a)!=null?a:g.CALL_ENDED},fromMWJoinResponseStatusToDismissReason:function(a,b){if(b===l.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return g.MAX_ALLOWED_PARTICIPANTS_REACHED;switch(a){case k.METHOD_NOT_ALLOWED:case k.UNAUTHORIZED:return g.NO_PERMISSION;case k.SERVICE_UNAVAILABLE:return g.SIGNALING_MESSAGE_FAILED;case k.OK:throw new Error("Response status code is OK; should not return a dismiss reason");default:return g.CLIENT_ERROR}},fromMWParticipantState:function(a){a=q[a];return(a=a)!=null?a:j.UNKNOWN},toMWHangupReason:function(a){a=p[a];return(a=a)!=null?a:i.HANGUP_CALL},toMWDeviceStatus:function(a){a=n[a];return(a=a)!=null?a:h.OK},toZenonMediaStates:function(a){var b={tracks:[],version:0};Object.keys(a.tracks).forEach(function(c){var d=a.tracks[c];c={trackID:c,userID:d.owner,enabled:d.enabled};b.tracks.push(c);b.version++});return b},toMWMediaStatus:function(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b},toMWClientMediaStatus:function(a){var b={tracks:{}};a.tracks.forEach(function(a){b.tracks[a.trackID]={enabled:a.enabled,owner:a.userID}});return b},toMWResponseStatusCode:function(a){return r[a]},getSdpVersion:function(a){__p&&__p();a=a.split("\n");if(a.length<2)throw b("unrecoverableViolation")("Expected SDP string with two or more lines, but got "+a.length,"rtc_www");a=a[1].trim();a=a.split(" ");if(a.length<3)throw b("unrecoverableViolation")("Session line should have at least 3 tokens, but got "+a.length,"rtc_www");a=parseInt(a[2],10);if(isNaN(a))throw b("unrecoverableViolation")("SDP version could not be parsed as number.","rtc_www");return a}},n={OK:h.OK,NOT_SUPPORTED:h.NOT_SUPPORTED,IN_ANOTHER_CALL:h.IN_ANOTHER_CALL},o=Object.freeze((a={},a[c.CALL_ENDED]=g.CALL_ENDED,a[c.ANSWERED_ON_ANOTHER_DEVICE]=g.ANSWERED_ON_ANOTHER_DEVICE,a[c.IN_ANOTHER_CALL]=g.IN_ANOTHER_CALL,a[c.CONNECTION_DROPPED]=g.CONNECTION_DROPPED,a[c.REJECTED_ON_ANOTHER_DEVICE]=g.REJECTED_ON_ANOTHER_DEVICE,a[c.REJECTED_BY_CALLEE]=g.REJECTED_BY_CALLEE,a[c.CALL_ENDED_BY_PRODUCT]=g.CALL_ENDED_BY_PRODUCT,a[c.INTERNAL_ERROR]=g.CLIENT_ERROR,a[c.REMOVED_BY_PARTICIPANT]=g.HANGUP_CALL,a)),p=Object.freeze((c={},c[g.IGNORE_CALL]=i.IGNORE_CALL,c[g.HANGUP_CALL]=i.HANGUP_CALL,c[g.NO_ANSWER_TIMEOUT]=i.NO_ANSWER_TIMEOUT,c[g.CLIENT_ERROR]=i.CLIENT_ERROR,c[g.IN_ANOTHER_CALL]=i.IN_ANOTHER_CALL,c[g.CLIENT_INTERRUPTED]=i.CLIENT_INTERRUPTED,c[g.SESSION_MIGRATED]=i.SESSION_MIGRATED,c)),q=Object.freeze((a={},a[j.UNKNOWN]=d.UNKNOWN,a[j.DISCONNECTED]=d.DISCONNECTED,a[j.NO_ANSWER]=d.NO_ANSWER,a[j.REJECTED]=d.REJECTED,a[j.UNREACHABLE]=d.UNREACHABLE,a[j.CONNECTION_DROPPED]=d.CONNECTION_DROPPED,a[j.CONTACTING]=d.CONTACTING,a[j.RINGING]=d.RINGING,a[j.CONNECTING]=d.CONNECTING,a[j.CONNECTED]=d.CONNECTED,a[j.PARTICIPANT_LIMIT_REACHED]=d.PARTICIPANT_LIMIT_REACHED,a[j.IN_ANOTHER_CALL]=d.IN_ANOTHER_CALL,a[j.RING_TYPE_UNSUPPORTED]=d.RING_TYPE_UNSUPPORTED,a)),r=Object.freeze((c={},c[f.OK]=k.OK,c[f.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=k.CONDITIONAL_REQUEST_FAILED,c));e.exports=m}),null);
__d("ZenonMWMessageTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils","ZenonSignalingMessage","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a=b("ZenonMWMessageTypes")).ZenonMWCapability,h=a.ZenonMWResponseStatusCode,i=a.ZenonMWRingType,j=a.ZenonMWSignalingPayloadType,k="joining_context";c={toSignalingMessage:function(a){__p&&__p();var c=a.jsonPayload.header,d=c.type,e=c.responseStatusCode==null;c=b("ZenonMWTranslatorUtils").mwMessageHeaderToSignalingMessageHeader(c);var f=[];switch(d){case j.RING:e&&(f=m(a));break;case j.DISMISS:e&&(f=n(a));break;case j.JOIN:e||(f=o(a));break;case j.ICE_CANDIDATE:e&&(f=p(a));break;case j.CONFERENCE_STATE:e&&(f=q(a));break;case j.CLIENT_MEDIA_UPDATE:e||(f=r(a));break;case j.SERVER_MEDIA_UPDATE:e&&(f=s(a));break;case j.PING:e||(f=l(a));break}return new(b("ZenonSignalingMessage"))(c,f)},toMWMessage:function(a){__p&&__p();var b=a.getHeader();a=a.getEvents();if(a.length===0)throw new Error("Unexpected Translation: called toMWMessage with empty signaling events");else{var c=a[0];switch(c.eventName){case"addParticipantsRequest":return t(b,c);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="offer")return v(b,c,a[1]);break;case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return v(b,a[1],a[2],c);break;case"inviteResponse":return w(b,c);case"dismissResponse":return y(b);case"iceCandidateRequest":return u(b,c);case"mediaUpdateRequest":return B(b,c.mediaStates);case"participantUpdateResponse":return A(b,c);case"pingRequest":return z(b);case"remoteSdpResponse":if(c.type==="offer")return a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer"?C(b,c,a[1]):C(b,c);break;case"localSdpRequest":return B(b,c.mediaStates,c.sdp);case"terminateRequest":return x(b,c)}}return null}};function l(a){__p&&__p();var b=[];a=a.jsonPayload;var c=a.header;a=a.body;a=a.pingResponse;if(a){a={eventName:"pingResponse",ackMessageId:c.transactionId};b.push(a)}return b}function m(a){__p&&__p();var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.ringRequest;if(a){var e=a.otherParticipants,f=a.caller,g=a.ringType;a=a.appMessages;f=f;g=g===i.PEER_VIDEO_CALL||g===i.GROUP_VIDEO_CALL||g===i.LIVE_STREAM||g===i.PEER_ESCALATED_AUDIO_CALL;d=d.conferenceName;a=b("ZenonMWTranslatorUtils").getCollisionContextFromAppMessages(a);d={eventName:"inviteRequest",roomInfo:{name:d,context:a},inviterID:f,otherParticipants:e,isRemoteOfferer:!1,requestingVideo:g};c.push(d)}return c}function n(a){var c=[];a=a.jsonPayload.body.dismissRequest;if(a){a=a.reason;a={eventName:"terminateRequest",reason:b("ZenonMWTranslatorUtils").fromMWDismissReason(a),shouldInformPeer:!0};c.push(a)}return c}function o(a){__p&&__p();var c=[],d=a.jsonPayload.header;if(d.responseStatusCode&&d.responseStatusCode!==h.OK){var e={eventName:"terminateRequest",reason:b("ZenonMWTranslatorUtils").fromMWJoinResponseStatusToDismissReason(d.responseStatusCode,d.responseSubCode),shouldInformPeer:!1};c.push(e);return c}e=a.jsonPayload.body.joinResponse;if(!e)return c;a={ackMessageId:d.transactionId,eventName:"localSdpResponse"};c.push(a);d=(a=(d=e.answer)==null?void 0:d.sdpString)!=null?a:"";if(d!==""){a={sdp:d,type:"answer",version:b("ZenonMWTranslatorUtils").getSdpVersion(d)};d=b("ZenonMWTranslatorUtils").toZenonMediaStates(e.mediaStatusEx);e={eventName:"remoteSdpRequest",sdp:a,mediaStates:d,negotiateType:!1};c.push(e)}a={eventName:"capabilitiesRequest",capabilities:{addParticipantEnabled:!0}};c.push(a);return c}function p(a){var b=[];a=a.jsonPayload.body.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){return{sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,candidateSdpString:(a=a.candidateSdpString)!=null?a:""}})};b.push(a)}return b}function q(a){__p&&__p();var c=[];a=a.jsonPayload.body.conferenceStateRequest;if(a){var d=a.participantStates,e={eventName:"participantUpdateRequest",participantStates:new Map(),versionId:a.version},f={eventName:"clientInfoRequest",userCapabilities:new Map()};Object.keys(d).forEach(function(a){var c=d[a],g=c.state;c=c.userCapabilities;e.participantStates.set(a,b("ZenonMWTranslatorUtils").fromMWParticipantState(g));f.userCapabilities.set(a,(g=c)!=null?g:"")});c.push(e);c.push(f)}return c}function r(a){__p&&__p();var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.clientMediaUpdateResponse;if(a){var e=a.answer,f=a.mediaStatus;if(e!=null&&f!=null){f=b("ZenonMWTranslatorUtils").toZenonMediaStates(f);var g={ackMessageId:d.transactionId,eventName:"localSdpResponse"};e={eventName:"remoteSdpRequest",negotiateType:!1,mediaStates:f,sdp:{sdp:(f=e.sdpString)!=null?f:"",type:"answer",version:a.currentVersion}};c.push(g);c.push(e)}else{f={ackMessageId:d.transactionId,eventName:"mediaUpdateResponse",requestVersionId:a.currentVersion};c.push(f)}}return c}function s(a){__p&&__p();var c=[];a=a.jsonPayload;var d=a.header;a=a.body;a=a.serverMediaUpdateRequest;if(!a)return c;d={eventName:"overlayConfigServerUpdateRequest",serializedConfig:(d=(d=d.extensions)==null?void 0:d.oc1)!=null?d:""};c.push(d);d=(d=(d=a.answer)==null?void 0:d.sdpString)!=null?d:"";var e="answer";if(d===""){var f;d=(f=(f=a.offer)==null?void 0:f.sdpString)!=null?f:"";e="offer"}if(d==="")return c;f={sdp:d,type:e,version:b("ZenonMWTranslatorUtils").getSdpVersion(d)};e=b("ZenonMWTranslatorUtils").toZenonMediaStates(a.mediaStatus);d={eventName:"remoteSdpRequest",sdp:f,mediaStates:e,negotiateType:!1,fromVersion:a.fromVersion};c.push(d);return c}function t(a,c){c={usersToInvite:c.participants};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.ADD_PARTICIPANTS);return b("ZenonMWTranslatorUtils").createMWMessage(a,{addParticipantsRequest:c})}function u(a,c){c=c.iceCandidates;c=c.map(function(a){return{sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,candidateSdpString:a.candidateSdpString}});c={iceCandidateSdps:c};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.ICE_CANDIDATE);return b("ZenonMWTranslatorUtils").createMWMessage(a,{iceCandidateRequest:c})}function v(a,c,d,e){c={offer:{sdpString:d.sdp.sdp},deviceCapabilities:[g.SUPPORT_NEW_PARTICIPANT_STATES,g.REQUIRE_FULL_SDP_IN_SMU,g.SUPPORT_SDP_RENEGOTIATION],userCapabilities:c.userCapabilities.get(a.userInfo.userID),mediaStatus:b("ZenonMWTranslatorUtils").toMWMediaStatus(d.mediaStates)};b("gkx")("1273355")&&c.deviceCapabilities.push(g.SUPPORT_MWPP);d=e==null?void 0:e.otherParticipants;d&&(c.usersToCall=d);e=(d=e==null?void 0:e.roomInfo.context)!=null?d:a.roomInfo.context;e&&(c.appMessages=[{header:{topic_DEPRECATED:k},body:{genericMessage:{topic:k,data:JSON.stringify(e)}}}]);d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.JOIN);e&&e.serverInfoData!=null&&(d.serverInfoData=e.serverInfoData);return b("ZenonMWTranslatorUtils").createMWMessage(d,{joinRequest:c})}function w(a,c){c=c.status;c=b("ZenonMWTranslatorUtils").toMWDeviceStatus(c);c={deviceCapabilities:[g.SUPPORT_AUDIO_DEPRECATED,g.SUPPORT_VIDEO_DEPRECATED],deviceStatus:c};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.RING);return b("ZenonMWTranslatorUtils").createMWMessage(a,{ringResponse:c})}function x(a,c){c=c.reason;c={reason:b("ZenonMWTranslatorUtils").toMWHangupReason(c),detailedReasonString:""};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.HANGUP);return b("ZenonMWTranslatorUtils").createMWMessage(a,{hangupRequest:c})}function y(a){a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.DISMISS);return b("ZenonMWTranslatorUtils").createMWMessage(a,{})}function z(a){var c=Object.freeze({});a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.PING);return b("ZenonMWTranslatorUtils").createMWMessage(a,{pingRequest:c})}function A(a,c){c={currentVersion:c.requestVersionId};a=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.CONFERENCE_STATE);return b("ZenonMWTranslatorUtils").createMWMessage(a,{conferenceStateResponse:c})}function B(a,c,d){c={fromVersion:c.version,mediaUpdates:[{mediaStatus:b("ZenonMWTranslatorUtils").toMWMediaStatus(c)}],toVersion:c.version};d!==void 0&&(c.offer={sdpString:d.sdp});d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWHeader(a,j.CLIENT_MEDIA_UPDATE);return b("ZenonMWTranslatorUtils").createMWMessage(d,{clientMediaUpdateRequest:c})}function C(a,c,d){if(c.acknowledgedVersion==null)throw new Error("Error creating ServerMediaUpdateResponse: remoteSdpResponse.acknowledgedVersion is null");var e={currentVersion:c.acknowledgedVersion};d&&(e.answer={sdpString:d.sdp.sdp},e.mediaStatus=b("ZenonMWTranslatorUtils").toMWClientMediaStatus(d.mediaStates));d=b("ZenonMWTranslatorUtils").signalingMessageHeaderToMWResponseHeader(a,j.SERVER_MEDIA_UPDATE,b("ZenonMWTranslatorUtils").toMWResponseStatusCode(c.status));return b("ZenonMWTranslatorUtils").createMWMessage(d,{serverMediaUpdateResponse:e})}e.exports=c}),null);
__d("ZenonP2PTranslatorUtils",["CurrentUser","ZenonDismissReason","ZenonP2PMessageTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonDismissReason").ZenonDismissReason,h=b("ZenonP2PMessageTypes").ZenonP2PCallEndReason;a={p2pMessageToSignalingMessageHeader:function(a,c){var d=c.call_id,e=c.from;c=c.source;var f=e+":"+b("CurrentUser").getID();return{messageID:a,roomInfo:{name:f},remoteSignalingID:String(d),signalingID:String(d),protocol:"p2p",userInfo:{userID:b("CurrentUser").getID()},remoteInfo:{userID:e,deviceInfo:{deviceID:c}}}},fromP2PCallEndReason:function(a){a=i[a];return(a=a)!=null?a:g.CALL_ENDED},toP2PCallEndReason:function(a){a=j[a];return(a=a)!=null?a:h.HANGUP_CALL}};var i=Object.freeze((c={},c[h.HANGUP_CALL]=g.HANGUP_CALL,c[h.IGNORE_CALL]=g.IGNORE_CALL,c[h.IN_ANOTHER_CALL]=g.IN_ANOTHER_CALL,c[h.ACCEPT_AFTER_HANGUP]=g.ACCEPT_AFTER_HANGUP,c[h.NO_ANSWER_TIMEOUT]=g.NO_ANSWER_TIMEOUT,c[h.INCOMING_TIMEOUT]=g.INCOMING_TIMEOUT,c[h.OTHER_INSTANCE_HANDLED]=g.OTHER_INSTANCE_HANDLED,c[h.SIGNALING_MESSAGE_FAILED]=g.SIGNALING_MESSAGE_FAILED,c[h.CONNECTION_DROPPED]=g.CONNECTION_DROPPED,c[h.CLIENT_INTERRUPTED]=g.CLIENT_INTERRUPTED,c[h.WEBRTC_ERROR]=g.WEBRTC_ERROR,c[h.CLIENT_ERROR]=g.CLIENT_ERROR,c[h.NO_PERMISSION]=g.NO_PERMISSION,c[h.OTHER_NOT_CAPABLE]=g.OTHER_NOT_CAPABLE,c[h.NO_UI_ERROR]=g.NO_UI_ERROR,c[h.UNSUPPORTED_VERSION]=g.UNSUPPORTED_VERSION,c[h.CALLER_NOT_VISIBLE]=g.CALLER_NOT_VISIBLE,c[h.CARRIER_BLOCKED]=g.CARRIER_BLOCKED,c[h.OTHER_CARRIER_BLOCKED]=g.OTHER_CARRIER_BLOCKED,c[h.CLIENT_ENCRYPTION_ERROR]=g.CLIENT_ENCRYPTION_ERROR,c)),j=Object.freeze((d={},d[g.HANGUP_CALL]=h.HANGUP_CALL,d[g.IGNORE_CALL]=h.IGNORE_CALL,d[g.IN_ANOTHER_CALL]=h.IN_ANOTHER_CALL,d[g.ACCEPT_AFTER_HANGUP]=h.ACCEPT_AFTER_HANGUP,d[g.NO_ANSWER_TIMEOUT]=h.NO_ANSWER_TIMEOUT,d[g.INCOMING_TIMEOUT]=h.INCOMING_TIMEOUT,d[g.OTHER_INSTANCE_HANDLED]=h.OTHER_INSTANCE_HANDLED,d[g.SIGNALING_MESSAGE_FAILED]=h.SIGNALING_MESSAGE_FAILED,d[g.CONNECTION_DROPPED]=h.CONNECTION_DROPPED,d[g.CLIENT_INTERRUPTED]=h.CLIENT_INTERRUPTED,d[g.WEBRTC_ERROR]=h.WEBRTC_ERROR,d[g.CLIENT_ERROR]=h.CLIENT_ERROR,d[g.NO_PERMISSION]=h.NO_PERMISSION,d[g.OTHER_NOT_CAPABLE]=h.OTHER_NOT_CAPABLE,d[g.NO_UI_ERROR]=h.NO_UI_ERROR,d[g.UNSUPPORTED_VERSION]=h.UNSUPPORTED_VERSION,d[g.CALLER_NOT_VISIBLE]=h.CALLER_NOT_VISIBLE,d[g.CARRIER_BLOCKED]=h.CARRIER_BLOCKED,d[g.OTHER_CARRIER_BLOCKED]=h.OTHER_CARRIER_BLOCKED,d[g.CLIENT_ENCRYPTION_ERROR]=h.CLIENT_ENCRYPTION_ERROR,d));e.exports=a}),null);
__d("ZenonP2PMessageTranslator",["errorCode","ZenonDismissReason","ZenonP2PMessageTypes","ZenonP2PTranslatorUtils","ZenonParticipantState","ZenonSignalingMessage"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ZenonDismissReason").ZenonDismissReason,i=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType,j=b("ZenonParticipantState").ZenonParticipantState,k=0,l=3;a={toP2PMessage:function(a){__p&&__p();var b=a.getHeader();a=a.getEvents();if(a.length===0)throw new Error("Unexpected Translation: called toP2PMessage with empty signaling events");switch(a[0].eventName){case"answerIntentRequest":return t(b);case"inviteResponse":if(a[0].status==="NOT_SUPPORTED")return r(b);else return q(b);case"terminateRequest":return s(b,a[0]);default:return null}},toSignalingMessage:function(a){switch(a.type){case i.OFFER:return m(a);case i.HANG_UP:return n(a);case i.OTHER_DISMISS:return o(a);case i.ICE_CANDIDATE:return p(a);default:return null}}};function m(a){__p&&__p();var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.escalation_conference_name,f=a.videoon,g=a.from;e={eventName:"inviteRequest",roomInfo:{name:e,context:{peerID:g,groupThreadID:null,serverInfoData:null}},inviterID:g,otherParticipants:[],isRemoteOfferer:!0,requestingVideo:f};d.push(e);f={eventName:"remoteSdpRequest",sdp:{sdp:a.sdp,type:"offer",version:0},mediaStates:{tracks:[],version:0},negotiateType:!1};d.push(f);e={eventName:"capabilitiesRequest",capabilities:{addParticipantEnabled:a.offer_escalation_support}};d.push(e);f=new Map([[g,j.CONNECTED]]);a={eventName:"participantUpdateRequest",participantStates:f,versionId:k};d.push(a);return new(b("ZenonSignalingMessage"))(c,d)}function n(a){var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.reason;a=a.from;e={eventName:"terminateRequest",reason:b("ZenonP2PTranslatorUtils").fromP2PCallEndReason(e),shouldInformPeer:!0};d.push(e);e=new Map([[a,j.DISCONNECTED]]);a={eventName:"participantUpdateRequest",participantStates:e,versionId:l};d.push(a);return new(b("ZenonSignalingMessage"))(c,d)}function o(a){a=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a);var c=[],d={eventName:"terminateRequest",reason:h.OTHER_INSTANCE_HANDLED,shouldInformPeer:!0};c.push(d);return new(b("ZenonSignalingMessage"))(a,c)}function p(a){var c=b("ZenonP2PTranslatorUtils").p2pMessageToSignalingMessageHeader(String(a.msg_id),a),d=[],e=a.sdp,f=a.sdp_line_idx;a=a.sdp_mid;e={candidateSdpString:e,sdpMLineIndex:f,sdpMid:a};f={eventName:"iceCandidateRequest",iceCandidates:[e]};d.push(f);return new(b("ZenonSignalingMessage"))(c,d)}function q(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");return{type:"offer_ack",ack_id:parseInt(a.messageID,10),call_id:parseInt(a.signalingID,10),msg_id:parseInt(a.messageID,10)}}function r(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");return{type:"offer_nack",ack_id:parseInt(a.messageID,10),call_id:parseInt(a.signalingID,10),msg_id:parseInt(a.messageID,10),error_code:1356043}}function s(a,c){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");var d=parseInt(a.messageID,10);a=parseInt(a.signalingID,10);c=b("ZenonP2PTranslatorUtils").toP2PCallEndReason(c.reason);return{reason:c,call_id:a,msg_id:d,type:"hang_up",version:0}}function t(a){if(a.signalingID===null)throw new Error("Unexpected P2P Translation: expected signalingID to not be null");var b=parseInt(a.signalingID,10);a=parseInt(a.messageID,10);return{call_id:b,msg_id:a,type:"other_dismiss"}}e.exports=a}),null);
__d("ZenonP2PMessageValidator",["ZenonP2PMessageTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType;a={validateAndTransformP2PMessage:function(a){__p&&__p();a=h(a);if(a){var b=a.msg_type;switch(b){case g.OFFER:return j(a);case g.HANG_UP:return k(a);case g.ICE_CANDIDATE:return i(a);case g.OTHER_DISMISS:return l(a)}}return null}};function h(a){a=JSON.parse(a);var b=a.from,c=a.call_id,d=a.id,e=a.msg_type,f=a.payload,g=a.source;a=a.type;if(b&&c&&f){c={call_id:c,from:b,id:d,msg_type:e,payload:f,source:g,type:a};return c}else throw Error("P2P message does not have valid from, call_id, and payload fields")}function i(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability,f=b.label,h=b.msg_id,i=b.version,j=b.sdp,k=b.sdp_line_idx;b=b.sdp_mid;c={from:c,source:a,call_id:d,capability:e,label:f,msg_id:h,sdp:j,sdp_line_idx:k,sdp_mid:b,type:g.ICE_CANDIDATE,version:i};return c}function j(a){__p&&__p();var b,c,d,e,f=a.payload,h=a.from;a=a.source;f=JSON.parse(f);var i=f.call_id,j=f.calltype,k=f.capability;b=(b=f.escalation_conference_name)!=null?b:null;c=(c=f.experiments)!=null?c:[];d=(d=f.extraParams)!=null?d:[];e=(e=f.fbexp)!=null?e:"";var l=f.handlescollision!==void 0?f.handlescollision:!1,m=f.offer_escalation_support!==void 0?f.offer_escalation_support:!1,n=f.msg_id,o=f.sdp;f=f.videoon;i={call_id:i,calltype:j,capability:k,escalation_conference_name:b,experiments:c,extraParams:d,fbexp:e,from:h,handlescollision:l,msg_id:n,sdp:o,source:a,offer_escalation_support:m,type:g.OFFER,videoon:f};return i}function k(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability,f=b.reason,h=b.msg_id;b=b.subreason;d={call_id:d,capability:e,from:c,msg_id:h,reason:f,subreason:b,source:a,type:g.HANG_UP};return d}function l(a){var b=a.payload,c=a.from;a=a.source;b=JSON.parse(b);var d=b.call_id,e=b.capability;b=b.msg_id;d={call_id:d,capability:e,from:c,msg_id:b,source:a,type:g.OTHER_DISMISS};return d}e.exports=a}),null);
__d("RTWebSignalingListener",["FBMqttChannel","ZenonMWMessageTranslator","ZenonP2PMessageTranslator","ZenonP2PMessageValidator","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.subscribe=function(a,c){__p&&__p();var d=this;b("FBMqttChannel").subscribe("/webrtc",function(e){var f=b("ZenonP2PMessageValidator").validateAndTransformP2PMessage(e);d.$1(e,c);if(f){e=b("ZenonP2PMessageTranslator").toSignalingMessage(f);e&&a(e)}});b("FBMqttChannel").subscribe("/rtc_multi",function(c){c=JSON.parse(c);c=b("ZenonMWMessageTranslator").toSignalingMessage(c);c&&a(c)})};c.unsubscribe=function(){b("FBMqttChannel").unsubscribeAll("/webrtc"),b("FBMqttChannel").unsubscribeAll("/rtc_multi")};c.$1=function(a,c){try{a=JSON.parse(a);c(a)}catch(a){b("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};return a}();e.exports=a}),null);
__d("JewelQPLogging",["QPRenderer"],(function(a,b,c,d,e,f){var g=!1,h=null,i=!1;function j(){if(i)return;g&&h&&(i=!0,b("QPRenderer").logEvent(String(h.promotion_id),"view",h.instance_log_data?h.instance_log_data:{}))}a={onJewelOpened:function(){g=!0,j()},updateQPLogData:function(a){h=a,j()}};e.exports=a}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function(a,b,c,d,e,f){__p&&__p();a=babelHelpers["extends"]({},b("ArbiterMixin"),{_initialized:!1,_count:0,_requestList:{},addFriendRequests:function(a){Object.assign(this._requestList,a)},getRequestListKeys:function(){return Object.keys(this._requestList)},removeRequest:function(a){delete this._requestList[a]},getRequestCount:function(a){return this.getRequestListKeys().length},decrementCount:function(){this.setCount(Math.max(0,this._count-1))},setCount:function(a){b("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:a},"state")},setupListeners:function(){__p&&__p();var a=this;if(this._initialized)return;this._initialized=!0;b("Arbiter").subscribe("jewel/count-updated",function(b,c){c.jewel==="requests"&&a._updateCount(c.count)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_add"),function(b,c){return a._addRequest(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(b,c){return a._addNotification(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("mobile_requests_count"),function(b,c){return a._updateBadgeCountFromObject(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(b,c){return a._removeOldRequest(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("friend_requests_seen"),function(b,c){return a.setCount(0)})},_updateCount:function(a){var b=this._count!==a;this._count=a;b&&this.inform("countUpdated",a)},_addRequest:function(a){__p&&__p();if(!a)return;a=a.obj;var b=a.from;a=a.suggester;b=this._requestList[b];b||this.setCount(this._count+1);b=b?b.type:null;a=b===19&&!a;this.inform("addRequest",{shouldReplace:a,previousType:b})},_updateBadgeCountFromObject:function(a){if(!a)return;a=a.obj;a=a.num_unseen+a.num_friend_confirmed_unseen;this._refreshJewel();this.setCount(a)},_addNotification:function(a){if(!a||a.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function(a){if(!a)return;a=this._requestList[a.obj.from];if(!a)return;this.inform("removeOldRequest",a)},_refreshJewel:function(a){a===void 0&&(a=!1),this.inform("refreshJewel",a)}});e.exports=a}),null);
__d("XGigaboxxUpdateSeenTimeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/gigaboxx/endpoint/writesafe/update_last_seen_time/",{})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","Event","EventProfiler","Focus","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","RequestsJewelStore","ScrollableArea","TimeSlice","WebFriendingRequests","XGigaboxxUpdateSeenTimeAsyncController","ge","getElementPosition","getViewportDimensions","promiseDone","requireWeak","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h=null;b("requireWeak")("FriendBrowserCheckboxController",function(a){return h=a});var i=31,j=600,k=30,l=160;a=function(){"use strict";__p&&__p();a.getInstance=function(){return this.$11};a.updateFromDOM=function(){var a=this.getInstance();a&&a.fromDom()};a.setupScroll=function(){var a=this.getInstance();a&&a.setupScroll()};a.setInitialHeight=function(){var a=this.getInstance();a&&a.updateHeight()};a.maybeLoadJewel=function(){var a=this.getInstance();a&&a.maybeLoadJewel()};a.isOpen=function(){var a=this.getInstance();return a?a.$2():!1};a.create=function(b,c){this.$11&&g(0,5550);return this.$11=new a(b,c)};a.setupJewelRefresh=function(){b("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(a,c){a={};a.reloadcontent=!0;new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(a).setAllowCrossPageTransition(!0).send()})};function a(a,c){__p&&__p();var d=this;this.$2=c;this.$1=a;this.$4=-1;this.$5=-1;this.$10=b("Promise").resolve(!0);this.$8=function(a){var c=this;b("throttle").acrossTransitionsWithBlocking(function(){return c.$12(a)},5e3)()};(c=b("RequestsJewelStore")).subscribe("addRequest",this.$13.bind(this));c.subscribe("addNotification",function(){return d.$14()});c.subscribe("removeOldRequest",this.$15.bind(this));c.subscribe("refreshJewel",this.$16.bind(this));c.setupListeners();this.setupScroll();this.$17();this.$18();this.$19()}var c=a.prototype;c.fromDom=function(){var a=this,c={};b("DOMQuery").scry(this.$1,"li.objectListItem").forEach(function(b){b=b.getAttribute("id");if(b){b=a.$20(b);b&&b.requester&&(c[b.requester]=b)}});b("RequestsJewelStore").addFriendRequests(c);this.$21()};c.maybeLoadJewel=function(){var a=this;this.$9&&(this.$9(function(){a.openHandler()}),this.$9=null)};c.updateHeight=function(){var a=this.$22();a&&(a.style.height=this.$23()+"px")};c.markSeen=function(){b("promiseDone")(this.$10,function(){new(b("AsyncRequest"))(b("XGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().getURI()).setMethod("POST").send()})};c.openHandler=function(){__p&&__p();!this.$6&&this.$2()&&(this.$6=!0,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen"));b("Arbiter").inform("requestsJewel/opened");var a=b("ge")("fbRequestsJewelLoading"),c=this.$22();if(!a&&!c)this.$9=b("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(a)this.$8({log_impressions:!0});else{a=b("RequestsJewelStore").getRequestListKeys();a.length>0&&new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI("/friends/requests/log_impressions").setData({ids:a.join(","),ref:"jewel"}).send()}b("DOMQuery").scry(this.$1,"a.findFriendsLink").forEach(function(a){b("Focus").set(a)});c&&b("ScrollableArea").poke(c);b("JewelQPLogging").onJewelOpened()};c.closeHandler=function(){b("Arbiter").inform("requestsJewel/closed"),b("DOMQuery").scry(this.$1,"li.jewelItemNew").forEach(function(a){b("CSS").removeClass(a,"jewelItemNew")})};c.setupScroll=function(){var a=this.$22();a&&(this.$7=this.$24(),this.$3=0,b("ScrollableArea").getInstance(a).subscribe("scroll",this.$25.bind(this)),this.$26(),this.$27())};c.$17=function(){b("Event").listen(this.$1,"submit",function(a){a=b("Parent").byClass(a.getTarget(),"objectListItem");a&&(b("CSS").removeClass(a,"jewelItemNew"),b("CSS").addClass(a,"jewelItemResponded"))})};c.$18=function(){var a=this;b("Event").listen(window,"resize",b("throttle").acrossTransitions(function(){a.updateHeight()}))};c.$19=function(){var a=this;b("Arbiter").subscribe("pymk-x-out",function(b,c){b=c.location;(b==="pymk_jewel_first_page"||b==="pymk_jewel")&&a.$26()})};c.$28=function(a){a=parseInt(a,10);return isNaN(a)?null:a};c.$20=function(a){a=a.match(/^(\d+)_(\d+)/);return!a?null:{requester:this.$28(a[1]),type:this.$28(a[2])}};c.$29=function(a,b){return a==null||b==null?null:a+"_"+b};c.$30=function(a,b){return a==null||b==null?null:a+"_"+b+"_req"};a.$31=function(a){a=a.getAttribute("id");return a.substring(0,a.length-6)};c.$22=function(){return b("DOMQuery").scry(this.$1,".uiScrollableArea")[0]};c.$24=function(){return b("DOMQuery").scry(this.$1,".uiScrollableAreaWrap")[0]};c.$25=function(){__p&&__p();var a=b("DOMQuery").scry(this.$7,".uiMorePager").pop();if(a){var c=b("getElementPosition")(a).y,d=this.$22();c>0&&d&&b("CSS").addClass(d,"contentAfter");c=b("DOMQuery").find(a,"a");if(!c)return;d=b("getElementPosition")(c).y;if(d===this.$3)return;a=b("getElementPosition")(this.$7);a=a.y+a.height;if(d-300<a&&d>0){this.$3=d;a=c.getAttribute("ajaxify");a?new(b("AsyncRequest"))(a).setRelativeTo(c).setStatusElement(b("Parent").byClass(c,"stat_elem")).send():h&&h.getInstance("jewel").showMore()}}this.$26();this.$27()};c.$26=function(){__p&&__p();if(!this.$7)return;var a=b("getElementPosition")(this.$7);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.friendBrowserListUnit"),d=c.length-1;while(d>this.$4){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$4)b("WebFriendingRequests").logPYMKImpression(c[d],"pymk_jewel"),d--;this.$4=Math.max(this.$4,f)};c.$27=function(){__p&&__p();if(!this.$7)return;var c=b("getElementPosition")(this.$7);c=c.y+c.height;var d=b("DOMQuery").scry(this.$1,"li.objectListItem"),e=d.length-1;while(e>this.$5){var f=b("getElementPosition")(d[e]),g=f.y;f=g+f.height;if(g>0&&f<=c)break;e-=1}g=e;while(e>this.$5){f=a.$31(d[e]);b("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:f,request_location:"requests_jewel"});b("FriendRequestIHEventLogger").logImpression(f);e-=1}this.$5=Math.max(this.$5,g)};c.$12=function(a){a===void 0&&(a={}),this.$10=new(b("Promise"))(function(c,d){var e=!b("ge")("fbRequestsJewelLoading");new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},a,{reloadcontent:e})).setFinallyHandler(function(a){!a.getError()?c(!0):d()}).send()})};c.$14=function(){if(this.$2())return;this.$8()};c.$13=function(a,b){a=b.shouldReplace;b=b.previousType;if(!a&&(b||this.$2()))return;this.$8()};c.$15=function(a,c){a=c.requester;c=c.type;if(this.$2()||b("ge")("fbRequestsJewelLoading")!=null)return;var d=this.$29(a,c),e=d&&b("ge")(d);e||(d=this.$30(a,c),e=b("ge")(d));e&&(b("CSS").hasClass(e,"jewelItemNew")&&b("RequestsJewelStore").decrementCount(),b("CSS").hasClass(e,"jewelItemResponded")||(b("DOM").remove(e),b("RequestsJewelStore").removeRequest(a),this.$21()))};c.$16=function(a,b){if(b!==!0&&this.$2())return;this.$8()};c.$21=function(){b("DOMQuery").scry(this.$1,"li.empty").forEach(function(a){b("CSS").conditionShow(a,b("RequestsJewelStore").getRequestCount()<=0)})};c.$23=function(){return Math.min(Math.max(b("getViewportDimensions")().height-l,k),j)+i};return a}();a.$11=null;e.exports=a}),null);
__d("WaterfallMessageLifetimeTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAttemptID=function(a){this.$1.attempt_id=a;return this};c.setDestService=function(a){this.$1.dest_service=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setIsBatch=function(a){this.$1.is_batch=a;return this};c.setIsGroup=function(a){this.$1.is_group=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setOfflineThreadingID=function(a){this.$1.offline_threading_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPushNotifID=function(a){this.$1.push_notif_id=a;return this};c.setReceiptID=function(a){this.$1.receipt_id=a;return this};c.setSenderID=function(a){this.$1.sender_id=a;return this};c.setServiceName=function(a){this.$1.service_name=a;return this};c.setSrcService=function(a){this.$1.src_service=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeStamp=function(a){this.$1.time_stamp=a;return this};c.setTopic=function(a){this.$1.topic=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={attempt_id:!0,dest_service:!0,device_id:!0,event_type:!0,is_batch:!0,is_group:!0,message_id:!0,offline_threading_id:!0,page_id:!0,push_notif_id:!0,receipt_id:!0,sender_id:!0,service_name:!0,src_service:!0,thread_id:!0,time:!0,time_stamp:!0,topic:!0,weight:!0};e.exports=a}),null);
__d("FantaTabMainPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a;return(a=b("React")).jsx("div",{className:"_59v1",children:a.jsx("div",{className:"_5qi9 _5qib",children:a.jsx("div",{className:"_3_9e _s0f _50mz _50m_ fbNub _50-v opened _27_3",children:a.jsx("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent _6vu1",children:a.jsx("div",{className:"fbNubFlyoutOuter",children:a.jsx("div",{className:"fbNubFlyoutInner _6vu1 _6z9d",children:a.jsx("div",{className:"_5-kq",children:a.jsx(b("XUISpinner.react"),{})})})})})})})})};e.exports=a}),null);
__d("FantaTabsEagerBootloader",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";var g=function(a){b("ifRequired")("FantaAppStore",function(b){return b.addReducers(a)}),g=b("emptyFunction")};a={bootload:function(){b("ifRequired")("FantaTabsSlimApp",function(a){a.silentPumpUp()}),b("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(a){g(a)},"FantaTabsEagerBootloader")}};e.exports=a}),null);
__d("FantaTabsSlimApp",["BootloadOnRender.react","ChatPerfInstrumentation","FantaTabMainPlaceholder.react","FantaTabsAppBase","JSResource","LazyComponent.react","React","ReactDOM","UserActivity","emptyFunction","gkx","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=500;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$FantaTabsSlimApp1=!1,d.$FantaTabsSlimApp3=function(a,c){d.$FantaTabsSlimApp1?b("ifRequired")("FantaMessageActions",function(d){b("setImmediate")(function(){d.receivedNewMessage(a,c)})}):d.$FantaTabsSlimApp2(function(){b("ifRequired")("FantaMessageActions",function(d){b("setImmediate")(function(){d.receivedNewMessage(a,c)})})})},c)||babelHelpers.assertThisInitialized(d)}var e=c.prototype;e.getPumpedUp=function(a){this.$FantaTabsSlimApp1?a():this.$FantaTabsSlimApp2(a)};e.silentPumpUp=function(){this.$FantaTabsSlimApp1||this.$FantaTabsSlimApp2(b("emptyFunction"),!0)};e.getViewComponent=function(a){a=a?b("React").jsx("div",{}):b("React").jsx(b("FantaTabMainPlaceholder.react"),{});return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{loadDataOnMount:!1}),loader:b("JSResource")("FantaMercuryTabsWithMain.react").__setRef("FantaTabsSlimApp"),placeholder:a})};e.initializeFantaData=function(a){__p&&__p();var c=this;d(["FantaCookieUtil","MercuryThreadInformer","PresenceState"],function(d,e,f){__p&&__p();f.registerStateLoader(function(e){if(c.$FantaTabsSlimApp1)b("ifRequired")("FantaTabActions",function(c){b("ifRequired")("FantaAppStore",function(b){c.loadFromData(d.convertCookieData(e,b.getState().tabGroup,a))})});else{var f=d.convertCookieData(e,null,a);f&&f.tabs.length>0&&c.$FantaTabsSlimApp2(function(){b("ifRequired")("FantaTabActions",function(a){a.loadFromData(f)})})}}),f.doSync(),e.get().subscribe("threads-updated",function(a,c){b("ifRequired")("FantaGetMessageActions",function(a){Object.keys(c).forEach(function(c){b("setImmediate")(function(){a.refreshThread(c)})})})}),b("ChatPerfInstrumentation").logInitData()})};e.$FantaTabsSlimApp2=function(a,c){__p&&__p();var e=this;b("ifRequired")("FantaAppStore",function(b){a()},function(){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(d,f,i,j,k,l){l.registerStateStorer(function(a){if(!b("UserActivity").isOnTab()&&!b("UserActivity").isActive(h)&&!b("gkx")("678595"))return a;var c=d.getState().tabGroup;if(!g||g&&!g.equals(c)){g=c;return f.createCookieData(c,a)}else return a}),b("ReactDOM").render(e.getViewComponent(c),e.tabsElem),k.init(e.tabsElem),e.$FantaTabsSlimApp1=!0,a()})})};e.initializeFantaUI=function(){var a=this;b("gkx")("1263607")?d(["ZenonMessageHandler"],function(a){return a.init()}):d(["FBRTCMessageHandler"],function(a){return a.init()});d(["FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","MercuryBrowserAlerts"],function(c,d,e,f,g){g.init(),c.registerForNewLogMessage(a.$FantaTabsSlimApp3),c.registerForNewMessage(a.$FantaTabsSlimApp3),b("ChatPerfInstrumentation").logInitUI(),b("ChatPerfInstrumentation").logDisplayDone()})};return c}(b("FantaTabsAppBase"));e.exports=new a()}),null);
__d("MercurySyncResnapshot",["Promise","Bootloader","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=a}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.resnapshot=function(){var a=this;this.$1||(this.$1=new(b("Promise"))(function(c,d){b("Bootloader").loadModules(["MercurySyncDeltaHandler"],function(b){b.getForFBID(a.$2).emergencyDFF(function(b){c(b),a.$1=null},function(){d(),a.$1=null})},"MercurySyncResnapshot")}));return this.$1};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessageWaterfallLogger",["MqttEnv","WaterfallMessageLifetimeTypedLogger"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;a={logNewMessageToWaterfall:function(a){var c=a.senderID,d=a.receiptID,e=a.messageID,f=a.offlineThreadingID,i=a.threadID,j=a.irisSeqId;a=a.isGroup;if(!g.genGk(h.mqtt_waterfall_log_client_sampling))return;new(b("WaterfallMessageLifetimeTypedLogger"))().setEventType("message_receive_ws").setSrcService("mqtt").setDestService("webclient").setSenderID(c).setReceiptID(d).setMessageID(e).setOfflineThreadingID(f).setThreadID(i).setIsGroup(a?1:0).addToExtraData("sync_seq_id",j).log()}};e.exports=a}),null);
__d("MessengerMQTTPayloadPreprocessor",[],(function(a,b,c,d,e,f){"use strict";a={process:function(a,b,c){var d=parseInt(c.irisSeqId.toString(),10);return{seqID:d,obj:{queue:a,iseq:d,delta:c,seqID:d,type:b}}}};e.exports=a}),null);
__d("MessengerMQTTPresenceActivity",["CurrentUser","Event","MessengerMQTTPresenceReporting","Run","UserActivity"],(function(a,b,c,d,e,f){a={init:function(){b("Event").listen(window,"focus",function(){b("MessengerMQTTPresenceReporting").onUserActivity()}),b("Event").listen(window,"blur",function(){b("MessengerMQTTPresenceReporting").reportForegroundState(!1,!1)}),b("Run").onBeforeUnload(function(){b("MessengerMQTTPresenceReporting").reportForegroundState(!1,!0)},!1),b("UserActivity").subscribe(function(){b("MessengerMQTTPresenceReporting").onUserActivity()}),b("CurrentUser").isWorkUser()&&d(["WorkplaceChatHelper"],function(a){a.isDesktopChatApp()&&b("MessengerMQTTPresenceReporting").reportWorkchatDesktopCapability()})}};e.exports=a}),null);
__d("MessengerMQTTTypingDataPreProcessor",[],(function(a,b,c,d,e,f){"use strict";a={process:function(a,b){var c=b.thread;a=c==null?{from:b.sender_fbid,st:b.state,to:a,type:"typ"}:{from:b.sender_fbid,st:b.state,thread:c,thread_fbid:c,type:"ttyp"};return{obj:a}}};e.exports=a}),null);
__d("SyncProtocolClient",["Int64","MercurySingletonProvider","MqttEnv","SyncProtocolConstants","exponentialBackoff"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env;a=function(){__p&&__p();a.getForFBID=function(a){return h.getForFBID(a)};function a(a){var c=this;this.$1=a;this.$2=[];this.$5=g.getLoggerInstance();this.$10=new(b("exponentialBackoff"))(function(){return c.$11()},this)}var c=a.prototype;c.getPublishMessages=function(){return this.$12()};c.init=function(a,c,d,e){__p&&__p();var f=this;if(!c&&!e){this.$5.bumpCounter("sp_init_invalid_parameter");return this}this.$9=a;this.$8=!0;this.$3=c?b("Int64").fromString(c):null;this.$6=d;this.$7=e;this.$4=null;this.$9.subscribe("/t_ms",function(a){return f.$13(a)});this.$9.subscribe("/thread_typing",function(a){f.$14(a)});this.$9.subscribe("/orca_typing_notifications",function(a){f.$14(a)});this.$9.subscribe("/notify_disconnect",function(a){return f.$15(a)});this.connectToIris();return this};c.connectToIris=function(a){a===void 0&&(a=null),a!==null&&(this.$3=b("Int64").fromString(a)),this.$8=!0,this.$9.registerExtraConnectPayloadProvider(this)};c.$12=function(){__p&&__p();var a;if(this.$4){if(!this.$3){this.$5.bumpCounter("connect_payload_iris_no_seq_id");return[]}a=this.$16()}else a=this.$17();this.$5.debugTrace("Sending request with MQTT Connect",JSON.stringify({topic:a.topic,payload:a.payload}));return[a]};c.$11=function(){__p&&__p();var a;if(this.$4){if(!this.$3){this.$5.bumpCounter("subscribe_to_iris_no_seq_id");return}a=this.$16()}else a=this.$17();this.$5.debugTrace("Sending request",JSON.stringify({topic:a.topic,payload:a.payload}));this.$9.publish(a.topic,a.payload,{qos:1,skipBuffer:!0})};c.$18=function(a){var b=null;try{b=JSON.parse(a)}catch(a){this.$5.logError(a,"Unable to process data")}return b};c.$14=function(a){var b=this.$18(a);if(b==null){this.$5.logWarn("_processTypingData","Unable to process typing data");return}this.$2.forEach(function(a){typeof a.onTypingReceived==="function"&&a.onTypingReceived(b)})};c.addDeltaStreamListener=function(a){this.$2.push(a)};c.$15=function(a){this.$5.logWarn("_handleNotifyDisconnect","Disconnecting reason: "+a),this.$5.bumpCounter("notify_disconnect_"+a),a===b("SyncProtocolConstants").IRIS_CURSOR_LIMIT&&this.$19(a)};c.$19=function(a){this.$5.bumpCounter(a+"_request"),this.$4=null,this.$8=!1,this.$9.unregisterExtraConnectPayloadProvider(this),this.$2.forEach(function(b){return b.onStreamDisconnect(a)})};c.$13=function(a){a=this.$18(a);if(a==null){this.$5.logWarn("_processDeltas","Unable to process delta");return}var b={syncToken:a.syncToken,entityId:a.queueEntityId,errorCode:a.errorCode,firstSeqId:a.firstDeltaSeqId,lastSeqId:a.lastIssuedSeqId};this.$5.debugTrace("Sync data received",JSON.stringify(b));b=this.$1;a.queueEntityId!=null&&a.queueEntityId!=b?this.$5.bumpCounter("delta_for_other_fbid"):a.syncToken?this.$20(a):a.queueEntityId==null?this.$5.bumpCounter("no_fbid"):a.errorCode?this.$21(a.errorCode):this.$22(a)};c.$21=function(a){this.$5.bumpCounter("iris_queue_error."+a),this.$5.logWarn("_handleIrisError","Recevied an error code from sync protocol "+a),a==="ERROR_QUEUE_TEMPORARY_NOT_AVAILABLE"?this.$10():this.$19(a)};c.$20=function(a){var c=this,d=b("Int64").fromString(a.firstDeltaSeqId.toString());(this.$3===null||this.$3!=null&&!this.$3.equals(d))&&this.$5.bumpCounter("initial_sequence_id_mismatch");this.$4=a.syncToken;this.$3=d;this.$5.debugTrace("Sync token received",JSON.stringify({token:this.$4}));this.$9.subscribeChannelEvents({onMQTTStateChanged:function(a){a==="Connected"&&c.$10.reset()}})};c.$22=function(a){var c=a.deltas,d=this.$3;if(c&&d){var e=b("Int64").fromString(a.firstDeltaSeqId.toString());a=b("Int64").fromString(a.lastIssuedSeqId.toString());e.equals(d.add(b("Int64").ONE))?this.$23(e,a,c):e.compare(d)<0?(this.$5.bumpCounter("delta_batch_in_middle"),a.compare(d)>0&&this.$23(d.add(b("Int64").ONE),a,c)):(this.$5.bumpCounter("missing_deltas_get_diffs"),this.$11())}else this.$5.bumpCounter("process_deltas_invalid_state")};c.$23=function(a,c,d){__p&&__p();a=a;for(var e=0;e<d.length;e++){var f=d[e],g=f["class"]||"Missing",h={seqId:a.toString(),type:g,status:""},i=1;if(g!="Missing")try{i=this.$24(f,g,a,h)}catch(a){h.status="err:"+a.message}else h.status="no type",this.$5.bumpCounter("missing_delta_type");this.$5.debugTrace("onDeltaReceived",JSON.stringify(h));a=a.add(b("Int64").fromInt(i))}this.$3=c};c.$24=function(a,c,d,e){__p&&__p();var f=1,g="";c==="NoOp"&&(f=a.numNoOps||f,g+="n:"+f);a.irisSeqId||(a.irisSeqId=d.toString(),g+="missing seq id");var h=b("Int64").fromString(a.irisSeqId.toString())||d;h.equals(d)?g+=" seqId match":(g+=" seqId mismatch",this.$5.bumpCounter("seq_id_running_id_mismatch"));var i={type:c,payload:a};this.$2.forEach(function(a){return a.onDeltaReceived(i)});e.status=g;return f};c.$17=function(){var a={sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,initial_titan_sequence_id:this.$3&&this.$3.toString(),device_params:this.$6,queue_position:this.$7};return{topic:"/messenger_sync_create_queue",payload:JSON.stringify(a),qos:1}};c.$16=function(){var a={sync_token:this.$4,sync_api_version:10,max_deltas_able_to_process:1e3,delta_batch_size:500,encoding:"JSON",entity_fbid:this.$1,last_seq_id:this.$3&&this.$3.toString()};return{topic:"/messenger_sync_get_diffs",payload:JSON.stringify(a),qos:1}};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerMQTTConnection",["requireCond","Arbiter","CurrentUser","FBMqttChannel","MercurySingletonProvider","MercurySyncResnapshot","MessageWaterfallLogger","MessengerMQTTConnectionEvents","MessengerMQTTPayloadPreprocessor","cr:1177633","MessengerMQTTTypingDataPreProcessor","MqttLogger","PresenceStatus","SyncProtocolClient","SyncProtocolConstants","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a=b("MessengerMQTTConnectionEvents")).DELTA_EVENT,h=a.STREAM_CONNECT,i=a.STREAM_DISCONNECT,j=a.STREAM_CONNECTING,k=a.STATE_CONNECTING,l=a.STATE_DISCONNECTED,m=a.TYP;c=function(){__p&&__p();a.getForFBID=function(a){return n.getForFBID(a)};a.get=function(){return n.get()};function a(a){this.$1=a,this.$2=b("MqttLogger").getInstance()}a.setUp=function(c){__p&&__p();var e=c.fbid,f=c.irisSeqID;c.appID;c.endpoint;if(!e||!f)return;var g=b("MqttLogger").getInstance();if(!b("CurrentUser").isLoggedInNow()){g.debugTrace("run","User not logged in");g.bumpCounter("user_not_loggged_in");return}var h=a.getForFBID(e);a.addDeltaStream({fbid:e,irisSeqID:f});h.$3(b("FBMqttChannel").getConnectionState(),b("FBMqttChannel").getLongPollingStatus());b("FBMqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){h.$3(a,b("FBMqttChannel").getLongPollingStatus())},onJSError:function(a){g.bumpCounter("mqtt_js_error")}});b("cr:1177633")!=null&&b("cr:1177633").subscribe(b("PresenceStatus"));b("gkx")("845716")&&d(["MessengerMQTTPresenceActivity"],function(a){a.init()})};a.addDeltaStream=function(c){var d=c.fbid;c=c.irisSeqID;var e=a.getForFBID(d),f=null;b("gkx")("687751")&&(f={accept_pending_deltas:!0});b("SyncProtocolClient").getForFBID(d).init(b("FBMqttChannel"),c,f).addDeltaStreamListener(e)};var c=a.prototype;c.onDeltaReceived=function(a){var c=a.type;a=a.payload;try{c=="NewMessage"&&b("MessageWaterfallLogger").logNewMessageToWaterfall({senderID:a.messageMetadata.actorFbId,receiptID:this.$1,messageID:a.messageMetadata.messageId,offlineThreadingID:a.messageMetadata.offlineThreadingId,threadID:a.messageMetadata.threadKey.threadFbId!=null?a.messageMetadata.threadKey.threadFbId:"",irisSeqId:a.irisSeqId,isGroup:a.messageMetadata.threadKey.threadFbId!=null})}catch(a){this.$2.logError(a,"Unable to log to waterfall")}c=b("MessengerMQTTPayloadPreprocessor").process(this.$1,c,a);b("Arbiter").inform(g,c)};c.onStreamDisconnect=function(a){var c=this;if(a==="ERROR_QUEUE_LOST"||a==="ERROR_QUEUE_NOT_FOUND"||a==="ERROR_QUEUE_EXCEEDS_MAX_DELTAS"||a==="ERROR_QUEUE_UNDERFLOW"||a==="ERROR_QUEUE_OVERFLOW"){b("promiseDone")(b("MercurySyncResnapshot").getForFBID(this.$1).resnapshot(),function(a){b("SyncProtocolClient").getForFBID(c.$1).connectToIris(a.toString())},function(){b("Arbiter").inform(i,b("SyncProtocolConstants").SNAPSHOT_FAILURE)});return}a!==b("SyncProtocolConstants").IRIS_CURSOR_LIMIT&&this.$2.bumpCounter("unhandled_iris_error."+a);b("Arbiter").inform(i,a)};c.onTypingReceived=function(a){a=b("MessengerMQTTTypingDataPreProcessor").process(this.$1,a);b("Arbiter").inform(m,a)};c.$3=function(a,c){if(a=="Connected"||c=="LPActive"){b("Arbiter").inform(h);return}switch(a){case k:b("Arbiter").inform(j);break;case l:b("Arbiter").inform(i);break}};return a}();var n=new(b("MercurySingletonProvider"))(c);e.exports=c}),null);
__d("MessengerMQTTPresence",["BanzaiODS","FBMqttChannel","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/orca_presence",h="mqtt_web.presence",i="/send_additional_contacts",j=!1;a={subscribe:function(a){if(j)return;j=!0;b("FBMqttChannel").subscribe(g,function(c){c=JSON.parse(c);c&&c.list&&(b("gkx")("983392")&&c.list_type&&c.list_type==="full"&&a.reset(),a.setMultiFromMQTT(c.list),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.event"),b("BanzaiODS").bumpEntityKey(3303,h,"buddylist.active_buddies",c.list.length))})},unsubscribe:function(){j=!1,b("FBMqttChannel").unsubscribeAll(g)},sendAdditionalBuddyRequest:function(a){b("FBMqttChannel").publish(i,JSON.stringify({additional_contacts:[a]}))}};e.exports=a}),null);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").jsx(b("MNCommerceDialogContainer.react"),{}),a)}};e.exports=a}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").jsx(b("P2PDialogContainer.react"),{}),a)}};e.exports=a}),null);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").jsx(b("PagesPlatformDialogContainer.react"),{}),a)}};e.exports=a}),null);